import{r as n,j as a,a as e}from"./app-e057de79.js";import{R as ie}from"./react-paginate-61d0e15f.js";import{n as oe}from"./NotFound-19253a0b.js";import{l as ce}from"./index-18cf91c4.js";import{E as de}from"./exceljs.min-9c74167d.js";import{h as p}from"./moment-fbc5633a.js";import{F as me}from"./FileSaver.min-104598b7.js";import{C as ue}from"./index-2fd36de9.js";import{L as k}from"./popover-807b57b5.js";import{t as xe}from"./transition-d8cb4eb2.js";import"./_commonjs-dynamic-modules-302442b1.js";import"./render-5eaee1c9.js";import"./keyboard-7b642a18.js";import"./bugs-55244794.js";import"./use-is-mounted-31350877.js";import"./use-resolve-button-type-ff7c32c3.js";import"./use-event-listener-2051adf1.js";function he(...c){return c.filter(Boolean).join(" ")}function Ae({NoDelData:c,setNoDelData:A,setActiveIndexGTRS:ge,setLastIndex:pe,setactiveCon:fe,EDate:f,setEDate:I,SDate:b,setSDate:_,currentUser:L,url:q,oldestDate:O,latestDate:B}){const[Y,C]=n.useState();n.useEffect(()=>{c==null&&(C(!0),$())},[]);const $=async()=>{axios.get(`${q}api/GTRS/NoDelInfo`,{headers:{RoleId:L.role_id}}).then(t=>{const o=JSON.stringify(t.data);new Promise((d,x)=>{const g=JSON.parse(o);d(g)}).then(d=>{A(d),C(!1)})}).catch(t=>{console.log(t)})},[y,W]=n.useState(c),[z,R]=n.useState(0),N=15,M=z*N,G=t=>{R(t.selected)},w=new Date,J=`${w.getFullYear()}-${w.getMonth()+1}-${w.getDate()}`,[u,K]=n.useState(c);n.useState(""),n.useState(J),n.useEffect(()=>{v(b,f,S),W(c)},[c]);const[S,V]=n.useState(""),X=t=>{const o=t.target.value;_(o),v(o,f,S)},Q=t=>{const o=t.target.value;I(o),v(b,o,S)},U=t=>{V(t),v(b,f,t)},v=(t,o,m)=>{const d=c==null?void 0:c.filter(x=>{const g=new Date(x.DespatchDateTime),s=new Date(t),l=new Date(o);s.setHours(0),l.setSeconds(59),l.setMinutes(59),l.setHours(23);const h=m?x.ConsignmentNo.includes(m):!0;return g>=s&&g<=l&&h});R(0),K(d)},Z=Math.ceil((u==null?void 0:u.length)/N),T=n.useRef(),[D,P]=n.useState(!1),[F,j]=n.useState(!1),[r,E]=n.useState([]);n.useLayoutEffect(()=>{const t=r.length>0&&r.length<y.length;P(r.length===(y==null?void 0:y.length)),j(t),T.current.indeterminate=t},[r]);function ee(){E(D||F?[]:y),P(!D&&!F),j(!1)}const te=n.useRef(null),ae=["Consignment No","Despatch DateTime","Sender Name","Sender Suburb","Sender State","Status","Receiver Name","Receiver Suburb","Receiver State","Timeslot","POD","IsLocal","Delivery Required DateTime","Description"];ce.useDownloadExcel({currentTableRef:te.current,filename:"Consignments table",sheet:"Consignments"});function se(){let t=Array.from(document.querySelectorAll('input[name="column"]:checked')).map(s=>s.value);t.length===0&&(t=ae);const o=r.map(s=>t.reduce((l,h)=>{const i=h.replace(/\s+/g,"");return i?i==="SenderSuburb"?l[i]=s.Send_Suburb:i==="Status"?l[i]=s.AdminStatusCodes_Description:i==="SenderState"?l[i]=s.Send_State:i==="ReceiverSuburb"?l[i]=s.Del_Suburb:h.replace(/\s+/g,"")==="DespatchDateTime"?l[i]=p(s.DespatchDateTime.replace("T"," "),"YYYY-MM-DD HH:mm:ss").format("DD-MM-YYYY h:mm A")=="Invalid date"?"":p(s.DespatchDateTime.replace("T"," "),"YYYY-MM-DD HH:mm:ss").format("DD-MM-YYYY h:mm A"):h.replace(/\s+/g,"")==="DeliveryRequiredDateTime"?l[i]=p(s.DeliveryRequiredDateTime.replace("T"," "),"YYYY-MM-DD HH:mm:ss").format("DD-MM-YYYY h:mm A")=="Invalid date"?"":p(s.DeliveryRequiredDateTime.replace("T"," "),"YYYY-MM-DD HH:mm:ss").format("DD-MM-YYYY h:mm A"):i==="ReceiverState"?l[i]=s.Del_State:l[h.replace(/\s+/g,"")]=s[h.replace(/\s+/g,"")]:l[i]=s[i],l},{})),m=new de.Workbook,d=m.addWorksheet("Sheet1"),x=d.addRow(t);x.font={bold:!0},x.fill={type:"pattern",pattern:"solid",fgColor:{argb:"FFE2B540"}},x.alignment={horizontal:"center"},o.forEach(s=>{d.addRow(Object.values(s))});const g=t.map(()=>15);d.columns=g.map((s,l)=>({width:s,key:t[l]})),m.xlsx.writeBuffer().then(s=>{const l=new Blob([s],{type:"application/vnd.openxmlformats-officedocument.spreadsheetml.sheet"});me.saveAs(l,"NoDeliveryinfo.xlsx")})}const[le,ne]=n.useState(""),[re,H]=n.useState(!1);return a("div",{children:[Y&&a("div",{className:"min-h-screen md:pl-20 pt-16 h-full flex flex-col items-center justify-center",children:[a("div",{className:"flex items-center justify-center",children:[e("div",{className:"h-5 w-5 bg-goldd rounded-full mr-5 animate-bounce"}),e("div",{className:"h-5 w-5 bg-goldd rounded-full mr-5 animate-bounce200"}),e("div",{className:"h-5 w-5 bg-goldd rounded-full animate-bounce400"})]}),e("div",{className:"text-dark mt-4 font-bold",children:"Please wait while we get the data for you."})]}),!Y&&a("div",{className:"px-4 sm:px-6 lg:px-8 w-full bg-smooth pb-20",children:[e("div",{className:"sm:flex sm:items-center",children:e("div",{className:"sm:flex-auto mt-6",children:e("h1",{className:"text-2xl py-2 px-0 font-extrabold text-gray-600",children:"No Delivery information"})})}),e("div",{className:"mt-3",children:e("div",{className:"w-full relative",children:a("div",{className:" sm:border-gray-200 text-gray-400 flex flex-col justify-between md:flex-row gap-y-4 gap-x-2 md:items-center",children:[e("label",{htmlFor:"last-name",className:"inline-block text-sm font-medium leading-6  flex-item items-center",children:"Date From"}),e("div",{className:"sm:mt-0 md:px-4 ",children:e("input",{type:"date",name:"from-date",onKeyDown:t=>t.preventDefault(),value:b,min:O,max:f,onChange:X,id:"from-date",className:"flex-item block w-full max-w-lg h-[36px] rounded-md border-0 py-1.5 text-gray-700 shadow-sm ring-1 ring-inset ring-gray-300 placeholder:text-gray-400 focus:ring-2 focus:ring-inset focus:ring-indigo-600 sm:max-w-xs sm:text-sm sm:leading-6"})}),e("label",{htmlFor:"last-name",className:"inline-block text-sm font-medium leading-6 flex-item",children:"To"}),e("div",{className:"mt-2 flex-item  sm:mt-0 md:px-4",children:e("input",{type:"date",name:"to-date",onKeyDown:t=>t.preventDefault(),value:f,min:b,max:B,onChange:Q,id:"to-date",className:"block w-full max-w-lg h-[36px]  rounded-md border-0 py-1.5 text-gray-700 shadow-sm ring-1 ring-inset ring-gray-300 placeholder:text-gray-400 focus:ring-2 focus:ring-inset focus:ring-indigo-600 sm:max-w-xs sm:text-sm sm:leading-6"})}),e("div",{className:"w-72 flex-item w-full sm:max-w-xs max-w-lg",children:a("div",{className:"relative border rounded",children:[e("svg",{xmlns:"http://www.w3.org/2000/svg",className:"absolute top-0 bottom-0 w-4 h-4 my-auto text-gray-400 left-3",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:e("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M21 21l-6-6m2-5a7 7 0 11-14 0 7 7 0 0114 0z"})}),e("input",{type:"text",placeholder:"Con. No.",onChange:t=>U(t.target.value),className:"w-full py-0.5 h-[36px] pl-12 pr-4 text-gray-500 border-none rounded-md outline-none "})]})}),e("div",{className:" object-right flex-item md:ml-auto",children:a(k,{className:"relative object-right flex-item md:ml-auto",children:[e("button",{onMouseEnter:()=>{r.length===0&&(ne("Please select a row"),H(!0),setTimeout(()=>{H(!1)},2e3))},children:a(k.Button,{className:`inline-flex items-center w-[5.5rem] h-[36px] rounded-md border ${r.length===0?"bg-gray-300 cursor-not-allowed":"bg-gray-800"} px-4 py-2 text-xs font-medium leading-4 text-white shadow-sm hover:bg-gray-400 focus:outline-none focus:ring-2 focus:ring-indigo-500 focus:ring-offset-2`,disabled:r.length===0,children:["Export",e(ue,{className:"h-5 w-5","aria-hidden":"true"})]})}),re&&e("div",{className:"absolute top-7 left-0 md:-left-14 w-[9rem] right-0 bg-red-200 text-dark text-xs py-2 px-4 rounded-md opacity-100 transition-opacity duration-300",children:le}),e(xe,{as:n.Fragment,enter:"transition ease-out duration-200",enterFrom:"opacity-0 translate-y-1",enterTo:"opacity-100 translate-y-0",leave:"transition ease-in duration-150",leaveFrom:"opacity-100 translate-y-0",leaveTo:"opacity-0 translate-y-1",children:e(k.Panel,{className:"absolute left-20 lg:-left-5 z-10 mt-5 flex w-screen max-w-max -translate-x-1/2 px-4",children:a("div",{className:" max-w-md flex-auto overflow-hidden rounded-lg bg-white text-sm leading-6 shadow-lg ring-1 ring-gray-900/5",children:[e("div",{className:"p-4",children:a("div",{className:"mt-2 flex flex-col",children:[a("label",{className:"",children:[e("input",{type:"checkbox",name:"column",value:"ConsignmentNo",className:"text-dark focus:ring-goldd rounded "})," ","Consignment Number"]}),a("label",{children:[e("input",{type:"checkbox",name:"column",value:"SenderName",className:"text-dark rounded focus:ring-goldd"})," ","Sender"]}),a("label",{children:[e("input",{type:"checkbox",name:"column",value:"Sender Suburb",className:"text-dark rounded focus:ring-goldd"})," ","Sender Suburb"]}),a("label",{children:[e("input",{type:"checkbox",name:"column",value:"Sender State",className:"text-dark rounded focus:ring-goldd"})," ","Sender State"]}),a("label",{children:[e("input",{type:"checkbox",name:"column",value:"Status",className:"text-dark rounded focus:ring-goldd"})," ","Status"]}),a("label",{children:[e("input",{type:"checkbox",name:"column",value:"Receiver Name",className:"text-dark rounded focus:ring-goldd"})," ","Receiver Name"]}),a("label",{className:"",children:[e("input",{type:"checkbox",name:"column",value:"Receiver Suburb",className:"text-dark rounded focus:ring-goldd"})," ","Receiver Suburb"]}),a("label",{className:"",children:[e("input",{type:"checkbox",name:"column",value:"Receiver State",className:"text-dark rounded focus:ring-goldd"})," ","Receiver State"]}),a("label",{className:"",children:[e("input",{type:"checkbox",name:"column",value:"Timeslot",className:"text-dark rounded focus:ring-goldd"})," ","Timeslot"]}),a("label",{className:"",children:[e("input",{type:"checkbox",name:"column",value:"POD",className:"text-dark rounded focus:ring-goldd"})," ","POD"]}),a("label",{className:"",children:[e("input",{type:"checkbox",name:"column",value:"DeliveryRequiredDateTime",className:"text-dark rounded focus:ring-goldd"})," ","Delivery Required DateTime"]}),a("label",{className:"",children:[e("input",{type:"checkbox",name:"column",value:"Description",className:"text-dark rounded focus:ring-goldd"})," ","Description"]})]})}),e("div",{className:"grid grid-cols-1 divide-x divide-gray-900/5 bg-gray-50",children:e("button",{onClick:se,className:"flex items-center justify-center gap-x-2.5 p-3 font-semibold text-gray-900 hover:bg-gray-100",children:"Export XLS"})})]})})})]})})]})})}),a("div",{className:"mt-8 flow-root  bg-white ",children:[e("div",{className:"w-full border rounded-lg overflow-x-auto containerscroll",children:e("div",{className:"inline-block min-w-full  align-middle ",children:a("div",{className:"relative",children:[r.length>0&&e("div",{className:"absolute left-14 top-0 flex h-12 items-center space-x-3 bg-white sm:left-12"}),a("table",{className:"min-w-full table-fixed divide-y divide-gray-300",children:[e("thead",{children:a("tr",{className:"py-2.5",children:[e("th",{scope:"col",className:"relative px-7 sm:w-12 sm:px-6",children:e("input",{type:"checkbox",className:"absolute left-4 top-1/2 -mt-2 h-4 w-4 rounded border-gray-300 text-dark focus:ring-goldd ",ref:T,checked:D,onChange:ee})}),e("th",{scope:"col",className:"min-w-[8rem] py-3.5 pr-3 text-left text-sm font-semibold text-gray-900",children:"Con No."}),e("th",{scope:"col",className:"px-3  text-left text-sm font-semibold text-gray-600",children:"Despatch DateTime"}),e("th",{scope:"col",className:"px-3  text-left text-sm font-semibold text-gray-600",children:"Sender Name"}),e("th",{scope:"col",className:"px-3  text-left text-sm font-semibold text-gray-600",children:"Sender Suburb"}),e("th",{scope:"col",className:"px-3  text-left text-sm font-semibold text-gray-600",children:"Sender State"}),e("th",{scope:"col",className:"px-3  text-left text-sm font-semibold text-gray-600",children:"Status"}),e("th",{scope:"col",className:"px-3  text-left text-sm font-semibold text-gray-600",children:"Receiver Name"}),e("th",{scope:"col",className:"px-3  text-left text-sm font-semibold text-gray-600",children:"Receiver Suburb"}),e("th",{scope:"col",className:"px-3  text-left text-sm font-semibold text-gray-600",children:"Receiver State"}),e("th",{scope:"col",className:"px-3  text-left text-sm font-semibold text-gray-600",children:"Timeslot"}),e("th",{scope:"col",className:"px-3  text-left text-sm font-semibold text-gray-600",children:"POD"}),e("th",{scope:"col",className:"px-3  text-left text-sm font-semibold text-gray-600",children:"Delivery Required DateTime"}),e("th",{scope:"col",className:"px-3  text-left text-sm font-semibold text-gray-600",children:"Description"})]})}),e("tbody",{className:"divide-y divide-gray-300 ",children:(u==null?void 0:u.length)>0?u.slice(M,M+N).map((t,o)=>a("tr",{className:[r.includes(t)?"bg-gray-50":"cursor-pointer",o%2===0?"bg-smooth":"bg-white"].join(" "),children:[a("td",{className:"relative px-7 sm:w-12 sm:px-6",children:[r.includes(t)&&e("div",{className:"absolute inset-y-0 left-0 w-0.5 bg-goldd"}),e("input",{type:"checkbox",className:"absolute left-4 top-1/2 -mt-2 h-4 w-4 rounded border-gray-300 text-dark focus:ring-goldd",value:t.ConsignmentID,checked:r.includes(t),onChange:m=>E(m.target.checked?[...r,t]:r.filter(d=>d!==t))})]}),e("td",{className:he("whitespace-nowrap  pr-3 text-sm font-medium",r.includes(t)?"text-indigo-600":"text-gray-500"),children:t.ConsignmentNo}),e("td",{className:"whitespace-nowrap px-3 py-2.5 text-sm text-gray-500",children:t.DespatchDateTime?p(t.DespatchDateTime.replace("T"," "),"YYYY-MM-DD HH:mm:ss").format("DD-MM-YYYY h:mm A"):null}),e("td",{className:"whitespace-nowrap px-3 py-2.5 text-sm text-gray-500",children:t.SenderName}),e("td",{className:"whitespace-nowrap px-3 py-2.5 text-sm text-gray-500",children:t.Send_Suburb}),e("td",{className:"whitespace-nowrap px-3 py-2.5 text-sm text-gray-500",children:t.Send_State}),e("td",{className:"whitespace-nowrap px-3 py-2.5 text-sm text-gray-500",children:t.AdminStatusCodes_Description}),e("td",{className:"whitespace-nowrap px-3 py-2.5 text-sm text-gray-500",children:t.ReceiverName}),e("td",{className:"whitespace-nowrap px-3 py-2.5 text-sm text-gray-500",children:t.Del_Suburb}),e("td",{className:"whitespace-nowrap px-3 py-2.5 text-sm text-gray-500",children:t.Del_State}),e("td",{className:"whitespace-nowrap px-3 py-2.5 text-sm text-gray-500",children:t.Timeslot?e("span",{className:"inline-flex items-center rounded-full bg-green-100 px-3 py-0.5 text-sm font-medium text-green-800",children:"true"}):e("span",{className:"inline-flex items-center rounded-full bg-red-100 px-3 py-0.5 text-sm font-medium text-red-800",children:"false"})}),e("td",{className:"whitespace-nowrap px-3 py-2.5 text-sm text-gray-500",children:t.POD?e("span",{className:"inline-flex items-center rounded-full bg-green-100 px-3 py-0.5 text-sm font-medium text-green-800",children:"true"}):e("span",{className:"inline-flex items-center rounded-full bg-red-100 px-3 py-0.5 text-sm font-medium text-red-800",children:"false"})}),e("td",{className:"whitespace-nowrap px-3 py-2.5 text-sm text-gray-500",children:t.DeliveryRequiredDateTime?p(t.DeliveryRequiredDateTime.replace("T"," "),"YYYY-MM-DD HH:mm:ss").format("DD-MM-YYYY h:mm A"):null}),e("td",{className:"whitespace-nowrap px-3 py-2.5 text-sm text-gray-500",children:t.Description})]},t.ConsignmentID)):e("tr",{children:e("td",{colSpan:"15",children:e("div",{class:" h-72 flex items-center justify-center mt-5",children:a("div",{class:"text-center flex justify-center flex-col",children:[e("img",{src:oe,alt:"",className:"w-52 h-auto "}),e("h1",{class:"text-3xl font-bold text-gray-900",children:"No Data Found"})]})})})})})]})]})})}),e("div",{className:"pt-4 pb-10 text-xs text-gray-400",children:e(ie,{previousLabel:"← Previous",nextLabel:"Next →",pageCount:Z,onPageChange:G,containerClassName:"flex justify-center items-center mt-4",pageClassName:"mx-2 rounded-full hover:bg-gray-100",previousLinkClassName:"px-3 py-2 bg-gray-100 text-gray-700 rounded-l hover:bg-gray-200",nextLinkClassName:"px-3 py-2 bg-gray-100 text-gray-700 rounded-r hover:bg-gray-200",disabledClassName:"opacity-50 cursor-not-allowed",activeClassName:"text-blue-500 font-bold"})})]})]})]})}export{Ae as default};
