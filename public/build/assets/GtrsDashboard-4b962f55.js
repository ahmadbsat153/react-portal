import{r as c,R as P,a as h}from"./app-e057de79.js";import{C as O,P as F,A as L,p as K,a as Y}from"./chart-edd6f26f.js";const M="label";function y(e,t){typeof e=="function"?e(t):e&&(e.current=t)}function k(e,t){const a=e.options;a&&t&&Object.assign(a,t)}function U(e,t){e.labels=t}function v(e,t){let a=arguments.length>2&&arguments[2]!==void 0?arguments[2]:M;const l=[];e.datasets=t.map(n=>{const i=e.datasets.find(g=>g[a]===n[a]);return!i||!n.data||l.includes(i)?{...n}:(l.push(i),Object.assign(i,n),i)})}function B(e){let t=arguments.length>1&&arguments[1]!==void 0?arguments[1]:M;const a={labels:[],datasets:[]};return U(a,e.labels),v(a,e.datasets,t),a}function x(e,t){const{height:a=150,width:l=300,redraw:n=!1,datasetIdKey:i,type:g,data:u,options:f,plugins:b=[],fallbackContent:D,updateMode:T,...S}=e,d=c.useRef(null),s=c.useRef(),m=()=>{d.current&&(s.current=new O(d.current,{type:g,data:B(u,i),options:f&&{...f},plugins:b}),y(t,s.current))},p=()=>{y(t,null),s.current&&(s.current.destroy(),s.current=null)};return c.useEffect(()=>{!n&&s.current&&f&&k(s.current,f)},[n,f]),c.useEffect(()=>{!n&&s.current&&U(s.current.config.data,u.labels)},[n,u.labels]),c.useEffect(()=>{!n&&s.current&&u.datasets&&v(s.current.config.data,u.datasets,i)},[n,u.datasets]),c.useEffect(()=>{s.current&&(n?(p(),setTimeout(m)):s.current.update(T))},[n,f,u.labels,u.datasets,T]),c.useEffect(()=>{s.current&&(p(),setTimeout(m))},[g]),c.useEffect(()=>(m(),()=>p()),[]),P.createElement("canvas",Object.assign({ref:d,role:"img",height:a,width:l},S),D)}const V=c.forwardRef(x);function H(e,t){return O.register(t),c.forwardRef((a,l)=>P.createElement(V,Object.assign({},a,{ref:l,type:e})))}const W=H("pie",F);O.register(L,K,Y);const _={labels:["Red","Blue","Yellow","Green","Purple","Orange"],datasets:[{label:"# of Votes",data:[12,19,3,5,2,3],backgroundColor:["rgba(255, 99, 132, 0.2)","rgba(54, 162, 235, 0.2)","rgba(255, 206, 86, 0.2)","rgba(75, 192, 192, 0.2)","rgba(153, 102, 255, 0.2)","rgba(255, 159, 64, 0.2)"],borderColor:["rgba(255, 99, 132, 1)","rgba(54, 162, 235, 1)","rgba(255, 206, 86, 1)","rgba(75, 192, 192, 1)","rgba(153, 102, 255, 1)","rgba(255, 159, 64, 1)"],borderWidth:1}]};function $(){return h(W,{data:_})}function Q(e){const t=[],a={};let l=0,n=0,i=0,g=0,u=0,f=0,b=0,D=0,T=0;const S={},d={},s={},m=e.dashData;m.reduce((r,o)=>r+o.NETTAMOUNT,0),m.forEach(r=>{const o=r.DESPATCHDATE.slice(0,7),A=new Date(r.DESPATCHDATE),I=new Date(A.getFullYear(),A.getMonth(),1).toLocaleDateString("en-US",{year:"numeric",month:"2-digit",day:"2-digit"}).replace(/\//g,"-");t.includes(I)||t.push(I);const j=I.split("-")[0],C=parseInt(j),E=parseInt(r.NETTAMOUNT);S[o]||(S[o]=0),S[o]+=E,d[o]||(d[o]=0),r.POD===!0&&(d[o]+=1),s[o]||(s[o]=0),r.POD===!1&&(s[o]+=1),r.STATUS==="PASS"?l++:r.STATUS==="FAIL"?n++:r.STATUS==="PENDING"&&i++,r.CONSIGNMENTSTATUS==="DELIVERED"?T++:r.CONSIGNMENTSTATUS==="AWAITING PICKUP"?g++:r.CONSIGNMENTSTATUS==="ON-FOR-DELIVERY"?D++:r.CONSIGNMENTSTATUS==="PICKEDUP"?u++:r.CONSIGNMENTSTATUS==="DEPOT"?b++:r.CONSIGNMENTSTATUS==="LOADED"&&f++,isNaN(E)||(a.hasOwnProperty(C)||(a[C]=0),a[C]+=E)});const p=[],N=[],w=Object.values(d),R=Object.values(s),G=Object.values(S);for(const[r,o]of Object.entries(a))p.push(r),N.push(o);return sessionStorage.setItem("consYear",p),sessionStorage.setItem("consAmount",N),sessionStorage.setItem("consMonth",t),sessionStorage.setItem("consAmountByMonth",G),sessionStorage.setItem("consTruePOD",w),sessionStorage.setItem("consFalsePOD",R),sessionStorage.setItem("consPassStatus",l),sessionStorage.setItem("consFailStatus",n),sessionStorage.setItem("consPendStatus",i),sessionStorage.setItem("consDeliveredStatus",T),sessionStorage.setItem("consAwaitingStatus",g),sessionStorage.setItem("consDeliveryStatus",D),sessionStorage.setItem("consPickedCountStatus",u),sessionStorage.setItem("consDepotStatus",b),sessionStorage.setItem("consLoadingStatus",f),h("div",{className:" px-4 sm:px-6 lg:px-8 py-6 bg-smooth",children:h("div",{className:"grid grid-cols-12 gap-6",children:h($,{})})})}export{Q as default};
