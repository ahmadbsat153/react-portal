import{r as s,j as a,a as e}from"./app-e057de79.js";import{R as re}from"./react-paginate-61d0e15f.js";import{n as ce}from"./NotFound-19253a0b.js";import{l as ie}from"./index-18cf91c4.js";import{h as k}from"./moment-fbc5633a.js";import{E as de}from"./exceljs.min-9c74167d.js";import{C as me}from"./index-2fd36de9.js";import{F as he}from"./FileSaver.min-104598b7.js";import{L as D}from"./popover-807b57b5.js";import{t as ue}from"./transition-d8cb4eb2.js";import"./_commonjs-dynamic-modules-302442b1.js";import"./render-5eaee1c9.js";import"./keyboard-7b642a18.js";import"./bugs-55244794.js";import"./use-is-mounted-31350877.js";import"./use-resolve-button-type-ff7c32c3.js";import"./use-event-listener-2051adf1.js";function ge(...c){return c.filter(Boolean).join(" ")}function Ie({AdditionalData:c,setAdditionalData:I,setActiveIndexGTRS:xe,setLastIndex:pe,setactiveCon:fe,EDate:g,setEDate:H,SDate:x,setSDate:A,currentUser:B,url:Q,oldestDate:$,latestDate:O}){const[R,T]=s.useState();s.useEffect(()=>{c==null&&(T(!0),W())},[]);const W=async()=>{axios.get(`${Q}api/GTRS/AddCharges`,{headers:{RoleId:B.role_id}}).then(t=>{const o=JSON.stringify(t.data);new Promise((i,h)=>{const u=JSON.parse(o);i(u)}).then(i=>{I(i),T(!1)})}).catch(t=>{console.log(t)})},[p,z]=s.useState(c),[G,Y]=s.useState(0),N=15,M=G*N,J=t=>{Y(t.selected)},v=new Date,K=`${v.getFullYear()}-${v.getMonth()+1}-${v.getDate()}`,[m,_]=s.useState(c);s.useState(""),s.useState(K);const[w,V]=s.useState(""),q=t=>{const o=t.target.value;A(o),f(o,g,w)},X=t=>{const o=t.target.value;H(o),f(x,o,w)},U=t=>{V(t),f(x,g,t)},f=(t,o,d)=>{const i=c==null?void 0:c.filter(h=>{const u=new Date(h.DespatchDateTime),n=new Date(t),r=new Date(o);n.setHours(0),r.setSeconds(59),r.setMinutes(59),r.setHours(23);const y=d?h.ConsignmentNo.includes(d):!0;return u>=n&&u<=r&&y});Y(0),_(i)};s.useEffect(()=>{f(x,g,w),z(c)},[c]);const Z=Math.ceil((m==null?void 0:m.length)/N),S=s.useRef(),[C,F]=s.useState(!1),[j,E]=s.useState(!1),[l,L]=s.useState([]);s.useLayoutEffect(()=>{const t=l.length>0&&l.length<p.length;F(l.length===(p==null?void 0:p.length)),E(t),S.current.indeterminate=t},[l]);function ee(){L(C||j?[]:p),F(!C&&!j),E(!1)}const te=s.useRef(null),ae=["Consignment No","Quantity","Total Charge","Code Ref","Description Ref","Fuel Levy Amount Ref","Despatch DateTime","Name","Description","Code"];ie.useDownloadExcel({currentTableRef:te.current,filename:"Consignments table",sheet:"Consignments"});function se(){let t=Array.from(document.querySelectorAll('input[name="column"]:checked')).map(n=>n.value);t.length===0&&(t=ae);const o=l.map(n=>t.reduce((r,y)=>{const b=y.replace(/\s+/g,"");return b&&(y.replace(/\s+/g,"")==="DespatchDateTime"?r[b]=k(n.DespatchDateTime.replace("T"," "),"YYYY-MM-DD HH:mm:ss").format("DD-MM-YYYY h:mm A")=="Invalid date"?"":k(n.DespatchDateTime.replace("T"," "),"YYYY-MM-DD HH:mm:ss").format("DD-MM-YYYY h:mm A"):r[b]=n[b]),r},{})),d=new de.Workbook,i=d.addWorksheet("Sheet1"),h=i.addRow(t);h.font={bold:!0},h.fill={type:"pattern",pattern:"solid",fgColor:{argb:"FFE2B540"}},h.alignment={horizontal:"center"},o.forEach(n=>{i.addRow(Object.values(n))});const u=t.map(()=>15);i.columns=u.map((n,r)=>({width:n,key:t[r]})),d.xlsx.writeBuffer().then(n=>{const r=new Blob([n],{type:"application/vnd.openxmlformats-officedocument.spreadsheetml.sheet"});he.saveAs(r,"Additional-Charges.xlsx")})}const[le,ne]=s.useState(""),[oe,P]=s.useState(!1);return a("div",{children:[R&&a("div",{className:"min-h-screen md:pl-20 pt-16 h-full flex flex-col items-center justify-center",children:[a("div",{className:"flex items-center justify-center",children:[e("div",{className:"h-5 w-5 bg-goldd rounded-full mr-5 animate-bounce"}),e("div",{className:"h-5 w-5 bg-goldd rounded-full mr-5 animate-bounce200"}),e("div",{className:"h-5 w-5 bg-goldd rounded-full animate-bounce400"})]}),e("div",{className:"text-dark mt-4 font-bold",children:"Please wait while we get the data for you."})]}),!R&&a("div",{className:"px-4 sm:px-6 lg:px-8 w-full bg-smooth pb-20",children:[e("div",{className:"sm:flex sm:items-center",children:e("div",{className:"sm:flex-auto mt-6",children:e("h1",{className:"text-2xl py-2 px-0 font-extrabold text-gray-600",children:"Additional Charges"})})}),e("div",{className:"mt-3",children:e("div",{className:"w-full relative",children:a("div",{className:" sm:border-gray-200 text-gray-400 flex flex-col justify-between md:flex-row gap-y-4 gap-x-2 md:items-center",children:[e("label",{htmlFor:"last-name",className:"inline-block text-sm font-medium leading-6  flex-item items-center",children:"Date From"}),e("div",{className:"sm:mt-0 md:px-4 ",children:e("input",{type:"date",name:"from-date",onKeyDown:t=>t.preventDefault(),value:x,min:$,max:g,onChange:q,id:"from-date",className:"flex-item block w-full max-w-lg h-[36px] rounded-md border-0 py-1.5 text-gray-700 shadow-sm ring-1 ring-inset ring-gray-300 placeholder:text-gray-400 focus:ring-2 focus:ring-inset focus:ring-indigo-600 sm:max-w-xs sm:text-sm sm:leading-6"})}),e("label",{htmlFor:"last-name",className:"inline-block text-sm font-medium leading-6 flex-item",children:"To"}),e("div",{className:"mt-2 flex-item  sm:mt-0 md:px-4",children:e("input",{type:"date",name:"to-date",onKeyDown:t=>t.preventDefault(),value:g,min:x,max:O,onChange:X,id:"to-date",className:"block w-full max-w-lg h-[36px]  rounded-md border-0 py-1.5 text-gray-700 shadow-sm ring-1 ring-inset ring-gray-300 placeholder:text-gray-400 focus:ring-2 focus:ring-inset focus:ring-indigo-600 sm:max-w-xs sm:text-sm sm:leading-6"})}),e("div",{className:"w-72 flex-item w-full sm:max-w-xs max-w-lg",children:a("div",{className:"relative border rounded",children:[e("svg",{xmlns:"http://www.w3.org/2000/svg",className:"absolute top-0 bottom-0 w-4 h-4 my-auto text-gray-400 left-3",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:e("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M21 21l-6-6m2-5a7 7 0 11-14 0 7 7 0 0114 0z"})}),e("input",{type:"text",placeholder:"Con. No.",onChange:t=>U(t.target.value),className:"w-full py-0.5 h-[36px] pl-12 pr-4 text-gray-500 border-none rounded-md outline-none "})]})}),e("div",{className:" object-right flex-item md:ml-auto",children:a(D,{className:"relative object-right flex-item md:ml-auto",children:[e("button",{onMouseEnter:()=>{l.length===0&&(ne("Please select a row"),P(!0),setTimeout(()=>{P(!1)},2e3))},children:a(D.Button,{className:`inline-flex items-center w-[5.5rem] h-[36px] rounded-md border ${l.length===0?"bg-gray-300 cursor-not-allowed":"bg-gray-800"} px-4 py-2 text-xs font-medium leading-4 text-white shadow-sm hover:bg-gray-400 focus:outline-none focus:ring-2 focus:ring-indigo-500 focus:ring-offset-2`,disabled:l.length===0,children:["Export",e(me,{className:"h-5 w-5","aria-hidden":"true"})]})}),oe&&e("div",{className:"absolute top-7 left-0 md:-left-14 w-[9rem] right-0 bg-red-200 text-dark text-xs py-2 px-4 rounded-md opacity-100 transition-opacity duration-300",children:le}),e(ue,{as:s.Fragment,enter:"transition ease-out duration-200",enterFrom:"opacity-0 translate-y-1",enterTo:"opacity-100 translate-y-0",leave:"transition ease-in duration-150",leaveFrom:"opacity-100 translate-y-0",leaveTo:"opacity-0 translate-y-1",children:e(D.Panel,{className:"absolute left-20 lg:left-0 z-10 mt-5 flex w-screen max-w-max -translate-x-1/2 px-4",children:a("div",{className:" max-w-md flex-auto overflow-hidden rounded-lg bg-white text-sm leading-6 shadow-lg ring-1 ring-gray-900/5",children:[e("div",{className:"p-4",children:a("div",{className:"mt-2 flex flex-col",children:[a("label",{className:"",children:[e("input",{type:"checkbox",name:"column",value:"ConsignmentNo",className:"text-dark focus:ring-goldd rounded "})," ","Consignment Number"]}),a("label",{children:[e("input",{type:"checkbox",name:"column",value:"Quantity",className:"text-dark rounded focus:ring-goldd"})," ","Quantity"]}),a("label",{children:[e("input",{type:"checkbox",name:"column",value:"Total Charge",className:"text-dark rounded focus:ring-goldd"})," ","Total Charge"]}),a("label",{children:[e("input",{type:"checkbox",name:"column",value:"Code Ref",className:"text-dark rounded focus:ring-goldd"})," ","Code Ref"]}),a("label",{children:[e("input",{type:"checkbox",name:"column",value:"Description Ref",className:"text-dark rounded focus:ring-goldd"})," ","Description Ref"]}),a("label",{className:"",children:[e("input",{type:"checkbox",name:"column",value:"Fuel Levy Amount Ref",className:"text-dark rounded focus:ring-goldd"})," ","Fuel Levy Amount Ref"]}),a("label",{className:"",children:[e("input",{type:"checkbox",name:"column",value:"Despatch DateTime",className:"text-dark rounded focus:ring-goldd"})," ","Despatch DateTime"]}),a("label",{className:"",children:[e("input",{type:"checkbox",name:"column",value:"Name",className:"text-dark rounded focus:ring-goldd"})," ","Name"]}),a("label",{className:"",children:[e("input",{type:"checkbox",name:"column",value:"Description",className:"text-dark rounded focus:ring-goldd"})," ","Description"]}),a("label",{className:"",children:[e("input",{type:"checkbox",name:"column",value:"Code",className:"text-dark rounded focus:ring-goldd"})," ","Code"]})]})}),e("div",{className:"grid grid-cols-1 divide-x divide-gray-900/5 bg-gray-50",children:e("button",{onClick:se,className:"flex items-center justify-center gap-x-2.5 p-3 font-semibold text-gray-900 hover:bg-gray-100",children:"Export XLS"})})]})})})]})})]})})}),a("div",{className:"mt-8 flow-root  bg-white ",children:[e("div",{className:"w-full border rounded-lg overflow-x-auto containerscroll",children:e("div",{className:"inline-block min-w-full  align-middle ",children:a("div",{className:"relative",children:[l.length>0&&e("div",{className:"absolute left-14 top-0 flex h-12 items-center space-x-3 bg-white sm:left-12"}),a("table",{className:"min-w-full table-fixed divide-y divide-gray-300",children:[e("thead",{children:a("tr",{className:"py-2.5",children:[e("th",{scope:"col",className:"relative px-7 sm:w-12 sm:px-6",children:e("input",{type:"checkbox",className:"absolute left-4 top-1/2 -mt-2 h-4 w-4 rounded border-gray-300 text-dark focus:ring-goldd",ref:S,checked:C,onChange:ee})}),e("th",{scope:"col",className:"min-w-[8rem] py-4 pr-3 text-left text-sm font-semibold text-gray-900",children:"Con No."}),e("th",{scope:"col",className:"px-3  text-left text-sm font-semibold text-gray-600",children:"Quantity"}),e("th",{scope:"col",className:"px-3  text-left text-sm font-semibold text-gray-600",children:"Total Charge"}),e("th",{scope:"col",className:"px-3  text-left text-sm font-semibold text-gray-600",children:"Code Ref"}),e("th",{scope:"col",className:"px-3  text-left text-sm font-semibold text-gray-600",children:"Description Ref"}),e("th",{scope:"col",className:"px-3  text-left text-sm font-semibold text-gray-600",children:"Fuel Levy Amount Ref"}),e("th",{scope:"col",className:"px-3  text-left text-sm font-semibold text-gray-600",children:"Despatch DateTime"}),e("th",{scope:"col",className:"px-3  text-left text-sm font-semibold text-gray-600",children:"Name"}),e("th",{scope:"col",className:"px-3  text-left text-sm font-semibold text-gray-600",children:"Description"}),e("th",{scope:"col",className:"px-3  text-left text-sm font-semibold text-gray-600",children:"Code"})]})}),e("tbody",{className:"divide-y divide-gray-300 ",children:(m==null?void 0:m.length)>0?m.slice(M,M+N).map((t,o)=>a("tr",{className:[l.includes(t)?"bg-gray-50":"cursor-pointer",o%2===0?"bg-smooth":"bg-white"].join(" "),children:[a("td",{className:"relative px-7 sm:w-12 sm:px-6",children:[l.includes(t)&&e("div",{className:"absolute inset-y-0 left-0 w-0.5 bg-goldd"}),e("input",{type:"checkbox",className:"absolute left-4 top-1/2 -mt-2 h-4 w-4 rounded border-gray-300 text-dark focus:ring-goldd",value:t.ConsignmentId,checked:l.includes(t),onChange:d=>L(d.target.checked?[...l,t]:l.filter(i=>i!==t))})]}),e("td",{className:ge("whitespace-nowrap  pr-3 text-sm font-medium",l.includes(t)?"text-indigo-600":"text-gray-500"),children:t.ConsignmentNo}),e("td",{className:"whitespace-nowrap px-3 py-2.5 text-sm text-gray-500",children:t.Quantity}),e("td",{className:"whitespace-nowrap px-3 py-2.5 text-sm text-gray-500",children:t.TotalCharge}),e("td",{className:"whitespace-nowrap px-3 py-2.5 text-sm text-gray-500",children:t.CodeRef}),e("td",{className:"whitespace-nowrap px-3 py-2.5 text-sm text-gray-500",children:t.DescriptionRef}),e("td",{className:"whitespace-nowrap px-3 py-2.5 text-sm text-gray-500",children:t.FuelLevyAmountRef}),e("td",{className:"whitespace-nowrap px-3 py-2.5 text-sm text-gray-500",children:k(t.DespatchDateTime.replace("T"," "),"YYYY-MM-DD HH:mm:ss").format("DD-MM-YYYY h:mm A")}),e("td",{className:"whitespace-nowrap px-3 py-2.5 text-sm text-gray-500",children:t.Name}),e("td",{className:"whitespace-nowrap px-3 py-2.5 text-sm text-gray-500",children:t.Description}),e("td",{className:"whitespace-nowrap px-3 py-2.5 text-sm text-gray-500",children:t.Code})]},t.ConsignmentId)):e("tr",{children:e("td",{colSpan:"11",children:e("div",{class:" h-72 flex items-center justify-center mt-5",children:a("div",{class:"text-center flex justify-center flex-col",children:[e("img",{src:ce,alt:"",className:"w-52 h-auto "}),e("h1",{class:"text-3xl font-bold text-gray-900",children:"No Data Found"})]})})})})})]})]})})}),e("div",{className:"pt-4 pb-10 text-xs text-gray-400",children:e(re,{previousLabel:"← Previous",nextLabel:"Next →",pageCount:Z,onPageChange:J,containerClassName:"flex justify-center items-center mt-4",pageClassName:"mx-2 rounded-full hover:bg-gray-100",previousLinkClassName:"px-3 py-2 bg-gray-100 text-gray-700 rounded-l hover:bg-gray-200",nextLinkClassName:"px-3 py-2 bg-gray-100 text-gray-700 rounded-r hover:bg-gray-200",disabledClassName:"opacity-50 cursor-not-allowed",activeClassName:"text-blue-500 font-bold"})})]})]})]})}export{Ie as default};
