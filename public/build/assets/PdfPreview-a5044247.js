var an=Object.defineProperty;var on=(B,i,U)=>i in B?an(B,i,{enumerable:!0,configurable:!0,writable:!0,value:U}):B[i]=U;var Lt=(B,i,U)=>(on(B,typeof i!="symbol"?i+"":i,U),U),ue=(B,i,U)=>{if(!i.has(B))throw TypeError("Cannot "+U)};var y=(B,i,U)=>(ue(B,i,"read from private field"),U?U.call(B):i.get(B)),tt=(B,i,U)=>{if(i.has(B))throw TypeError("Cannot add the same private member more than once");i instanceof WeakSet?i.add(B):i.set(B,U)},gt=(B,i,U,h)=>(ue(B,i,"write to private field"),h?h.call(B,U):i.set(B,U),U),re=(B,i,U,h)=>({set _(_){gt(B,i,_,U)},get _(){return y(B,i,h)}}),it=(B,i,U)=>(ue(B,i,"access private method"),U);import{g as getDefaultExportFromCjs,q as require$$5,r as reactExports,R as React,P as PropTypes,a as jsx,j as jsxs}from"./app-e057de79.js";import{c as ChevronLeftIcon,d as ChevronRightIcon}from"./index-2fd36de9.js";import{c as commonjsRequire}from"./_commonjs-dynamic-modules-302442b1.js";function _mergeNamespaces(B,i){for(var U=0;U<i.length;U++){const h=i[U];if(typeof h!="string"&&!Array.isArray(h)){for(const _ in h)if(_!=="default"&&!(_ in B)){const W=Object.getOwnPropertyDescriptor(h,_);W&&Object.defineProperty(B,_,W.get?W:{enumerable:!0,get:()=>h[_]})}}}return Object.freeze(Object.defineProperty(B,Symbol.toStringTag,{value:"Module"}))}var pdf$1={exports:{}};(function(module,exports){(function(i,U){module.exports=U()})(globalThis,()=>(()=>{var __webpack_modules__=[,(B,i)=>{var Mt;Object.defineProperty(i,"__esModule",{value:!0}),i.VerbosityLevel=i.Util=i.UnknownErrorException=i.UnexpectedResponseException=i.TextRenderingMode=i.RenderingIntentFlag=i.PromiseCapability=i.PermissionFlag=i.PasswordResponses=i.PasswordException=i.PageActionEventType=i.OPS=i.MissingPDFException=i.MAX_IMAGE_SIZE_TO_CACHE=i.LINE_FACTOR=i.LINE_DESCENT_FACTOR=i.InvalidPDFException=i.ImageKind=i.IDENTITY_MATRIX=i.FormatError=i.FeatureTest=i.FONT_IDENTITY_MATRIX=i.DocumentActionEventType=i.CMapCompressionType=i.BaseException=i.BASELINE_FACTOR=i.AnnotationType=i.AnnotationStateModelType=i.AnnotationReviewState=i.AnnotationReplyType=i.AnnotationMode=i.AnnotationMarkedState=i.AnnotationFlag=i.AnnotationFieldFlag=i.AnnotationEditorType=i.AnnotationEditorPrefix=i.AnnotationEditorParamsType=i.AnnotationBorderStyleType=i.AnnotationActionEventType=i.AbortException=void 0,i.assert=_t,i.bytesToString=D,i.createValidAbsoluteUrl=At,i.getModificationDate=vt,i.getVerbosityLevel=ut,i.info=lt,i.isArrayBuffer=pt,i.isArrayEqual=Tt,i.normalizeUnicode=Et,i.objectFromMap=E,i.objectSize=b,i.setVerbosityLevel=et,i.shadow=X,i.string32=s,i.stringToBytes=t,i.stringToPDFString=nt,i.stringToUTF8String=at,i.unreachable=mt,i.utf8StringToString=ft,i.warn=ht;const U=[1,0,0,1,0,0];i.IDENTITY_MATRIX=U;const h=[.001,0,0,.001,0,0];i.FONT_IDENTITY_MATRIX=h;const _=1e7;i.MAX_IMAGE_SIZE_TO_CACHE=_;const W=1.35;i.LINE_FACTOR=W;const q=.35;i.LINE_DESCENT_FACTOR=q;const Z=q/W;i.BASELINE_FACTOR=Z;const L={ANY:1,DISPLAY:2,PRINT:4,SAVE:8,ANNOTATIONS_FORMS:16,ANNOTATIONS_STORAGE:32,ANNOTATIONS_DISABLE:64,OPLIST:256};i.RenderingIntentFlag=L;const F={DISABLE:0,ENABLE:1,ENABLE_FORMS:2,ENABLE_STORAGE:3};i.AnnotationMode=F;const v="pdfjs_internal_editor_";i.AnnotationEditorPrefix=v;const N={DISABLE:-1,NONE:0,FREETEXT:3,INK:15};i.AnnotationEditorType=N;const T={FREETEXT_SIZE:1,FREETEXT_COLOR:2,FREETEXT_OPACITY:3,INK_COLOR:11,INK_THICKNESS:12,INK_OPACITY:13};i.AnnotationEditorParamsType=T;const x={PRINT:4,MODIFY_CONTENTS:8,COPY:16,MODIFY_ANNOTATIONS:32,FILL_INTERACTIVE_FORMS:256,COPY_FOR_ACCESSIBILITY:512,ASSEMBLE:1024,PRINT_HIGH_QUALITY:2048};i.PermissionFlag=x;const g={FILL:0,STROKE:1,FILL_STROKE:2,INVISIBLE:3,FILL_ADD_TO_PATH:4,STROKE_ADD_TO_PATH:5,FILL_STROKE_ADD_TO_PATH:6,ADD_TO_PATH:7,FILL_STROKE_MASK:3,ADD_TO_PATH_FLAG:4};i.TextRenderingMode=g;const f={GRAYSCALE_1BPP:1,RGB_24BPP:2,RGBA_32BPP:3};i.ImageKind=f;const l={TEXT:1,LINK:2,FREETEXT:3,LINE:4,SQUARE:5,CIRCLE:6,POLYGON:7,POLYLINE:8,HIGHLIGHT:9,UNDERLINE:10,SQUIGGLY:11,STRIKEOUT:12,STAMP:13,CARET:14,INK:15,POPUP:16,FILEATTACHMENT:17,SOUND:18,MOVIE:19,WIDGET:20,SCREEN:21,PRINTERMARK:22,TRAPNET:23,WATERMARK:24,THREED:25,REDACT:26};i.AnnotationType=l;const A={MARKED:"Marked",REVIEW:"Review"};i.AnnotationStateModelType=A;const S={MARKED:"Marked",UNMARKED:"Unmarked"};i.AnnotationMarkedState=S;const w={ACCEPTED:"Accepted",REJECTED:"Rejected",CANCELLED:"Cancelled",COMPLETED:"Completed",NONE:"None"};i.AnnotationReviewState=w;const m={GROUP:"Group",REPLY:"R"};i.AnnotationReplyType=m;const e={INVISIBLE:1,HIDDEN:2,PRINT:4,NOZOOM:8,NOROTATE:16,NOVIEW:32,READONLY:64,LOCKED:128,TOGGLENOVIEW:256,LOCKEDCONTENTS:512};i.AnnotationFlag=e;const a={READONLY:1,REQUIRED:2,NOEXPORT:4,MULTILINE:4096,PASSWORD:8192,NOTOGGLETOOFF:16384,RADIO:32768,PUSHBUTTON:65536,COMBO:131072,EDIT:262144,SORT:524288,FILESELECT:1048576,MULTISELECT:2097152,DONOTSPELLCHECK:4194304,DONOTSCROLL:8388608,COMB:16777216,RICHTEXT:33554432,RADIOSINUNISON:33554432,COMMITONSELCHANGE:67108864};i.AnnotationFieldFlag=a;const c={SOLID:1,DASHED:2,BEVELED:3,INSET:4,UNDERLINE:5};i.AnnotationBorderStyleType=c;const o={E:"Mouse Enter",X:"Mouse Exit",D:"Mouse Down",U:"Mouse Up",Fo:"Focus",Bl:"Blur",PO:"PageOpen",PC:"PageClose",PV:"PageVisible",PI:"PageInvisible",K:"Keystroke",F:"Format",V:"Validate",C:"Calculate"};i.AnnotationActionEventType=o;const d={WC:"WillClose",WS:"WillSave",DS:"DidSave",WP:"WillPrint",DP:"DidPrint"};i.DocumentActionEventType=d;const k={O:"PageOpen",C:"PageClose"};i.PageActionEventType=k;const n={ERRORS:0,WARNINGS:1,INFOS:5};i.VerbosityLevel=n;const j={NONE:0,BINARY:1};i.CMapCompressionType=j;const $={dependency:1,setLineWidth:2,setLineCap:3,setLineJoin:4,setMiterLimit:5,setDash:6,setRenderingIntent:7,setFlatness:8,setGState:9,save:10,restore:11,transform:12,moveTo:13,lineTo:14,curveTo:15,curveTo2:16,curveTo3:17,closePath:18,rectangle:19,stroke:20,closeStroke:21,fill:22,eoFill:23,fillStroke:24,eoFillStroke:25,closeFillStroke:26,closeEOFillStroke:27,endPath:28,clip:29,eoClip:30,beginText:31,endText:32,setCharSpacing:33,setWordSpacing:34,setHScale:35,setLeading:36,setFont:37,setTextRenderingMode:38,setTextRise:39,moveText:40,setLeadingMoveText:41,setTextMatrix:42,nextLine:43,showText:44,showSpacedText:45,nextLineShowText:46,nextLineSetSpacingShowText:47,setCharWidth:48,setCharWidthAndBounds:49,setStrokeColorSpace:50,setFillColorSpace:51,setStrokeColor:52,setStrokeColorN:53,setFillColor:54,setFillColorN:55,setStrokeGray:56,setFillGray:57,setStrokeRGBColor:58,setFillRGBColor:59,setStrokeCMYKColor:60,setFillCMYKColor:61,shadingFill:62,beginInlineImage:63,beginImageData:64,endInlineImage:65,paintXObject:66,markPoint:67,markPointProps:68,beginMarkedContent:69,beginMarkedContentProps:70,endMarkedContent:71,beginCompat:72,endCompat:73,paintFormXObjectBegin:74,paintFormXObjectEnd:75,beginGroup:76,endGroup:77,beginAnnotation:80,endAnnotation:81,paintImageMaskXObject:83,paintImageMaskXObjectGroup:84,paintImageXObject:85,paintInlineImageXObject:86,paintInlineImageXObjectGroup:87,paintImageXObjectRepeat:88,paintImageMaskXObjectRepeat:89,paintSolidColorImageMask:90,constructPath:91};i.OPS=$;const Y={NEED_PASSWORD:1,INCORRECT_PASSWORD:2};i.PasswordResponses=Y;let Q=n.WARNINGS;function et(dt){Number.isInteger(dt)&&(Q=dt)}function ut(){return Q}function lt(dt){Q>=n.INFOS&&console.log(`Info: ${dt}`)}function ht(dt){Q>=n.WARNINGS&&console.log(`Warning: ${dt}`)}function mt(dt){throw new Error(dt)}function _t(dt,R){dt||mt(R)}function St(dt){switch(dt==null?void 0:dt.protocol){case"http:":case"https:":case"ftp:":case"mailto:":case"tel:":return!0;default:return!1}}function At(dt,R=null,I=null){if(!dt)return null;try{if(I&&typeof dt=="string"){if(I.addDefaultProtocol&&dt.startsWith("www.")){const bt=dt.match(/\./g);(bt==null?void 0:bt.length)>=2&&(dt=`http://${dt}`)}if(I.tryConvertEncoding)try{dt=at(dt)}catch{}}const ct=R?new URL(dt,R):new URL(dt);if(St(ct))return ct}catch{}return null}function X(dt,R,I,ct=!1){return Object.defineProperty(dt,R,{value:I,enumerable:!ct,configurable:!0,writable:!1}),I}const u=function(){function R(I,ct){this.constructor===R&&mt("Cannot initialize BaseException."),this.message=I,this.name=ct}return R.prototype=new Error,R.constructor=R,R}();i.BaseException=u;class p extends u{constructor(R,I){super(R,"PasswordException"),this.code=I}}i.PasswordException=p;class P extends u{constructor(R,I){super(R,"UnknownErrorException"),this.details=I}}i.UnknownErrorException=P;class H extends u{constructor(R){super(R,"InvalidPDFException")}}i.InvalidPDFException=H;class O extends u{constructor(R){super(R,"MissingPDFException")}}i.MissingPDFException=O;class z extends u{constructor(R,I){super(R,"UnexpectedResponseException"),this.status=I}}i.UnexpectedResponseException=z;class G extends u{constructor(R){super(R,"FormatError")}}i.FormatError=G;class M extends u{constructor(R){super(R,"AbortException")}}i.AbortException=M;function D(dt){(typeof dt!="object"||(dt==null?void 0:dt.length)===void 0)&&mt("Invalid argument for bytesToString");const R=dt.length,I=8192;if(R<I)return String.fromCharCode.apply(null,dt);const ct=[];for(let bt=0;bt<R;bt+=I){const Ct=Math.min(bt+I,R),wt=dt.subarray(bt,Ct);ct.push(String.fromCharCode.apply(null,wt))}return ct.join("")}function t(dt){typeof dt!="string"&&mt("Invalid argument for stringToBytes");const R=dt.length,I=new Uint8Array(R);for(let ct=0;ct<R;++ct)I[ct]=dt.charCodeAt(ct)&255;return I}function s(dt){return String.fromCharCode(dt>>24&255,dt>>16&255,dt>>8&255,dt&255)}function b(dt){return Object.keys(dt).length}function E(dt){const R=Object.create(null);for(const[I,ct]of dt)R[I]=ct;return R}function C(){const dt=new Uint8Array(4);return dt[0]=1,new Uint32Array(dt.buffer,0,1)[0]===1}function V(){try{return new Function(""),!0}catch{return!1}}class st{static get isLittleEndian(){return X(this,"isLittleEndian",C())}static get isEvalSupported(){return X(this,"isEvalSupported",V())}static get isOffscreenCanvasSupported(){return X(this,"isOffscreenCanvasSupported",typeof OffscreenCanvas<"u")}static get platform(){return typeof navigator>"u"?X(this,"platform",{isWin:!1,isMac:!1}):X(this,"platform",{isWin:navigator.platform.includes("Win"),isMac:navigator.platform.includes("Mac")})}}i.FeatureTest=st;const J=[...Array(256).keys()].map(dt=>dt.toString(16).padStart(2,"0"));class rt{static makeHexColor(R,I,ct){return`#${J[R]}${J[I]}${J[ct]}`}static scaleMinMax(R,I){let ct;R[0]?(R[0]<0&&(ct=I[0],I[0]=I[1],I[1]=ct),I[0]*=R[0],I[1]*=R[0],R[3]<0&&(ct=I[2],I[2]=I[3],I[3]=ct),I[2]*=R[3],I[3]*=R[3]):(ct=I[0],I[0]=I[2],I[2]=ct,ct=I[1],I[1]=I[3],I[3]=ct,R[1]<0&&(ct=I[2],I[2]=I[3],I[3]=ct),I[2]*=R[1],I[3]*=R[1],R[2]<0&&(ct=I[0],I[0]=I[1],I[1]=ct),I[0]*=R[2],I[1]*=R[2]),I[0]+=R[4],I[1]+=R[4],I[2]+=R[5],I[3]+=R[5]}static transform(R,I){return[R[0]*I[0]+R[2]*I[1],R[1]*I[0]+R[3]*I[1],R[0]*I[2]+R[2]*I[3],R[1]*I[2]+R[3]*I[3],R[0]*I[4]+R[2]*I[5]+R[4],R[1]*I[4]+R[3]*I[5]+R[5]]}static applyTransform(R,I){const ct=R[0]*I[0]+R[1]*I[2]+I[4],bt=R[0]*I[1]+R[1]*I[3]+I[5];return[ct,bt]}static applyInverseTransform(R,I){const ct=I[0]*I[3]-I[1]*I[2],bt=(R[0]*I[3]-R[1]*I[2]+I[2]*I[5]-I[4]*I[3])/ct,Ct=(-R[0]*I[1]+R[1]*I[0]+I[4]*I[1]-I[5]*I[0])/ct;return[bt,Ct]}static getAxialAlignedBoundingBox(R,I){const ct=rt.applyTransform(R,I),bt=rt.applyTransform(R.slice(2,4),I),Ct=rt.applyTransform([R[0],R[3]],I),wt=rt.applyTransform([R[2],R[1]],I);return[Math.min(ct[0],bt[0],Ct[0],wt[0]),Math.min(ct[1],bt[1],Ct[1],wt[1]),Math.max(ct[0],bt[0],Ct[0],wt[0]),Math.max(ct[1],bt[1],Ct[1],wt[1])]}static inverseTransform(R){const I=R[0]*R[3]-R[1]*R[2];return[R[3]/I,-R[1]/I,-R[2]/I,R[0]/I,(R[2]*R[5]-R[4]*R[3])/I,(R[4]*R[1]-R[5]*R[0])/I]}static singularValueDecompose2dScale(R){const I=[R[0],R[2],R[1],R[3]],ct=R[0]*I[0]+R[1]*I[2],bt=R[0]*I[1]+R[1]*I[3],Ct=R[2]*I[0]+R[3]*I[2],wt=R[2]*I[1]+R[3]*I[3],kt=(ct+wt)/2,Rt=Math.sqrt((ct+wt)**2-4*(ct*wt-Ct*bt))/2,Ot=kt+Rt||1,xt=kt-Rt||1;return[Math.sqrt(Ot),Math.sqrt(xt)]}static normalizeRect(R){const I=R.slice(0);return R[0]>R[2]&&(I[0]=R[2],I[2]=R[0]),R[1]>R[3]&&(I[1]=R[3],I[3]=R[1]),I}static intersect(R,I){const ct=Math.max(Math.min(R[0],R[2]),Math.min(I[0],I[2])),bt=Math.min(Math.max(R[0],R[2]),Math.max(I[0],I[2]));if(ct>bt)return null;const Ct=Math.max(Math.min(R[1],R[3]),Math.min(I[1],I[3])),wt=Math.min(Math.max(R[1],R[3]),Math.max(I[1],I[3]));return Ct>wt?null:[ct,Ct,bt,wt]}static bezierBoundingBox(R,I,ct,bt,Ct,wt,kt,Rt){const Ot=[],xt=[[],[]];let Nt,Dt,It,Ft,Ut,Gt,Wt,qt;for(let zt=0;zt<2;++zt){if(zt===0?(Dt=6*R-12*ct+6*Ct,Nt=-3*R+9*ct-9*Ct+3*kt,It=3*ct-3*R):(Dt=6*I-12*bt+6*wt,Nt=-3*I+9*bt-9*wt+3*Rt,It=3*bt-3*I),Math.abs(Nt)<1e-12){if(Math.abs(Dt)<1e-12)continue;Ft=-It/Dt,0<Ft&&Ft<1&&Ot.push(Ft);continue}Wt=Dt*Dt-4*It*Nt,qt=Math.sqrt(Wt),!(Wt<0)&&(Ut=(-Dt+qt)/(2*Nt),0<Ut&&Ut<1&&Ot.push(Ut),Gt=(-Dt-qt)/(2*Nt),0<Gt&&Gt<1&&Ot.push(Gt))}let jt=Ot.length,Bt;const Vt=jt;for(;jt--;)Ft=Ot[jt],Bt=1-Ft,xt[0][jt]=Bt*Bt*Bt*R+3*Bt*Bt*Ft*ct+3*Bt*Ft*Ft*Ct+Ft*Ft*Ft*kt,xt[1][jt]=Bt*Bt*Bt*I+3*Bt*Bt*Ft*bt+3*Bt*Ft*Ft*wt+Ft*Ft*Ft*Rt;return xt[0][Vt]=R,xt[1][Vt]=I,xt[0][Vt+1]=kt,xt[1][Vt+1]=Rt,xt[0].length=xt[1].length=Vt+2,[Math.min(...xt[0]),Math.min(...xt[1]),Math.max(...xt[0]),Math.max(...xt[1])]}}i.Util=rt;const ot=[0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,728,711,710,729,733,731,730,732,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,8226,8224,8225,8230,8212,8211,402,8260,8249,8250,8722,8240,8222,8220,8221,8216,8217,8218,8482,64257,64258,321,338,352,376,381,305,322,339,353,382,0,8364];function nt(dt){if(dt[0]>="ï"){let I;if(dt[0]==="þ"&&dt[1]==="ÿ"?I="utf-16be":dt[0]==="ÿ"&&dt[1]==="þ"?I="utf-16le":dt[0]==="ï"&&dt[1]==="»"&&dt[2]==="¿"&&(I="utf-8"),I)try{const ct=new TextDecoder(I,{fatal:!0}),bt=t(dt);return ct.decode(bt)}catch(ct){ht(`stringToPDFString: "${ct}".`)}}const R=[];for(let I=0,ct=dt.length;I<ct;I++){const bt=ot[dt.charCodeAt(I)];R.push(bt?String.fromCharCode(bt):dt.charAt(I))}return R.join("")}function at(dt){return decodeURIComponent(escape(dt))}function ft(dt){return unescape(encodeURIComponent(dt))}function pt(dt){return typeof dt=="object"&&(dt==null?void 0:dt.byteLength)!==void 0}function Tt(dt,R){if(dt.length!==R.length)return!1;for(let I=0,ct=dt.length;I<ct;I++)if(dt[I]!==R[I])return!1;return!0}function vt(dt=new Date){return[dt.getUTCFullYear().toString(),(dt.getUTCMonth()+1).toString().padStart(2,"0"),dt.getUTCDate().toString().padStart(2,"0"),dt.getUTCHours().toString().padStart(2,"0"),dt.getUTCMinutes().toString().padStart(2,"0"),dt.getUTCSeconds().toString().padStart(2,"0")].join("")}class Pt{constructor(){tt(this,Mt,!1);this.promise=new Promise((R,I)=>{this.resolve=ct=>{gt(this,Mt,!0),R(ct)},this.reject=ct=>{gt(this,Mt,!0),I(ct)}})}get settled(){return y(this,Mt)}}Mt=new WeakMap,i.PromiseCapability=Pt;let K=null,yt=null;function Et(dt){return K||(K=/([\u00a0\u00b5\u037e\u0eb3\u2000-\u200a\u202f\u2126\ufb00-\ufb04\ufb06\ufb20-\ufb36\ufb38-\ufb3c\ufb3e\ufb40-\ufb41\ufb43-\ufb44\ufb46-\ufba1\ufba4-\ufba9\ufbae-\ufbb1\ufbd3-\ufbdc\ufbde-\ufbe7\ufbea-\ufbf8\ufbfc-\ufbfd\ufc00-\ufc5d\ufc64-\ufcf1\ufcf5-\ufd3d\ufd88\ufdf4\ufdfa-\ufdfb\ufe71\ufe77\ufe79\ufe7b\ufe7d]+)|(\ufb05+)/gu,yt=new Map([["ﬅ","ſt"]])),dt.replaceAll(K,(R,I,ct)=>I?I.normalize("NFKC"):yt.get(ct))}},(__unused_webpack_module,exports,__w_pdfjs_require__)=>{var B,U,h,_,Jt,q,ae,L,F,v,N,T,x,g,f,fe,A,S,pe,m,e;Object.defineProperty(exports,"__esModule",{value:!0}),exports.build=exports.RenderTask=exports.PDFWorkerUtil=exports.PDFWorker=exports.PDFPageProxy=exports.PDFDocumentProxy=exports.PDFDocumentLoadingTask=exports.PDFDataRangeTransport=exports.LoopbackPort=exports.DefaultStandardFontDataFactory=exports.DefaultFilterFactory=exports.DefaultCanvasFactory=exports.DefaultCMapReaderFactory=void 0,exports.getDocument=getDocument,exports.version=void 0;var _util=__w_pdfjs_require__(1),_annotation_storage=__w_pdfjs_require__(3),_display_utils=__w_pdfjs_require__(6),_font_loader=__w_pdfjs_require__(9),_canvas=__w_pdfjs_require__(11),_worker_options=__w_pdfjs_require__(14),_is_node=__w_pdfjs_require__(10),_message_handler=__w_pdfjs_require__(15),_metadata=__w_pdfjs_require__(16),_optional_content_config=__w_pdfjs_require__(17),_transport_stream=__w_pdfjs_require__(18),_xfa_text=__w_pdfjs_require__(19);const DEFAULT_RANGE_CHUNK_SIZE=65536,RENDERING_CANCELLED_TIMEOUT=100,DELAYED_CLEANUP_TIMEOUT=5e3;let DefaultCanvasFactory=_display_utils.DOMCanvasFactory;exports.DefaultCanvasFactory=DefaultCanvasFactory;let DefaultCMapReaderFactory=_display_utils.DOMCMapReaderFactory;exports.DefaultCMapReaderFactory=DefaultCMapReaderFactory;let DefaultFilterFactory=_display_utils.DOMFilterFactory;exports.DefaultFilterFactory=DefaultFilterFactory;let DefaultStandardFontDataFactory=_display_utils.DOMStandardFontDataFactory;if(exports.DefaultStandardFontDataFactory=DefaultStandardFontDataFactory,_is_node.isNodeJS){const{NodeCanvasFactory:c,NodeCMapReaderFactory:o,NodeFilterFactory:d,NodeStandardFontDataFactory:k}=__w_pdfjs_require__(20);exports.DefaultCanvasFactory=DefaultCanvasFactory=c,exports.DefaultCMapReaderFactory=DefaultCMapReaderFactory=o,exports.DefaultFilterFactory=DefaultFilterFactory=d,exports.DefaultStandardFontDataFactory=DefaultStandardFontDataFactory=k}let createPDFNetworkStream;if(_is_node.isNodeJS){const{PDFNodeStream:c}=__w_pdfjs_require__(21);createPDFNetworkStream=o=>new c(o)}else{const{PDFNetworkStream:c}=__w_pdfjs_require__(24),{PDFFetchStream:o}=__w_pdfjs_require__(25);createPDFNetworkStream=d=>(0,_display_utils.isValidFetchUrl)(d.url)?new o(d):new c(d)}function getDocument(c){if(typeof c=="string"||c instanceof URL?c={url:c}:(0,_util.isArrayBuffer)(c)&&(c={data:c}),typeof c!="object")throw new Error("Invalid parameter in getDocument, need parameter object.");if(!c.url&&!c.data&&!c.range)throw new Error("Invalid parameter object: need either .data, .range or .url");const o=new PDFDocumentLoadingTask,{docId:d}=o,k=c.url?getUrlProp(c.url):null,n=c.data?getDataProp(c.data):null,j=c.httpHeaders||null,$=c.withCredentials===!0,Y=c.password??null,Q=c.range instanceof PDFDataRangeTransport?c.range:null,et=Number.isInteger(c.rangeChunkSize)&&c.rangeChunkSize>0?c.rangeChunkSize:DEFAULT_RANGE_CHUNK_SIZE;let ut=c.worker instanceof PDFWorker?c.worker:null;const lt=c.verbosity,ht=typeof c.docBaseUrl=="string"&&!(0,_display_utils.isDataScheme)(c.docBaseUrl)?c.docBaseUrl:null,mt=typeof c.cMapUrl=="string"?c.cMapUrl:null,_t=c.cMapPacked!==!1,St=c.CMapReaderFactory||DefaultCMapReaderFactory,At=typeof c.standardFontDataUrl=="string"?c.standardFontDataUrl:null,X=c.StandardFontDataFactory||DefaultStandardFontDataFactory,u=c.stopAtErrors!==!0,p=Number.isInteger(c.maxImageSize)&&c.maxImageSize>-1?c.maxImageSize:-1,P=c.isEvalSupported!==!1,H=typeof c.isOffscreenCanvasSupported=="boolean"?c.isOffscreenCanvasSupported:!_is_node.isNodeJS,O=Number.isInteger(c.canvasMaxAreaInBytes)?c.canvasMaxAreaInBytes:-1,z=typeof c.disableFontFace=="boolean"?c.disableFontFace:_is_node.isNodeJS,G=c.fontExtraProperties===!0,M=c.enableXfa===!0,D=c.ownerDocument||globalThis.document,t=c.disableRange===!0,s=c.disableStream===!0,b=c.disableAutoFetch===!0,E=c.pdfBug===!0,C=Q?Q.length:c.length??NaN,V=typeof c.useSystemFonts=="boolean"?c.useSystemFonts:!_is_node.isNodeJS&&!z,st=typeof c.useWorkerFetch=="boolean"?c.useWorkerFetch:St===_display_utils.DOMCMapReaderFactory&&X===_display_utils.DOMStandardFontDataFactory&&(0,_display_utils.isValidFetchUrl)(mt,document.baseURI)&&(0,_display_utils.isValidFetchUrl)(At,document.baseURI),J=c.canvasFactory||new DefaultCanvasFactory({ownerDocument:D}),rt=c.filterFactory||new DefaultFilterFactory({docId:d,ownerDocument:D}),ot=null;(0,_util.setVerbosityLevel)(lt);const nt={canvasFactory:J,filterFactory:rt};if(st||(nt.cMapReaderFactory=new St({baseUrl:mt,isCompressed:_t}),nt.standardFontDataFactory=new X({baseUrl:At})),!ut){const pt={verbosity:lt,port:_worker_options.GlobalWorkerOptions.workerPort};ut=pt.port?PDFWorker.fromPort(pt):new PDFWorker(pt),o._worker=ut}const at={docId:d,apiVersion:"3.6.172",data:n,password:Y,disableAutoFetch:b,rangeChunkSize:et,length:C,docBaseUrl:ht,enableXfa:M,evaluatorOptions:{maxImageSize:p,disableFontFace:z,ignoreErrors:u,isEvalSupported:P,isOffscreenCanvasSupported:H,canvasMaxAreaInBytes:O,fontExtraProperties:G,useSystemFonts:V,cMapUrl:st?mt:null,standardFontDataUrl:st?At:null}},ft={ignoreErrors:u,isEvalSupported:P,disableFontFace:z,fontExtraProperties:G,enableXfa:M,ownerDocument:D,disableAutoFetch:b,pdfBug:E,styleElement:ot};return ut.promise.then(function(){if(o.destroyed)throw new Error("Loading aborted");const pt=_fetchDocument(ut,at),Tt=new Promise(function(vt){let Pt;Q?Pt=new _transport_stream.PDFDataTransportStream({length:C,initialData:Q.initialData,progressiveDone:Q.progressiveDone,contentDispositionFilename:Q.contentDispositionFilename,disableRange:t,disableStream:s},Q):n||(Pt=createPDFNetworkStream({url:k,length:C,httpHeaders:j,withCredentials:$,rangeChunkSize:et,disableRange:t,disableStream:s})),vt(Pt)});return Promise.all([pt,Tt]).then(function([vt,Pt]){if(o.destroyed)throw new Error("Loading aborted");const K=new _message_handler.MessageHandler(d,vt,ut.port),yt=new WorkerTransport(K,o,Pt,ft,nt);o._transport=yt,K.send("Ready",null)})}).catch(o._capability.reject),o}async function _fetchDocument(c,o){if(c.destroyed)throw new Error("Worker was destroyed");const d=await c.messageHandler.sendWithPromise("GetDocRequest",o,o.data?[o.data.buffer]:null);if(c.destroyed)throw new Error("Worker was destroyed");return d}function getUrlProp(c){if(c instanceof URL)return c.href;try{return new URL(c,window.location).href}catch{if(_is_node.isNodeJS&&typeof c=="string")return c}throw new Error("Invalid PDF url data: either string or URL-object is expected in the url property.")}function getDataProp(c){if(_is_node.isNodeJS&&typeof Buffer<"u"&&c instanceof Buffer)return(0,_display_utils.deprecated)("Please provide binary data as `Uint8Array`, rather than `Buffer`."),new Uint8Array(c);if(c instanceof Uint8Array&&c.byteLength===c.buffer.byteLength)return c;if(typeof c=="string")return(0,_util.stringToBytes)(c);if(typeof c=="object"&&!isNaN(c==null?void 0:c.length)||(0,_util.isArrayBuffer)(c))return new Uint8Array(c);throw new Error("Invalid PDF binary data: either TypedArray, string, or array-like object is expected in the data property.")}const i=class{constructor(){this._capability=new _util.PromiseCapability,this._transport=null,this._worker=null,this.docId=`d${re(i,B)._++}`,this.destroyed=!1,this.onPassword=null,this.onProgress=null}get promise(){return this._capability.promise}async destroy(){var o;this.destroyed=!0,await((o=this._transport)==null?void 0:o.destroy()),this._transport=null,this._worker&&(this._worker.destroy(),this._worker=null)}};let PDFDocumentLoadingTask=i;B=new WeakMap,tt(PDFDocumentLoadingTask,B,0),exports.PDFDocumentLoadingTask=PDFDocumentLoadingTask;class PDFDataRangeTransport{constructor(o,d,k=!1,n=null){this.length=o,this.initialData=d,this.progressiveDone=k,this.contentDispositionFilename=n,this._rangeListeners=[],this._progressListeners=[],this._progressiveReadListeners=[],this._progressiveDoneListeners=[],this._readyCapability=new _util.PromiseCapability}addRangeListener(o){this._rangeListeners.push(o)}addProgressListener(o){this._progressListeners.push(o)}addProgressiveReadListener(o){this._progressiveReadListeners.push(o)}addProgressiveDoneListener(o){this._progressiveDoneListeners.push(o)}onDataRange(o,d){for(const k of this._rangeListeners)k(o,d)}onDataProgress(o,d){this._readyCapability.promise.then(()=>{for(const k of this._progressListeners)k(o,d)})}onDataProgressiveRead(o){this._readyCapability.promise.then(()=>{for(const d of this._progressiveReadListeners)d(o)})}onDataProgressiveDone(){this._readyCapability.promise.then(()=>{for(const o of this._progressiveDoneListeners)o()})}transportReady(){this._readyCapability.resolve()}requestDataRange(o,d){(0,_util.unreachable)("Abstract method PDFDataRangeTransport.requestDataRange")}abort(){}}exports.PDFDataRangeTransport=PDFDataRangeTransport;class PDFDocumentProxy{constructor(o,d){this._pdfInfo=o,this._transport=d}get annotationStorage(){return this._transport.annotationStorage}get filterFactory(){return this._transport.filterFactory}get numPages(){return this._pdfInfo.numPages}get fingerprints(){return this._pdfInfo.fingerprints}get isPureXfa(){return(0,_util.shadow)(this,"isPureXfa",!!this._transport._htmlForXfa)}get allXfaHtml(){return this._transport._htmlForXfa}getPage(o){return this._transport.getPage(o)}getPageIndex(o){return this._transport.getPageIndex(o)}getDestinations(){return this._transport.getDestinations()}getDestination(o){return this._transport.getDestination(o)}getPageLabels(){return this._transport.getPageLabels()}getPageLayout(){return this._transport.getPageLayout()}getPageMode(){return this._transport.getPageMode()}getViewerPreferences(){return this._transport.getViewerPreferences()}getOpenAction(){return this._transport.getOpenAction()}getAttachments(){return this._transport.getAttachments()}getJavaScript(){return this._transport.getJavaScript()}getJSActions(){return this._transport.getDocJSActions()}getOutline(){return this._transport.getOutline()}getOptionalContentConfig(){return this._transport.getOptionalContentConfig()}getPermissions(){return this._transport.getPermissions()}getMetadata(){return this._transport.getMetadata()}getMarkInfo(){return this._transport.getMarkInfo()}getData(){return this._transport.getData()}saveDocument(){return this._transport.saveDocument()}getDownloadInfo(){return this._transport.downloadInfoCapability.promise}cleanup(o=!1){return this._transport.startCleanup(o||this.isPureXfa)}destroy(){return this.loadingTask.destroy()}get loadingParams(){return this._transport.loadingParams}get loadingTask(){return this._transport.loadingTask}getFieldObjects(){return this._transport.getFieldObjects()}hasJSActions(){return this._transport.hasJSActions()}getCalculationOrderIds(){return this._transport.getCalculationOrderIds()}}exports.PDFDocumentProxy=PDFDocumentProxy;class PDFPageProxy{constructor(o,d,k,n=!1){tt(this,_);tt(this,q);tt(this,U,null);tt(this,h,!1);this._pageIndex=o,this._pageInfo=d,this._transport=k,this._stats=n?new _display_utils.StatTimer:null,this._pdfBug=n,this.commonObjs=k.commonObjs,this.objs=new PDFObjects,this._maybeCleanupAfterRender=!1,this._intentStates=new Map,this.destroyed=!1}get pageNumber(){return this._pageIndex+1}get rotate(){return this._pageInfo.rotate}get ref(){return this._pageInfo.ref}get userUnit(){return this._pageInfo.userUnit}get view(){return this._pageInfo.view}getViewport({scale:o,rotation:d=this.rotate,offsetX:k=0,offsetY:n=0,dontFlip:j=!1}={}){return new _display_utils.PageViewport({viewBox:this.view,scale:o,rotation:d,offsetX:k,offsetY:n,dontFlip:j})}getAnnotations({intent:o="display"}={}){const d=this._transport.getRenderingIntent(o);return this._transport.getAnnotations(this._pageIndex,d.renderingIntent)}getJSActions(){return this._transport.getPageJSActions(this._pageIndex)}get isPureXfa(){return(0,_util.shadow)(this,"isPureXfa",!!this._transport._htmlForXfa)}async getXfa(){var o;return((o=this._transport._htmlForXfa)==null?void 0:o.children[this._pageIndex])||null}render({canvasContext:o,viewport:d,intent:k="display",annotationMode:n=_util.AnnotationMode.ENABLE,transform:j=null,background:$=null,optionalContentConfigPromise:Y=null,annotationCanvasMap:Q=null,pageColors:et=null,printAnnotationStorage:ut=null}){var X,u,p;if((X=arguments[0])!=null&&X.canvasFactory)throw new Error("render no longer accepts the `canvasFactory`-option, please pass it to the `getDocument`-function instead.");(u=this._stats)==null||u.time("Overall");const lt=this._transport.getRenderingIntent(k,n,ut);gt(this,h,!1),it(this,q,ae).call(this),Y||(Y=this._transport.getOptionalContentConfig());let ht=this._intentStates.get(lt.cacheKey);ht||(ht=Object.create(null),this._intentStates.set(lt.cacheKey,ht)),ht.streamReaderCancelTimeout&&(clearTimeout(ht.streamReaderCancelTimeout),ht.streamReaderCancelTimeout=null);const mt=!!(lt.renderingIntent&_util.RenderingIntentFlag.PRINT);ht.displayReadyCapability||(ht.displayReadyCapability=new _util.PromiseCapability,ht.operatorList={fnArray:[],argsArray:[],lastChunk:!1,separateAnnots:null},(p=this._stats)==null||p.time("Page Request"),this._pumpOperatorList(lt));const _t=P=>{var H,O;ht.renderTasks.delete(St),(this._maybeCleanupAfterRender||mt)&&gt(this,h,!0),it(this,_,Jt).call(this,!mt),P?(St.capability.reject(P),this._abortOperatorList({intentState:ht,reason:P instanceof Error?P:new Error(P)})):St.capability.resolve(),(H=this._stats)==null||H.timeEnd("Rendering"),(O=this._stats)==null||O.timeEnd("Overall")},St=new InternalRenderTask({callback:_t,params:{canvasContext:o,viewport:d,transform:j,background:$},objs:this.objs,commonObjs:this.commonObjs,annotationCanvasMap:Q,operatorList:ht.operatorList,pageIndex:this._pageIndex,canvasFactory:this._transport.canvasFactory,filterFactory:this._transport.filterFactory,useRequestAnimationFrame:!mt,pdfBug:this._pdfBug,pageColors:et});(ht.renderTasks||(ht.renderTasks=new Set)).add(St);const At=St.task;return Promise.all([ht.displayReadyCapability.promise,Y]).then(([P,H])=>{var O;if(y(this,h)){_t();return}(O=this._stats)==null||O.time("Rendering"),St.initializeGraphics({transparency:P,optionalContentConfig:H}),St.operatorListChanged()}).catch(_t),At}getOperatorList({intent:o="display",annotationMode:d=_util.AnnotationMode.ENABLE,printAnnotationStorage:k=null}={}){var Q;function n(){$.operatorList.lastChunk&&($.opListReadCapability.resolve($.operatorList),$.renderTasks.delete(Y))}const j=this._transport.getRenderingIntent(o,d,k,!0);let $=this._intentStates.get(j.cacheKey);$||($=Object.create(null),this._intentStates.set(j.cacheKey,$));let Y;return $.opListReadCapability||(Y=Object.create(null),Y.operatorListChanged=n,$.opListReadCapability=new _util.PromiseCapability,($.renderTasks||($.renderTasks=new Set)).add(Y),$.operatorList={fnArray:[],argsArray:[],lastChunk:!1,separateAnnots:null},(Q=this._stats)==null||Q.time("Page Request"),this._pumpOperatorList(j)),$.opListReadCapability.promise}streamTextContent({includeMarkedContent:o=!1,disableNormalization:d=!1}={}){return this._transport.messageHandler.sendWithStream("GetTextContent",{pageIndex:this._pageIndex,includeMarkedContent:o===!0,disableNormalization:d===!0},{highWaterMark:100,size(n){return n.items.length}})}getTextContent(o={}){if(this._transport._htmlForXfa)return this.getXfa().then(k=>_xfa_text.XfaText.textContent(k));const d=this.streamTextContent(o);return new Promise(function(k,n){function j(){$.read().then(function({value:Q,done:et}){if(et){k(Y);return}Object.assign(Y.styles,Q.styles),Y.items.push(...Q.items),j()},n)}const $=d.getReader(),Y={items:[],styles:Object.create(null)};j()})}getStructTree(){return this._transport.getStructTree(this._pageIndex)}_destroy(){this.destroyed=!0;const o=[];for(const d of this._intentStates.values())if(this._abortOperatorList({intentState:d,reason:new Error("Page was destroyed."),force:!0}),!d.opListReadCapability)for(const k of d.renderTasks)o.push(k.completed),k.cancel();return this.objs.clear(),gt(this,h,!1),it(this,q,ae).call(this),Promise.all(o)}cleanup(o=!1){gt(this,h,!0);const d=it(this,_,Jt).call(this,!1);return o&&d&&this._stats&&(this._stats=new _display_utils.StatTimer),d}_startRenderPage(o,d){var n,j;const k=this._intentStates.get(d);k&&((n=this._stats)==null||n.timeEnd("Page Request"),(j=k.displayReadyCapability)==null||j.resolve(o))}_renderPageChunk(o,d){for(let k=0,n=o.length;k<n;k++)d.operatorList.fnArray.push(o.fnArray[k]),d.operatorList.argsArray.push(o.argsArray[k]);d.operatorList.lastChunk=o.lastChunk,d.operatorList.separateAnnots=o.separateAnnots;for(const k of d.renderTasks)k.operatorListChanged();o.lastChunk&&it(this,_,Jt).call(this,!0)}_pumpOperatorList({renderingIntent:o,cacheKey:d,annotationStorageMap:k}){const j=this._transport.messageHandler.sendWithStream("GetOperatorList",{pageIndex:this._pageIndex,intent:o,cacheKey:d,annotationStorage:k}).getReader(),$=this._intentStates.get(d);$.streamReader=j;const Y=()=>{j.read().then(({value:Q,done:et})=>{if(et){$.streamReader=null;return}this._transport.destroyed||(this._renderPageChunk(Q,$),Y())},Q=>{if($.streamReader=null,!this._transport.destroyed){if($.operatorList){$.operatorList.lastChunk=!0;for(const et of $.renderTasks)et.operatorListChanged();it(this,_,Jt).call(this,!0)}if($.displayReadyCapability)$.displayReadyCapability.reject(Q);else if($.opListReadCapability)$.opListReadCapability.reject(Q);else throw Q}})};Y()}_abortOperatorList({intentState:o,reason:d,force:k=!1}){if(o.streamReader){if(o.streamReaderCancelTimeout&&(clearTimeout(o.streamReaderCancelTimeout),o.streamReaderCancelTimeout=null),!k){if(o.renderTasks.size>0)return;if(d instanceof _display_utils.RenderingCancelledException){let n=RENDERING_CANCELLED_TIMEOUT;d.extraDelay>0&&d.extraDelay<1e3&&(n+=d.extraDelay),o.streamReaderCancelTimeout=setTimeout(()=>{o.streamReaderCancelTimeout=null,this._abortOperatorList({intentState:o,reason:d,force:!0})},n);return}}if(o.streamReader.cancel(new _util.AbortException(d.message)).catch(()=>{}),o.streamReader=null,!this._transport.destroyed){for(const[n,j]of this._intentStates)if(j===o){this._intentStates.delete(n);break}this.cleanup()}}}get stats(){return this._stats}}U=new WeakMap,h=new WeakMap,_=new WeakSet,Jt=function(o=!1){if(it(this,q,ae).call(this),!y(this,h))return!1;if(o)return gt(this,U,setTimeout(()=>{gt(this,U,null),it(this,_,Jt).call(this,!1)},DELAYED_CLEANUP_TIMEOUT)),!1;for(const{renderTasks:d,operatorList:k}of this._intentStates.values())if(d.size>0||!k.lastChunk)return!1;return this._intentStates.clear(),this.objs.clear(),gt(this,h,!1),!0},q=new WeakSet,ae=function(){y(this,U)&&(clearTimeout(y(this,U)),gt(this,U,null))},exports.PDFPageProxy=PDFPageProxy;class LoopbackPort{constructor(){tt(this,L,new Set);tt(this,F,Promise.resolve())}postMessage(o,d){const k={data:structuredClone(o,d?{transfer:d}:null)};y(this,F).then(()=>{for(const n of y(this,L))n.call(this,k)})}addEventListener(o,d){y(this,L).add(d)}removeEventListener(o,d){y(this,L).delete(d)}terminate(){y(this,L).clear()}}L=new WeakMap,F=new WeakMap,exports.LoopbackPort=LoopbackPort;const PDFWorkerUtil={isWorkerDisabled:!1,fallbackWorkerSrc:null,fakeWorkerId:0};exports.PDFWorkerUtil=PDFWorkerUtil;{if(_is_node.isNodeJS&&typeof commonjsRequire=="function")PDFWorkerUtil.isWorkerDisabled=!0,PDFWorkerUtil.fallbackWorkerSrc="./pdf.worker.js";else if(typeof document=="object"){const c=(v=document==null?void 0:document.currentScript)==null?void 0:v.src;c&&(PDFWorkerUtil.fallbackWorkerSrc=c.replace(/(\.(?:min\.)?js)(\?.*)?$/i,".worker$1$2"))}PDFWorkerUtil.isSameOrigin=function(c,o){let d;try{if(d=new URL(c),!d.origin||d.origin==="null")return!1}catch{return!1}const k=new URL(o,d);return d.origin===k.origin},PDFWorkerUtil.createCDNWrapper=function(c){const o=`importScripts("${c}");`;return URL.createObjectURL(new Blob([o]))}}const _PDFWorker=class{constructor({name:c=null,port:o=null,verbosity:d=(0,_util.getVerbosityLevel)()}={}){if(o&&y(_PDFWorker,N).has(o))throw new Error("Cannot use more than one PDFWorker per port.");if(this.name=c,this.destroyed=!1,this.verbosity=d,this._readyCapability=new _util.PromiseCapability,this._port=null,this._webWorker=null,this._messageHandler=null,o){y(_PDFWorker,N).set(o,this),this._initializeFromPort(o);return}this._initialize()}get promise(){return this._readyCapability.promise}get port(){return this._port}get messageHandler(){return this._messageHandler}_initializeFromPort(c){this._port=c,this._messageHandler=new _message_handler.MessageHandler("main","worker",c),this._messageHandler.on("ready",function(){}),this._readyCapability.resolve(),this._messageHandler.send("configure",{verbosity:this.verbosity})}_initialize(){if(!PDFWorkerUtil.isWorkerDisabled&&!_PDFWorker._mainThreadWorkerMessageHandler){let{workerSrc:c}=_PDFWorker;try{PDFWorkerUtil.isSameOrigin(window.location.href,c)||(c=PDFWorkerUtil.createCDNWrapper(new URL(c,window.location).href));const o=new Worker(c),d=new _message_handler.MessageHandler("main","worker",o),k=()=>{o.removeEventListener("error",n),d.destroy(),o.terminate(),this.destroyed?this._readyCapability.reject(new Error("Worker was destroyed")):this._setupFakeWorker()},n=()=>{this._webWorker||k()};o.addEventListener("error",n),d.on("test",$=>{if(o.removeEventListener("error",n),this.destroyed){k();return}$?(this._messageHandler=d,this._port=o,this._webWorker=o,this._readyCapability.resolve(),d.send("configure",{verbosity:this.verbosity})):(this._setupFakeWorker(),d.destroy(),o.terminate())}),d.on("ready",$=>{if(o.removeEventListener("error",n),this.destroyed){k();return}try{j()}catch{this._setupFakeWorker()}});const j=()=>{const $=new Uint8Array;d.send("test",$,[$.buffer])};j();return}catch{(0,_util.info)("The worker has been disabled.")}}this._setupFakeWorker()}_setupFakeWorker(){PDFWorkerUtil.isWorkerDisabled||((0,_util.warn)("Setting up fake worker."),PDFWorkerUtil.isWorkerDisabled=!0),_PDFWorker._setupFakeWorkerGlobal.then(c=>{if(this.destroyed){this._readyCapability.reject(new Error("Worker was destroyed"));return}const o=new LoopbackPort;this._port=o;const d=`fake${PDFWorkerUtil.fakeWorkerId++}`,k=new _message_handler.MessageHandler(d+"_worker",d,o);c.setup(k,o);const n=new _message_handler.MessageHandler(d,d+"_worker",o);this._messageHandler=n,this._readyCapability.resolve(),n.send("configure",{verbosity:this.verbosity})}).catch(c=>{this._readyCapability.reject(new Error(`Setting up fake worker failed: "${c.message}".`))})}destroy(){this.destroyed=!0,this._webWorker&&(this._webWorker.terminate(),this._webWorker=null),y(_PDFWorker,N).delete(this._port),this._port=null,this._messageHandler&&(this._messageHandler.destroy(),this._messageHandler=null)}static fromPort(c){if(!(c!=null&&c.port))throw new Error("PDFWorker.fromPort - invalid method signature.");return y(this,N).has(c.port)?y(this,N).get(c.port):new _PDFWorker(c)}static get workerSrc(){if(_worker_options.GlobalWorkerOptions.workerSrc)return _worker_options.GlobalWorkerOptions.workerSrc;if(PDFWorkerUtil.fallbackWorkerSrc!==null)return _is_node.isNodeJS||(0,_display_utils.deprecated)('No "GlobalWorkerOptions.workerSrc" specified.'),PDFWorkerUtil.fallbackWorkerSrc;throw new Error('No "GlobalWorkerOptions.workerSrc" specified.')}static get _mainThreadWorkerMessageHandler(){var c;try{return((c=globalThis.pdfjsWorker)==null?void 0:c.WorkerMessageHandler)||null}catch{return null}}static get _setupFakeWorkerGlobal(){const loader=async()=>{const mainWorkerMessageHandler=this._mainThreadWorkerMessageHandler;if(mainWorkerMessageHandler)return mainWorkerMessageHandler;if(_is_node.isNodeJS&&typeof commonjsRequire=="function"){const worker=eval("require")(this.workerSrc);return worker.WorkerMessageHandler}return await(0,_display_utils.loadScript)(this.workerSrc),window.pdfjsWorker.WorkerMessageHandler};return(0,_util.shadow)(this,"_setupFakeWorkerGlobal",loader())}};let PDFWorker=_PDFWorker;N=new WeakMap,tt(PDFWorker,N,new WeakMap),exports.PDFWorker=PDFWorker;class WorkerTransport{constructor(o,d,k,n,j){tt(this,f);tt(this,T,new Map);tt(this,x,new Map);tt(this,g,new Map);this.messageHandler=o,this.loadingTask=d,this.commonObjs=new PDFObjects,this.fontLoader=new _font_loader.FontLoader({ownerDocument:n.ownerDocument,styleElement:n.styleElement}),this._params=n,this.canvasFactory=j.canvasFactory,this.filterFactory=j.filterFactory,this.cMapReaderFactory=j.cMapReaderFactory,this.standardFontDataFactory=j.standardFontDataFactory,this.destroyed=!1,this.destroyCapability=null,this._passwordCapability=null,this._networkStream=k,this._fullReader=null,this._lastProgress=null,this.downloadInfoCapability=new _util.PromiseCapability,this.setupMessageHandler()}get annotationStorage(){return(0,_util.shadow)(this,"annotationStorage",new _annotation_storage.AnnotationStorage)}getRenderingIntent(o,d=_util.AnnotationMode.ENABLE,k=null,n=!1){let j=_util.RenderingIntentFlag.DISPLAY,$=null;switch(o){case"any":j=_util.RenderingIntentFlag.ANY;break;case"display":break;case"print":j=_util.RenderingIntentFlag.PRINT;break;default:(0,_util.warn)(`getRenderingIntent - invalid intent: ${o}`)}switch(d){case _util.AnnotationMode.DISABLE:j+=_util.RenderingIntentFlag.ANNOTATIONS_DISABLE;break;case _util.AnnotationMode.ENABLE:break;case _util.AnnotationMode.ENABLE_FORMS:j+=_util.RenderingIntentFlag.ANNOTATIONS_FORMS;break;case _util.AnnotationMode.ENABLE_STORAGE:j+=_util.RenderingIntentFlag.ANNOTATIONS_STORAGE,$=(j&_util.RenderingIntentFlag.PRINT&&k instanceof _annotation_storage.PrintAnnotationStorage?k:this.annotationStorage).serializable;break;default:(0,_util.warn)(`getRenderingIntent - invalid annotationMode: ${d}`)}return n&&(j+=_util.RenderingIntentFlag.OPLIST),{renderingIntent:j,cacheKey:`${j}_${_annotation_storage.AnnotationStorage.getHash($)}`,annotationStorageMap:$}}destroy(){if(this.destroyCapability)return this.destroyCapability.promise;this.destroyed=!0,this.destroyCapability=new _util.PromiseCapability,this._passwordCapability&&this._passwordCapability.reject(new Error("Worker was destroyed during onPassword callback"));const o=[];for(const k of y(this,x).values())o.push(k._destroy());y(this,x).clear(),y(this,g).clear(),this.hasOwnProperty("annotationStorage")&&this.annotationStorage.resetModified();const d=this.messageHandler.sendWithPromise("Terminate",null);return o.push(d),Promise.all(o).then(()=>{this.commonObjs.clear(),this.fontLoader.clear(),y(this,T).clear(),this.filterFactory.destroy(),this._networkStream&&this._networkStream.cancelAllRequests(new _util.AbortException("Worker was terminated.")),this.messageHandler&&(this.messageHandler.destroy(),this.messageHandler=null),this.destroyCapability.resolve()},this.destroyCapability.reject),this.destroyCapability.promise}setupMessageHandler(){const{messageHandler:o,loadingTask:d}=this;o.on("GetReader",(k,n)=>{(0,_util.assert)(this._networkStream,"GetReader - no `IPDFStream` instance available."),this._fullReader=this._networkStream.getFullReader(),this._fullReader.onProgress=j=>{this._lastProgress={loaded:j.loaded,total:j.total}},n.onPull=()=>{this._fullReader.read().then(function({value:j,done:$}){if($){n.close();return}(0,_util.assert)(j instanceof ArrayBuffer,"GetReader - expected an ArrayBuffer."),n.enqueue(new Uint8Array(j),1,[j])}).catch(j=>{n.error(j)})},n.onCancel=j=>{this._fullReader.cancel(j),n.ready.catch($=>{if(!this.destroyed)throw $})}}),o.on("ReaderHeadersReady",k=>{const n=new _util.PromiseCapability,j=this._fullReader;return j.headersReady.then(()=>{var $;(!j.isStreamingSupported||!j.isRangeSupported)&&(this._lastProgress&&(($=d.onProgress)==null||$.call(d,this._lastProgress)),j.onProgress=Y=>{var Q;(Q=d.onProgress)==null||Q.call(d,{loaded:Y.loaded,total:Y.total})}),n.resolve({isStreamingSupported:j.isStreamingSupported,isRangeSupported:j.isRangeSupported,contentLength:j.contentLength})},n.reject),n.promise}),o.on("GetRangeReader",(k,n)=>{(0,_util.assert)(this._networkStream,"GetRangeReader - no `IPDFStream` instance available.");const j=this._networkStream.getRangeReader(k.begin,k.end);if(!j){n.close();return}n.onPull=()=>{j.read().then(function({value:$,done:Y}){if(Y){n.close();return}(0,_util.assert)($ instanceof ArrayBuffer,"GetRangeReader - expected an ArrayBuffer."),n.enqueue(new Uint8Array($),1,[$])}).catch($=>{n.error($)})},n.onCancel=$=>{j.cancel($),n.ready.catch(Y=>{if(!this.destroyed)throw Y})}}),o.on("GetDoc",({pdfInfo:k})=>{this._numPages=k.numPages,this._htmlForXfa=k.htmlForXfa,delete k.htmlForXfa,d._capability.resolve(new PDFDocumentProxy(k,this))}),o.on("DocException",function(k){let n;switch(k.name){case"PasswordException":n=new _util.PasswordException(k.message,k.code);break;case"InvalidPDFException":n=new _util.InvalidPDFException(k.message);break;case"MissingPDFException":n=new _util.MissingPDFException(k.message);break;case"UnexpectedResponseException":n=new _util.UnexpectedResponseException(k.message,k.status);break;case"UnknownErrorException":n=new _util.UnknownErrorException(k.message,k.details);break;default:(0,_util.unreachable)("DocException - expected a valid Error.")}d._capability.reject(n)}),o.on("PasswordRequest",k=>{if(this._passwordCapability=new _util.PromiseCapability,d.onPassword){const n=j=>{j instanceof Error?this._passwordCapability.reject(j):this._passwordCapability.resolve({password:j})};try{d.onPassword(n,k.code)}catch(j){this._passwordCapability.reject(j)}}else this._passwordCapability.reject(new _util.PasswordException(k.message,k.code));return this._passwordCapability.promise}),o.on("DataLoaded",k=>{var n;(n=d.onProgress)==null||n.call(d,{loaded:k.length,total:k.length}),this.downloadInfoCapability.resolve(k)}),o.on("StartRenderPage",k=>{if(this.destroyed)return;y(this,x).get(k.pageIndex)._startRenderPage(k.transparency,k.cacheKey)}),o.on("commonobj",([k,n,j])=>{var $;if(!this.destroyed&&!this.commonObjs.has(k))switch(n){case"Font":const Y=this._params;if("error"in j){const ut=j.error;(0,_util.warn)(`Error during font loading: ${ut}`),this.commonObjs.resolve(k,ut);break}const Q=Y.pdfBug&&(($=globalThis.FontInspector)!=null&&$.enabled)?(ut,lt)=>globalThis.FontInspector.fontAdded(ut,lt):null,et=new _font_loader.FontFaceObject(j,{isEvalSupported:Y.isEvalSupported,disableFontFace:Y.disableFontFace,ignoreErrors:Y.ignoreErrors,inspectFont:Q});this.fontLoader.bind(et).catch(ut=>o.sendWithPromise("FontFallback",{id:k})).finally(()=>{!Y.fontExtraProperties&&et.data&&(et.data=null),this.commonObjs.resolve(k,et)});break;case"FontPath":case"Image":case"Pattern":this.commonObjs.resolve(k,j);break;default:throw new Error(`Got unknown common object type ${n}`)}}),o.on("obj",([k,n,j,$])=>{var Q;if(this.destroyed)return;const Y=y(this,x).get(n);if(!Y.objs.has(k))switch(j){case"Image":if(Y.objs.resolve(k,$),$){let et;if($.bitmap){const{width:ut,height:lt}=$;et=ut*lt*4}else et=((Q=$.data)==null?void 0:Q.length)||0;et>_util.MAX_IMAGE_SIZE_TO_CACHE&&(Y._maybeCleanupAfterRender=!0)}break;case"Pattern":Y.objs.resolve(k,$);break;default:throw new Error(`Got unknown object type ${j}`)}}),o.on("DocProgress",k=>{var n;this.destroyed||(n=d.onProgress)==null||n.call(d,{loaded:k.loaded,total:k.total})}),o.on("FetchBuiltInCMap",k=>this.destroyed?Promise.reject(new Error("Worker was destroyed.")):this.cMapReaderFactory?this.cMapReaderFactory.fetch(k):Promise.reject(new Error("CMapReaderFactory not initialized, see the `useWorkerFetch` parameter."))),o.on("FetchStandardFontData",k=>this.destroyed?Promise.reject(new Error("Worker was destroyed.")):this.standardFontDataFactory?this.standardFontDataFactory.fetch(k):Promise.reject(new Error("StandardFontDataFactory not initialized, see the `useWorkerFetch` parameter.")))}getData(){return this.messageHandler.sendWithPromise("GetData",null)}saveDocument(){var o;return this.annotationStorage.size<=0&&(0,_util.warn)("saveDocument called while `annotationStorage` is empty, please use the getData-method instead."),this.messageHandler.sendWithPromise("SaveDocument",{isPureXfa:!!this._htmlForXfa,numPages:this._numPages,annotationStorage:this.annotationStorage.serializable,filename:((o=this._fullReader)==null?void 0:o.filename)??null}).finally(()=>{this.annotationStorage.resetModified()})}getPage(o){if(!Number.isInteger(o)||o<=0||o>this._numPages)return Promise.reject(new Error("Invalid page request."));const d=o-1,k=y(this,g).get(d);if(k)return k;const n=this.messageHandler.sendWithPromise("GetPage",{pageIndex:d}).then(j=>{if(this.destroyed)throw new Error("Transport destroyed");const $=new PDFPageProxy(d,j,this,this._params.pdfBug);return y(this,x).set(d,$),$});return y(this,g).set(d,n),n}getPageIndex(o){return typeof o!="object"||o===null||!Number.isInteger(o.num)||o.num<0||!Number.isInteger(o.gen)||o.gen<0?Promise.reject(new Error("Invalid pageIndex request.")):this.messageHandler.sendWithPromise("GetPageIndex",{num:o.num,gen:o.gen})}getAnnotations(o,d){return this.messageHandler.sendWithPromise("GetAnnotations",{pageIndex:o,intent:d})}getFieldObjects(){return it(this,f,fe).call(this,"GetFieldObjects")}hasJSActions(){return it(this,f,fe).call(this,"HasJSActions")}getCalculationOrderIds(){return this.messageHandler.sendWithPromise("GetCalculationOrderIds",null)}getDestinations(){return this.messageHandler.sendWithPromise("GetDestinations",null)}getDestination(o){return typeof o!="string"?Promise.reject(new Error("Invalid destination request.")):this.messageHandler.sendWithPromise("GetDestination",{id:o})}getPageLabels(){return this.messageHandler.sendWithPromise("GetPageLabels",null)}getPageLayout(){return this.messageHandler.sendWithPromise("GetPageLayout",null)}getPageMode(){return this.messageHandler.sendWithPromise("GetPageMode",null)}getViewerPreferences(){return this.messageHandler.sendWithPromise("GetViewerPreferences",null)}getOpenAction(){return this.messageHandler.sendWithPromise("GetOpenAction",null)}getAttachments(){return this.messageHandler.sendWithPromise("GetAttachments",null)}getJavaScript(){return this.messageHandler.sendWithPromise("GetJavaScript",null)}getDocJSActions(){return this.messageHandler.sendWithPromise("GetDocJSActions",null)}getPageJSActions(o){return this.messageHandler.sendWithPromise("GetPageJSActions",{pageIndex:o})}getStructTree(o){return this.messageHandler.sendWithPromise("GetStructTree",{pageIndex:o})}getOutline(){return this.messageHandler.sendWithPromise("GetOutline",null)}getOptionalContentConfig(){return this.messageHandler.sendWithPromise("GetOptionalContentConfig",null).then(o=>new _optional_content_config.OptionalContentConfig(o))}getPermissions(){return this.messageHandler.sendWithPromise("GetPermissions",null)}getMetadata(){const o="GetMetadata",d=y(this,T).get(o);if(d)return d;const k=this.messageHandler.sendWithPromise(o,null).then(n=>{var j,$;return{info:n[0],metadata:n[1]?new _metadata.Metadata(n[1]):null,contentDispositionFilename:((j=this._fullReader)==null?void 0:j.filename)??null,contentLength:(($=this._fullReader)==null?void 0:$.contentLength)??null}});return y(this,T).set(o,k),k}getMarkInfo(){return this.messageHandler.sendWithPromise("GetMarkInfo",null)}async startCleanup(o=!1){if(!this.destroyed){await this.messageHandler.sendWithPromise("Cleanup",null);for(const d of y(this,x).values())if(!d.cleanup())throw new Error(`startCleanup: Page ${d.pageNumber} is currently rendering.`);this.commonObjs.clear(),o||this.fontLoader.clear(),y(this,T).clear(),this.filterFactory.destroy(!0)}}get loadingParams(){const{disableAutoFetch:o,enableXfa:d}=this._params;return(0,_util.shadow)(this,"loadingParams",{disableAutoFetch:o,enableXfa:d})}}T=new WeakMap,x=new WeakMap,g=new WeakMap,f=new WeakSet,fe=function(o,d=null){const k=y(this,T).get(o);if(k)return k;const n=this.messageHandler.sendWithPromise(o,d);return y(this,T).set(o,n),n};class PDFObjects{constructor(){tt(this,S);tt(this,A,Object.create(null))}get(o,d=null){if(d){const n=it(this,S,pe).call(this,o);return n.capability.promise.then(()=>d(n.data)),null}const k=y(this,A)[o];if(!(k!=null&&k.capability.settled))throw new Error(`Requesting object that isn't resolved yet ${o}.`);return k.data}has(o){const d=y(this,A)[o];return(d==null?void 0:d.capability.settled)||!1}resolve(o,d=null){const k=it(this,S,pe).call(this,o);k.data=d,k.capability.resolve()}clear(){var o;for(const d in y(this,A)){const{data:k}=y(this,A)[d];(o=k==null?void 0:k.bitmap)==null||o.close()}gt(this,A,Object.create(null))}}A=new WeakMap,S=new WeakSet,pe=function(o){const d=y(this,A)[o];return d||(y(this,A)[o]={capability:new _util.PromiseCapability,data:null})};class RenderTask{constructor(o){tt(this,m,null);gt(this,m,o),this.onContinue=null}get promise(){return y(this,m).capability.promise}cancel(o=0){y(this,m).cancel(null,o)}get separateAnnots(){const{separateAnnots:o}=y(this,m).operatorList;if(!o)return!1;const{annotationCanvasMap:d}=y(this,m);return o.form||o.canvas&&(d==null?void 0:d.size)>0}}m=new WeakMap,exports.RenderTask=RenderTask;const a=class{constructor({callback:o,params:d,objs:k,commonObjs:n,annotationCanvasMap:j,operatorList:$,pageIndex:Y,canvasFactory:Q,filterFactory:et,useRequestAnimationFrame:ut=!1,pdfBug:lt=!1,pageColors:ht=null}){this.callback=o,this.params=d,this.objs=k,this.commonObjs=n,this.annotationCanvasMap=j,this.operatorListIdx=null,this.operatorList=$,this._pageIndex=Y,this.canvasFactory=Q,this.filterFactory=et,this._pdfBug=lt,this.pageColors=ht,this.running=!1,this.graphicsReadyCallback=null,this.graphicsReady=!1,this._useRequestAnimationFrame=ut===!0&&typeof window<"u",this.cancelled=!1,this.capability=new _util.PromiseCapability,this.task=new RenderTask(this),this._cancelBound=this.cancel.bind(this),this._continueBound=this._continue.bind(this),this._scheduleNextBound=this._scheduleNext.bind(this),this._nextBound=this._next.bind(this),this._canvas=d.canvasContext.canvas}get completed(){return this.capability.promise.catch(function(){})}initializeGraphics({transparency:o=!1,optionalContentConfig:d}){var Y,Q;if(this.cancelled)return;if(this._canvas){if(y(a,e).has(this._canvas))throw new Error("Cannot use the same canvas during multiple render() operations. Use different canvas or ensure previous operations were cancelled or completed.");y(a,e).add(this._canvas)}this._pdfBug&&((Y=globalThis.StepperManager)!=null&&Y.enabled)&&(this.stepper=globalThis.StepperManager.create(this._pageIndex),this.stepper.init(this.operatorList),this.stepper.nextBreakPoint=this.stepper.getNextBreakPoint());const{canvasContext:k,viewport:n,transform:j,background:$}=this.params;this.gfx=new _canvas.CanvasGraphics(k,this.commonObjs,this.objs,this.canvasFactory,this.filterFactory,{optionalContentConfig:d},this.annotationCanvasMap,this.pageColors),this.gfx.beginDrawing({transform:j,viewport:n,transparency:o,background:$}),this.operatorListIdx=0,this.graphicsReady=!0,(Q=this.graphicsReadyCallback)==null||Q.call(this)}cancel(o=null,d=0){var k;this.running=!1,this.cancelled=!0,(k=this.gfx)==null||k.endDrawing(),this._canvas&&y(a,e).delete(this._canvas),this.callback(o||new _display_utils.RenderingCancelledException(`Rendering cancelled, page ${this._pageIndex+1}`,"canvas",d))}operatorListChanged(){var o;if(!this.graphicsReady){this.graphicsReadyCallback||(this.graphicsReadyCallback=this._continueBound);return}(o=this.stepper)==null||o.updateOperatorList(this.operatorList),!this.running&&this._continue()}_continue(){this.running=!0,!this.cancelled&&(this.task.onContinue?this.task.onContinue(this._scheduleNextBound):this._scheduleNext())}_scheduleNext(){this._useRequestAnimationFrame?window.requestAnimationFrame(()=>{this._nextBound().catch(this._cancelBound)}):Promise.resolve().then(this._nextBound).catch(this._cancelBound)}async _next(){this.cancelled||(this.operatorListIdx=this.gfx.executeOperatorList(this.operatorList,this.operatorListIdx,this._continueBound,this.stepper),this.operatorListIdx===this.operatorList.argsArray.length&&(this.running=!1,this.operatorList.lastChunk&&(this.gfx.endDrawing(this.pageColors),this._canvas&&y(a,e).delete(this._canvas),this.callback())))}};let InternalRenderTask=a;e=new WeakMap,tt(InternalRenderTask,e,new WeakSet);const version="3.6.172";exports.version=version;const build="4d3dfe254";exports.build=build},(B,i,U)=>{var L,F,v,Le,T;Object.defineProperty(i,"__esModule",{value:!0}),i.PrintAnnotationStorage=i.AnnotationStorage=void 0;var h=U(1),_=U(4),W=U(8);class q{constructor(){tt(this,v);tt(this,L,!1);tt(this,F,new Map);this.onSetModified=null,this.onResetModified=null,this.onAnnotationEditor=null}getValue(g,f){const l=y(this,F).get(g);return l===void 0?f:Object.assign(f,l)}getRawValue(g){return y(this,F).get(g)}remove(g){if(y(this,F).delete(g),y(this,F).size===0&&this.resetModified(),typeof this.onAnnotationEditor=="function"){for(const f of y(this,F).values())if(f instanceof _.AnnotationEditor)return;this.onAnnotationEditor(null)}}setValue(g,f){const l=y(this,F).get(g);let A=!1;if(l!==void 0)for(const[S,w]of Object.entries(f))l[S]!==w&&(A=!0,l[S]=w);else A=!0,y(this,F).set(g,f);A&&it(this,v,Le).call(this),f instanceof _.AnnotationEditor&&typeof this.onAnnotationEditor=="function"&&this.onAnnotationEditor(f.constructor._type)}has(g){return y(this,F).has(g)}getAll(){return y(this,F).size>0?(0,h.objectFromMap)(y(this,F)):null}setAll(g){for(const[f,l]of Object.entries(g))this.setValue(f,l)}get size(){return y(this,F).size}resetModified(){y(this,L)&&(gt(this,L,!1),typeof this.onResetModified=="function"&&this.onResetModified())}get print(){return new Z(this)}get serializable(){if(y(this,F).size===0)return null;const g=new Map;for(const[f,l]of y(this,F)){const A=l instanceof _.AnnotationEditor?l.serialize():l;A&&g.set(f,A)}return g}static getHash(g){if(!g)return"";const f=new W.MurmurHash3_64;for(const[l,A]of g)f.update(`${l}:${JSON.stringify(A)}`);return f.hexdigest()}}L=new WeakMap,F=new WeakMap,v=new WeakSet,Le=function(){y(this,L)||(gt(this,L,!0),typeof this.onSetModified=="function"&&this.onSetModified())},i.AnnotationStorage=q;class Z extends q{constructor(f){super();tt(this,T,null);gt(this,T,structuredClone(f.serializable))}get print(){(0,h.unreachable)("Should not call PrintAnnotationStorage.print")}get serializable(){return y(this,T)}}T=new WeakMap,i.PrintAnnotationStorage=Z},(B,i,U)=>{var q,Z,L,F,v,N;Object.defineProperty(i,"__esModule",{value:!0}),i.AnnotationEditor=void 0;var h=U(5),_=U(1);const T=class{constructor(g){tt(this,q,this.focusin.bind(this));tt(this,Z,this.focusout.bind(this));tt(this,L,!1);tt(this,F,!1);tt(this,v,!1);Lt(this,"_uiManager",null);tt(this,N,T._zIndex++);this.constructor===T&&(0,_.unreachable)("Cannot initialize AnnotationEditor."),this.parent=g.parent,this.id=g.id,this.width=this.height=null,this.pageIndex=g.parent.pageIndex,this.name=g.name,this.div=null,this._uiManager=g.uiManager;const{rotation:f,rawDims:{pageWidth:l,pageHeight:A,pageX:S,pageY:w}}=this.parent.viewport;this.rotation=f,this.pageRotation=(360+f-this._uiManager.viewParameters.rotation)%360,this.pageDimensions=[l,A],this.pageTranslation=[S,w];const[m,e]=this.parentDimensions;this.x=g.x/m,this.y=g.y/e,this.isAttachedToDOM=!1}static get _defaultLineColor(){return(0,_.shadow)(this,"_defaultLineColor",this._colorManager.getHexCode("CanvasText"))}addCommands(g){this._uiManager.addCommands(g)}get currentLayer(){return this._uiManager.currentLayer}setInBackground(){this.div.style.zIndex=0}setInForeground(){this.div.style.zIndex=y(this,N)}setParent(g){g!==null&&(this.pageIndex=g.pageIndex,this.pageDimensions=g.pageDimensions),this.parent=g}focusin(g){y(this,L)?gt(this,L,!1):this.parent.setSelected(this)}focusout(g){var l;if(!this.isAttachedToDOM)return;const f=g.relatedTarget;f!=null&&f.closest(`#${this.id}`)||(g.preventDefault(),(l=this.parent)!=null&&l.isMultipleSelection||this.commitOrRemove())}commitOrRemove(){this.isEmpty()?this.remove():this.commit()}commit(){this.addToAnnotationStorage()}addToAnnotationStorage(){this._uiManager.addToAnnotationStorage(this)}dragstart(g){const f=this.parent.div.getBoundingClientRect();this.startX=g.clientX-f.x,this.startY=g.clientY-f.y,g.dataTransfer.setData("text/plain",this.id),g.dataTransfer.effectAllowed="move"}setAt(g,f,l,A){const[S,w]=this.parentDimensions;[l,A]=this.screenToPageTranslation(l,A),this.x=(g+l)/S,this.y=(f+A)/w,this.div.style.left=`${100*this.x}%`,this.div.style.top=`${100*this.y}%`}translate(g,f){const[l,A]=this.parentDimensions;[g,f]=this.screenToPageTranslation(g,f),this.x+=g/l,this.y+=f/A,this.div.style.left=`${100*this.x}%`,this.div.style.top=`${100*this.y}%`}screenToPageTranslation(g,f){switch(this.parentRotation){case 90:return[f,-g];case 180:return[-g,-f];case 270:return[-f,g];default:return[g,f]}}get parentScale(){return this._uiManager.viewParameters.realScale}get parentRotation(){return(this._uiManager.viewParameters.rotation+this.pageRotation)%360}get parentDimensions(){const{realScale:g}=this._uiManager.viewParameters,[f,l]=this.pageDimensions;return[f*g,l*g]}setDims(g,f){const[l,A]=this.parentDimensions;this.div.style.width=`${100*g/l}%`,this.div.style.height=`${100*f/A}%`}fixDims(){const{style:g}=this.div,{height:f,width:l}=g,A=l.endsWith("%"),S=f.endsWith("%");if(A&&S)return;const[w,m]=this.parentDimensions;A||(g.width=`${100*parseFloat(l)/w}%`),S||(g.height=`${100*parseFloat(f)/m}%`)}getInitialTranslation(){return[0,0]}render(){this.div=document.createElement("div"),this.div.setAttribute("data-editor-rotation",(360-this.rotation)%360),this.div.className=this.name,this.div.setAttribute("id",this.id),this.div.setAttribute("tabIndex",0),this.setInForeground(),this.div.addEventListener("focusin",y(this,q)),this.div.addEventListener("focusout",y(this,Z));const[g,f]=this.getInitialTranslation();return this.translate(g,f),(0,h.bindEvents)(this,this.div,["dragstart","pointerdown"]),this.div}pointerdown(g){const{isMac:f}=_.FeatureTest.platform;if(g.button!==0||g.ctrlKey&&f){g.preventDefault();return}g.ctrlKey&&!f||g.shiftKey||g.metaKey&&f?this.parent.toggleSelected(this):this.parent.setSelected(this),gt(this,L,!0)}getRect(g,f){const l=this.parentScale,[A,S]=this.pageDimensions,[w,m]=this.pageTranslation,e=g/l,a=f/l,c=this.x*A,o=this.y*S,d=this.width*A,k=this.height*S;switch(this.rotation){case 0:return[c+e+w,S-o-a-k+m,c+e+d+w,S-o-a+m];case 90:return[c+a+w,S-o+e+m,c+a+k+w,S-o+e+d+m];case 180:return[c-e-d+w,S-o+a+m,c-e+w,S-o+a+k+m];case 270:return[c-a-k+w,S-o-e-d+m,c-a+w,S-o-e+m];default:throw new Error("Invalid rotation")}}getRectInCurrentCoords(g,f){const[l,A,S,w]=g,m=S-l,e=w-A;switch(this.rotation){case 0:return[l,f-w,m,e];case 90:return[l,f-A,e,m];case 180:return[S,f-A,m,e];case 270:return[S,f-w,e,m];default:throw new Error("Invalid rotation")}}onceAdded(){}isEmpty(){return!1}enableEditMode(){gt(this,v,!0)}disableEditMode(){gt(this,v,!1)}isInEditMode(){return y(this,v)}shouldGetKeyboardEvents(){return!1}needsToBeRebuilt(){return this.div&&!this.isAttachedToDOM}rebuild(){var g;(g=this.div)==null||g.addEventListener("focusin",y(this,q))}serialize(){(0,_.unreachable)("An editor must be serializable")}static deserialize(g,f,l){const A=new this.prototype.constructor({parent:f,id:f.getNextId(),uiManager:l});A.rotation=g.rotation;const[S,w]=A.pageDimensions,[m,e,a,c]=A.getRectInCurrentCoords(g.rect,w);return A.x=m/S,A.y=e/w,A.width=a/S,A.height=c/w,A}remove(){this.div.removeEventListener("focusin",y(this,q)),this.div.removeEventListener("focusout",y(this,Z)),this.isEmpty()||this.commit(),this.parent.remove(this)}select(){var g;(g=this.div)==null||g.classList.add("selectedEditor")}unselect(){var g;(g=this.div)==null||g.classList.remove("selectedEditor")}updateParams(g,f){}disableEditing(){}enableEditing(){}get propertiesToUpdate(){return{}}get contentDiv(){return this.div}get isEditing(){return y(this,F)}set isEditing(g){gt(this,F,g),g?(this.parent.setSelected(this),this.parent.setActiveEditor(this)):this.parent.setActiveEditor(null)}};let W=T;q=new WeakMap,Z=new WeakMap,L=new WeakMap,F=new WeakMap,v=new WeakMap,N=new WeakMap,Lt(W,"_colorManager",new h.ColorManager),Lt(W,"_zIndex",1),i.AnnotationEditor=W},(B,i,U)=>{var T,x,g,f,l,A,Ie,m,e,a,c,o,d,k,n,j,$,Y,Q,et,ut,lt,ht,mt,_t,St,At,X,u,p,P,Ne,O,ge,G,je,D,Be,s,Ht,E,ee,V,Ue,J,Ge,ot,me,at,ne,pt,be;Object.defineProperty(i,"__esModule",{value:!0}),i.KeyboardManager=i.CommandManager=i.ColorManager=i.AnnotationEditorUIManager=void 0,i.bindEvents=W,i.opacityToHex=q;var h=U(1),_=U(6);function W(Pt,K,yt){for(const Et of yt)K.addEventListener(Et,Pt[Et].bind(Pt))}function q(Pt){return Math.round(Math.min(255,Math.max(1,255*Pt))).toString(16).padStart(2,"0")}class Z{constructor(){tt(this,T,0)}getId(){return`${h.AnnotationEditorPrefix}${re(this,T)._++}`}}T=new WeakMap;class L{constructor(K=128){tt(this,x,[]);tt(this,g,!1);tt(this,f,void 0);tt(this,l,-1);gt(this,f,K)}add({cmd:K,undo:yt,mustExec:Et,type:Mt=NaN,overwriteIfSameType:dt=!1,keepUndo:R=!1}){if(Et&&K(),y(this,g))return;const I={cmd:K,undo:yt,type:Mt};if(y(this,l)===-1){y(this,x).length>0&&(y(this,x).length=0),gt(this,l,0),y(this,x).push(I);return}if(dt&&y(this,x)[y(this,l)].type===Mt){R&&(I.undo=y(this,x)[y(this,l)].undo),y(this,x)[y(this,l)]=I;return}const ct=y(this,l)+1;ct===y(this,f)?y(this,x).splice(0,1):(gt(this,l,ct),ct<y(this,x).length&&y(this,x).splice(ct)),y(this,x).push(I)}undo(){y(this,l)!==-1&&(gt(this,g,!0),y(this,x)[y(this,l)].undo(),gt(this,g,!1),gt(this,l,y(this,l)-1))}redo(){y(this,l)<y(this,x).length-1&&(gt(this,l,y(this,l)+1),gt(this,g,!0),y(this,x)[y(this,l)].cmd(),gt(this,g,!1))}hasSomethingToUndo(){return y(this,l)!==-1}hasSomethingToRedo(){return y(this,l)<y(this,x).length-1}destroy(){gt(this,x,null)}}x=new WeakMap,g=new WeakMap,f=new WeakMap,l=new WeakMap,i.CommandManager=L;class F{constructor(K){tt(this,A);this.buffer=[],this.callbacks=new Map,this.allKeys=new Set;const{isMac:yt}=h.FeatureTest.platform;for(const[Et,Mt]of K)for(const dt of Et){const R=dt.startsWith("mac+");yt&&R?(this.callbacks.set(dt.slice(4),Mt),this.allKeys.add(dt.split("+").at(-1))):!yt&&!R&&(this.callbacks.set(dt,Mt),this.allKeys.add(dt.split("+").at(-1)))}}exec(K,yt){if(!this.allKeys.has(yt.key))return;const Et=this.callbacks.get(it(this,A,Ie).call(this,yt));Et&&(Et.bind(K)(),yt.stopPropagation(),yt.preventDefault())}}A=new WeakSet,Ie=function(K){K.altKey&&this.buffer.push("alt"),K.ctrlKey&&this.buffer.push("ctrl"),K.metaKey&&this.buffer.push("meta"),K.shiftKey&&this.buffer.push("shift"),this.buffer.push(K.key);const yt=this.buffer.join("+");return this.buffer.length=0,yt},i.KeyboardManager=F;const w=class{get _colors(){const K=new Map([["CanvasText",null],["Canvas",null]]);return(0,_.getColorValues)(K),(0,h.shadow)(this,"_colors",K)}convert(K){const yt=(0,_.getRGB)(K);if(!window.matchMedia("(forced-colors: active)").matches)return yt;for(const[Et,Mt]of this._colors)if(Mt.every((dt,R)=>dt===yt[R]))return w._colorsMapping.get(Et);return yt}getHexCode(K){const yt=this._colors.get(K);return yt?h.Util.makeHexColor(...yt):K}};let v=w;Lt(v,"_colorsMapping",new Map([["CanvasText",[0,0,0]],["Canvas",[255,255,255]]])),i.ColorManager=v;const vt=class{constructor(K,yt,Et){tt(this,P);tt(this,O);tt(this,G);tt(this,D);tt(this,s);tt(this,E);tt(this,V);tt(this,J);tt(this,ot);tt(this,at);tt(this,pt);tt(this,m,null);tt(this,e,new Map);tt(this,a,new Map);tt(this,c,null);tt(this,o,new L);tt(this,d,0);tt(this,k,null);tt(this,n,new Set);tt(this,j,null);tt(this,$,new Z);tt(this,Y,!1);tt(this,Q,h.AnnotationEditorType.NONE);tt(this,et,new Set);tt(this,ut,this.copy.bind(this));tt(this,lt,this.cut.bind(this));tt(this,ht,this.paste.bind(this));tt(this,mt,this.keydown.bind(this));tt(this,_t,this.onEditingAction.bind(this));tt(this,St,this.onPageChanging.bind(this));tt(this,At,this.onScaleChanging.bind(this));tt(this,X,this.onRotationChanging.bind(this));tt(this,u,{isEditing:!1,isEmpty:!0,hasSomethingToUndo:!1,hasSomethingToRedo:!1,hasSelectedEditor:!1});tt(this,p,null);gt(this,p,K),gt(this,j,yt),y(this,j)._on("editingaction",y(this,_t)),y(this,j)._on("pagechanging",y(this,St)),y(this,j)._on("scalechanging",y(this,At)),y(this,j)._on("rotationchanging",y(this,X)),gt(this,c,Et),this.viewParameters={realScale:_.PixelsPerInch.PDF_TO_CSS_UNITS,rotation:0}}destroy(){it(this,O,ge).call(this),y(this,j)._off("editingaction",y(this,_t)),y(this,j)._off("pagechanging",y(this,St)),y(this,j)._off("scalechanging",y(this,At)),y(this,j)._off("rotationchanging",y(this,X));for(const K of y(this,a).values())K.destroy();y(this,a).clear(),y(this,e).clear(),y(this,n).clear(),gt(this,m,null),y(this,et).clear(),y(this,o).destroy()}onPageChanging({pageNumber:K}){gt(this,d,K-1)}focusMainContainer(){y(this,p).focus()}addShouldRescale(K){y(this,n).add(K)}removeShouldRescale(K){y(this,n).delete(K)}onScaleChanging({scale:K}){this.commitOrRemove(),this.viewParameters.realScale=K*_.PixelsPerInch.PDF_TO_CSS_UNITS;for(const yt of y(this,n))yt.onScaleChanging()}onRotationChanging({pagesRotation:K}){this.commitOrRemove(),this.viewParameters.rotation=K}addToAnnotationStorage(K){!K.isEmpty()&&y(this,c)&&!y(this,c).has(K.id)&&y(this,c).setValue(K.id,K)}copy(K){if(K.preventDefault(),y(this,m)&&y(this,m).commitOrRemove(),!this.hasSelection)return;const yt=[];for(const Et of y(this,et))Et.isEmpty()||yt.push(Et.serialize());yt.length!==0&&K.clipboardData.setData("application/pdfjs",JSON.stringify(yt))}cut(K){this.copy(K),this.delete()}paste(K){K.preventDefault();let yt=K.clipboardData.getData("application/pdfjs");if(!yt)return;try{yt=JSON.parse(yt)}catch(Mt){(0,h.warn)(`paste: "${Mt.message}".`);return}if(!Array.isArray(yt))return;this.unselectAll();const Et=y(this,a).get(y(this,d));try{const Mt=[];for(const I of yt){const ct=Et.deserialize(I);if(!ct)return;Mt.push(ct)}const dt=()=>{for(const I of Mt)it(this,ot,me).call(this,I);it(this,pt,be).call(this,Mt)},R=()=>{for(const I of Mt)I.remove()};this.addCommands({cmd:dt,undo:R,mustExec:!0})}catch(Mt){(0,h.warn)(`paste: "${Mt.message}".`)}}keydown(K){var yt;(yt=this.getActive())!=null&&yt.shouldGetKeyboardEvents()||vt._keyboardManager.exec(this,K)}onEditingAction(K){["undo","redo","delete","selectAll"].includes(K.name)&&this[K.name]()}setEditingState(K){K?(it(this,P,Ne).call(this),it(this,G,je).call(this),it(this,s,Ht).call(this,{isEditing:y(this,Q)!==h.AnnotationEditorType.NONE,isEmpty:it(this,at,ne).call(this),hasSomethingToUndo:y(this,o).hasSomethingToUndo(),hasSomethingToRedo:y(this,o).hasSomethingToRedo(),hasSelectedEditor:!1})):(it(this,O,ge).call(this),it(this,D,Be).call(this),it(this,s,Ht).call(this,{isEditing:!1}))}registerEditorTypes(K){if(!y(this,k)){gt(this,k,K);for(const yt of y(this,k))it(this,E,ee).call(this,yt.defaultPropertiesToUpdate)}}getId(){return y(this,$).getId()}get currentLayer(){return y(this,a).get(y(this,d))}get currentPageIndex(){return y(this,d)}addLayer(K){y(this,a).set(K.pageIndex,K),y(this,Y)?K.enable():K.disable()}removeLayer(K){y(this,a).delete(K.pageIndex)}updateMode(K){if(gt(this,Q,K),K===h.AnnotationEditorType.NONE)this.setEditingState(!1),it(this,J,Ge).call(this);else{this.setEditingState(!0),it(this,V,Ue).call(this);for(const yt of y(this,a).values())yt.updateMode(K)}}updateToolbar(K){K!==y(this,Q)&&y(this,j).dispatch("switchannotationeditormode",{source:this,mode:K})}updateParams(K,yt){if(y(this,k)){for(const Et of y(this,et))Et.updateParams(K,yt);for(const Et of y(this,k))Et.updateDefaultParams(K,yt)}}getEditors(K){const yt=[];for(const Et of y(this,e).values())Et.pageIndex===K&&yt.push(Et);return yt}getEditor(K){return y(this,e).get(K)}addEditor(K){y(this,e).set(K.id,K)}removeEditor(K){var yt;y(this,e).delete(K.id),this.unselect(K),(yt=y(this,c))==null||yt.remove(K.id)}setActiveEditor(K){y(this,m)!==K&&(gt(this,m,K),K&&it(this,E,ee).call(this,K.propertiesToUpdate))}toggleSelected(K){if(y(this,et).has(K)){y(this,et).delete(K),K.unselect(),it(this,s,Ht).call(this,{hasSelectedEditor:this.hasSelection});return}y(this,et).add(K),K.select(),it(this,E,ee).call(this,K.propertiesToUpdate),it(this,s,Ht).call(this,{hasSelectedEditor:!0})}setSelected(K){for(const yt of y(this,et))yt!==K&&yt.unselect();y(this,et).clear(),y(this,et).add(K),K.select(),it(this,E,ee).call(this,K.propertiesToUpdate),it(this,s,Ht).call(this,{hasSelectedEditor:!0})}isSelected(K){return y(this,et).has(K)}unselect(K){K.unselect(),y(this,et).delete(K),it(this,s,Ht).call(this,{hasSelectedEditor:this.hasSelection})}get hasSelection(){return y(this,et).size!==0}undo(){y(this,o).undo(),it(this,s,Ht).call(this,{hasSomethingToUndo:y(this,o).hasSomethingToUndo(),hasSomethingToRedo:!0,isEmpty:it(this,at,ne).call(this)})}redo(){y(this,o).redo(),it(this,s,Ht).call(this,{hasSomethingToUndo:!0,hasSomethingToRedo:y(this,o).hasSomethingToRedo(),isEmpty:it(this,at,ne).call(this)})}addCommands(K){y(this,o).add(K),it(this,s,Ht).call(this,{hasSomethingToUndo:!0,hasSomethingToRedo:!1,isEmpty:it(this,at,ne).call(this)})}delete(){if(this.commitOrRemove(),!this.hasSelection)return;const K=[...y(this,et)],yt=()=>{for(const Mt of K)Mt.remove()},Et=()=>{for(const Mt of K)it(this,ot,me).call(this,Mt)};this.addCommands({cmd:yt,undo:Et,mustExec:!0})}commitOrRemove(){var K;(K=y(this,m))==null||K.commitOrRemove()}selectAll(){for(const K of y(this,et))K.commit();it(this,pt,be).call(this,y(this,e).values())}unselectAll(){if(y(this,m)){y(this,m).commitOrRemove();return}if(y(this,et).size!==0){for(const K of y(this,et))K.unselect();y(this,et).clear(),it(this,s,Ht).call(this,{hasSelectedEditor:!1})}}isActive(K){return y(this,m)===K}getActive(){return y(this,m)}getMode(){return y(this,Q)}};let N=vt;m=new WeakMap,e=new WeakMap,a=new WeakMap,c=new WeakMap,o=new WeakMap,d=new WeakMap,k=new WeakMap,n=new WeakMap,j=new WeakMap,$=new WeakMap,Y=new WeakMap,Q=new WeakMap,et=new WeakMap,ut=new WeakMap,lt=new WeakMap,ht=new WeakMap,mt=new WeakMap,_t=new WeakMap,St=new WeakMap,At=new WeakMap,X=new WeakMap,u=new WeakMap,p=new WeakMap,P=new WeakSet,Ne=function(){y(this,p).addEventListener("keydown",y(this,mt))},O=new WeakSet,ge=function(){y(this,p).removeEventListener("keydown",y(this,mt))},G=new WeakSet,je=function(){document.addEventListener("copy",y(this,ut)),document.addEventListener("cut",y(this,lt)),document.addEventListener("paste",y(this,ht))},D=new WeakSet,Be=function(){document.removeEventListener("copy",y(this,ut)),document.removeEventListener("cut",y(this,lt)),document.removeEventListener("paste",y(this,ht))},s=new WeakSet,Ht=function(K){Object.entries(K).some(([Et,Mt])=>y(this,u)[Et]!==Mt)&&y(this,j).dispatch("annotationeditorstateschanged",{source:this,details:Object.assign(y(this,u),K)})},E=new WeakSet,ee=function(K){y(this,j).dispatch("annotationeditorparamschanged",{source:this,details:K})},V=new WeakSet,Ue=function(){if(!y(this,Y)){gt(this,Y,!0);for(const K of y(this,a).values())K.enable()}},J=new WeakSet,Ge=function(){if(this.unselectAll(),y(this,Y)){gt(this,Y,!1);for(const K of y(this,a).values())K.disable()}},ot=new WeakSet,me=function(K){const yt=y(this,a).get(K.pageIndex);yt?yt.addOrRebuild(K):this.addEditor(K)},at=new WeakSet,ne=function(){if(y(this,e).size===0)return!0;if(y(this,e).size===1)for(const K of y(this,e).values())return K.isEmpty();return!1},pt=new WeakSet,be=function(K){y(this,et).clear();for(const yt of K)yt.isEmpty()||(y(this,et).add(yt),yt.select());it(this,s,Ht).call(this,{hasSelectedEditor:!0})},Lt(N,"_keyboardManager",new F([[["ctrl+a","mac+meta+a"],vt.prototype.selectAll],[["ctrl+z","mac+meta+z"],vt.prototype.undo],[["ctrl+y","ctrl+shift+Z","mac+meta+shift+Z"],vt.prototype.redo],[["Backspace","alt+Backspace","ctrl+Backspace","shift+Backspace","mac+Backspace","mac+alt+Backspace","mac+ctrl+Backspace","Delete","ctrl+Delete","shift+Delete"],vt.prototype.delete],[["Escape","mac+Escape"],vt.prototype.unselectAll]])),i.AnnotationEditorUIManager=N},(B,i,U)=>{var ut,lt,ht,mt,_t,St,At,X,u,Qt,P,Yt,O,$t;Object.defineProperty(i,"__esModule",{value:!0}),i.StatTimer=i.RenderingCancelledException=i.PixelsPerInch=i.PageViewport=i.PDFDateString=i.DOMStandardFontDataFactory=i.DOMSVGFactory=i.DOMFilterFactory=i.DOMCanvasFactory=i.DOMCMapReaderFactory=i.AnnotationPrefix=void 0,i.deprecated=c,i.getColorValues=j,i.getCurrentTransform=$,i.getCurrentTransformInverse=Y,i.getFilenameFromUrl=S,i.getPdfFilenameFromUrl=w,i.getRGB=n,i.getXfaPageViewport=k,i.isDataScheme=l,i.isPdfFile=A,i.isValidFetchUrl=e,i.loadScript=a,i.setLayerDimensions=Q;var h=U(7),_=U(1);const W="http://www.w3.org/2000/svg",q="pdfjs_internal_id_";i.AnnotationPrefix=q;const et=class{};let Z=et;Lt(Z,"CSS",96),Lt(Z,"PDF",72),Lt(Z,"PDF_TO_CSS_UNITS",et.CSS/et.PDF),i.PixelsPerInch=Z;class L extends h.BaseFilterFactory{constructor({docId:D,ownerDocument:t=globalThis.document}={}){super();tt(this,u);tt(this,P);tt(this,O);tt(this,ut,void 0);tt(this,lt,void 0);tt(this,ht,void 0);tt(this,mt,void 0);tt(this,_t,void 0);tt(this,St,void 0);tt(this,At,void 0);tt(this,X,0);gt(this,ht,D),gt(this,mt,t)}addFilter(D){if(!D)return"none";let t=y(this,u,Qt).get(D);if(t)return t;let s,b,E,C;if(D.length===1){const ot=D[0],nt=new Array(256);for(let at=0;at<256;at++)nt[at]=ot[at]/255;C=s=b=E=nt.join(",")}else{const[ot,nt,at]=D,ft=new Array(256),pt=new Array(256),Tt=new Array(256);for(let vt=0;vt<256;vt++)ft[vt]=ot[vt]/255,pt[vt]=nt[vt]/255,Tt[vt]=at[vt]/255;s=ft.join(","),b=pt.join(","),E=Tt.join(","),C=`${s}${b}${E}`}if(t=y(this,u,Qt).get(C),t)return y(this,u,Qt).set(D,t),t;const V=`g_${y(this,ht)}_transfer_map_${re(this,X)._++}`,st=`url(#${V})`;y(this,u,Qt).set(D,st),y(this,u,Qt).set(C,st);const J=y(this,mt).createElementNS(W,"filter",W);J.setAttribute("id",V),J.setAttribute("color-interpolation-filters","sRGB");const rt=y(this,mt).createElementNS(W,"feComponentTransfer");return J.append(rt),it(this,O,$t).call(this,rt,"feFuncR",s),it(this,O,$t).call(this,rt,"feFuncG",b),it(this,O,$t).call(this,rt,"feFuncB",E),y(this,P,Yt).append(J),st}addHCMFilter(D,t){var at;const s=`${D}-${t}`;if(y(this,St)===s)return y(this,At);if(gt(this,St,s),gt(this,At,"none"),(at=y(this,_t))==null||at.remove(),!D||!t)return y(this,At);y(this,P,Yt).style.color=D,D=getComputedStyle(y(this,P,Yt)).getPropertyValue("color");const b=n(D);D=_.Util.makeHexColor(...b),y(this,P,Yt).style.color=t,t=getComputedStyle(y(this,P,Yt)).getPropertyValue("color");const E=n(t);if(t=_.Util.makeHexColor(...E),y(this,P,Yt).style.color="",D==="#000000"&&t==="#ffffff"||D===t)return y(this,At);const C=new Array(256);for(let ft=0;ft<=255;ft++){const pt=ft/255;C[ft]=pt<=.03928?pt/12.92:((pt+.055)/1.055)**2.4}const V=C.join(","),st=`g_${y(this,ht)}_hcm_filter`,J=gt(this,_t,y(this,mt).createElementNS(W,"filter",W));J.setAttribute("id",st),J.setAttribute("color-interpolation-filters","sRGB");let rt=y(this,mt).createElementNS(W,"feComponentTransfer");J.append(rt),it(this,O,$t).call(this,rt,"feFuncR",V),it(this,O,$t).call(this,rt,"feFuncG",V),it(this,O,$t).call(this,rt,"feFuncB",V);const ot=y(this,mt).createElementNS(W,"feColorMatrix");ot.setAttribute("type","matrix"),ot.setAttribute("values","0.2126 0.7152 0.0722 0 0 0.2126 0.7152 0.0722 0 0 0.2126 0.7152 0.0722 0 0 0 0 0 1 0"),J.append(ot),rt=y(this,mt).createElementNS(W,"feComponentTransfer"),J.append(rt);const nt=(ft,pt)=>{const Tt=b[ft]/255,vt=E[ft]/255,Pt=new Array(pt+1);for(let K=0;K<=pt;K++)Pt[K]=Tt+K/pt*(vt-Tt);return Pt.join(",")};return it(this,O,$t).call(this,rt,"feFuncR",nt(0,5)),it(this,O,$t).call(this,rt,"feFuncG",nt(1,5)),it(this,O,$t).call(this,rt,"feFuncB",nt(2,5)),y(this,P,Yt).append(J),gt(this,At,`url(#${st})`),y(this,At)}destroy(D=!1){D&&y(this,At)||(y(this,lt)&&(y(this,lt).parentNode.parentNode.remove(),gt(this,lt,null)),y(this,ut)&&(y(this,ut).clear(),gt(this,ut,null)),gt(this,X,0))}}ut=new WeakMap,lt=new WeakMap,ht=new WeakMap,mt=new WeakMap,_t=new WeakMap,St=new WeakMap,At=new WeakMap,X=new WeakMap,u=new WeakSet,Qt=function(){return y(this,ut)||gt(this,ut,new Map)},P=new WeakSet,Yt=function(){if(!y(this,lt)){const D=y(this,mt).createElement("div"),{style:t}=D;t.visibility="hidden",t.contain="strict",t.width=t.height=0,t.position="absolute",t.top=t.left=0,t.zIndex=-1;const s=y(this,mt).createElementNS(W,"svg");s.setAttribute("width",0),s.setAttribute("height",0),gt(this,lt,y(this,mt).createElementNS(W,"defs")),D.append(s),s.append(y(this,lt)),y(this,mt).body.append(D)}return y(this,lt)},O=new WeakSet,$t=function(D,t,s){const b=y(this,mt).createElementNS(W,t);b.setAttribute("type","discrete"),b.setAttribute("tableValues",s),D.append(b)},i.DOMFilterFactory=L;class F extends h.BaseCanvasFactory{constructor({ownerDocument:M=globalThis.document}={}){super(),this._document=M}_createCanvas(M,D){const t=this._document.createElement("canvas");return t.width=M,t.height=D,t}}i.DOMCanvasFactory=F;async function v(G,M=!1){if(e(G,document.baseURI)){const D=await fetch(G);if(!D.ok)throw new Error(D.statusText);return M?new Uint8Array(await D.arrayBuffer()):(0,_.stringToBytes)(await D.text())}return new Promise((D,t)=>{const s=new XMLHttpRequest;s.open("GET",G,!0),M&&(s.responseType="arraybuffer"),s.onreadystatechange=()=>{if(s.readyState===XMLHttpRequest.DONE){if(s.status===200||s.status===0){let b;if(M&&s.response?b=new Uint8Array(s.response):!M&&s.responseText&&(b=(0,_.stringToBytes)(s.responseText)),b){D(b);return}}t(new Error(s.statusText))}},s.send(null)})}class N extends h.BaseCMapReaderFactory{_fetchData(M,D){return v(M,this.isCompressed).then(t=>({cMapData:t,compressionType:D}))}}i.DOMCMapReaderFactory=N;class T extends h.BaseStandardFontDataFactory{_fetchData(M){return v(M,!0)}}i.DOMStandardFontDataFactory=T;class x extends h.BaseSVGFactory{_createSVG(M){return document.createElementNS(W,M)}}i.DOMSVGFactory=x;class g{constructor({viewBox:M,scale:D,rotation:t,offsetX:s=0,offsetY:b=0,dontFlip:E=!1}){this.viewBox=M,this.scale=D,this.rotation=t,this.offsetX=s,this.offsetY=b;const C=(M[2]+M[0])/2,V=(M[3]+M[1])/2;let st,J,rt,ot;switch(t%=360,t<0&&(t+=360),t){case 180:st=-1,J=0,rt=0,ot=1;break;case 90:st=0,J=1,rt=1,ot=0;break;case 270:st=0,J=-1,rt=-1,ot=0;break;case 0:st=1,J=0,rt=0,ot=-1;break;default:throw new Error("PageViewport: Invalid rotation, must be a multiple of 90 degrees.")}E&&(rt=-rt,ot=-ot);let nt,at,ft,pt;st===0?(nt=Math.abs(V-M[1])*D+s,at=Math.abs(C-M[0])*D+b,ft=(M[3]-M[1])*D,pt=(M[2]-M[0])*D):(nt=Math.abs(C-M[0])*D+s,at=Math.abs(V-M[1])*D+b,ft=(M[2]-M[0])*D,pt=(M[3]-M[1])*D),this.transform=[st*D,J*D,rt*D,ot*D,nt-st*D*C-rt*D*V,at-J*D*C-ot*D*V],this.width=ft,this.height=pt}get rawDims(){const{viewBox:M}=this;return(0,_.shadow)(this,"rawDims",{pageWidth:M[2]-M[0],pageHeight:M[3]-M[1],pageX:M[0],pageY:M[1]})}clone({scale:M=this.scale,rotation:D=this.rotation,offsetX:t=this.offsetX,offsetY:s=this.offsetY,dontFlip:b=!1}={}){return new g({viewBox:this.viewBox.slice(),scale:M,rotation:D,offsetX:t,offsetY:s,dontFlip:b})}convertToViewportPoint(M,D){return _.Util.applyTransform([M,D],this.transform)}convertToViewportRectangle(M){const D=_.Util.applyTransform([M[0],M[1]],this.transform),t=_.Util.applyTransform([M[2],M[3]],this.transform);return[D[0],D[1],t[0],t[1]]}convertToPdfPoint(M,D){return _.Util.applyInverseTransform([M,D],this.transform)}}i.PageViewport=g;class f extends _.BaseException{constructor(M,D,t=0){super(M,"RenderingCancelledException"),this.type=D,this.extraDelay=t}}i.RenderingCancelledException=f;function l(G){const M=G.length;let D=0;for(;D<M&&G[D].trim()==="";)D++;return G.substring(D,D+5).toLowerCase()==="data:"}function A(G){return typeof G=="string"&&/\.pdf$/i.test(G)}function S(G,M=!1){return M||([G]=G.split(/[#?]/,1)),G.substring(G.lastIndexOf("/")+1)}function w(G,M="document.pdf"){if(typeof G!="string")return M;if(l(G))return(0,_.warn)('getPdfFilenameFromUrl: ignore "data:"-URL for performance reasons.'),M;const D=/^(?:(?:[^:]+:)?\/\/[^/]+)?([^?#]*)(\?[^#]*)?(#.*)?$/,t=/[^/?#=]+\.pdf\b(?!.*\.pdf\b)/i,s=D.exec(G);let b=t.exec(s[1])||t.exec(s[2])||t.exec(s[3]);if(b&&(b=b[0],b.includes("%")))try{b=t.exec(decodeURIComponent(b))[0]}catch{}return b||M}class m{constructor(){Lt(this,"started",Object.create(null));Lt(this,"times",[])}time(M){M in this.started&&(0,_.warn)(`Timer is already running for ${M}`),this.started[M]=Date.now()}timeEnd(M){M in this.started||(0,_.warn)(`Timer has not been started for ${M}`),this.times.push({name:M,start:this.started[M],end:Date.now()}),delete this.started[M]}toString(){const M=[];let D=0;for(const{name:t}of this.times)D=Math.max(t.length,D);for(const{name:t,start:s,end:b}of this.times)M.push(`${t.padEnd(D)} ${b-s}ms
`);return M.join("")}}i.StatTimer=m;function e(G,M){try{const{protocol:D}=M?new URL(G,M):new URL(G);return D==="http:"||D==="https:"}catch{return!1}}function a(G,M=!1){return new Promise((D,t)=>{const s=document.createElement("script");s.src=G,s.onload=function(b){M&&s.remove(),D(b)},s.onerror=function(){t(new Error(`Cannot load script at: ${s.src}`))},(document.head||document.documentElement).append(s)})}function c(G){console.log("Deprecated API usage: "+G)}let o;class d{static toDateObject(M){if(!M||typeof M!="string")return null;o||(o=new RegExp("^D:(\\d{4})(\\d{2})?(\\d{2})?(\\d{2})?(\\d{2})?(\\d{2})?([Z|+|-])?(\\d{2})?'?(\\d{2})?'?"));const D=o.exec(M);if(!D)return null;const t=parseInt(D[1],10);let s=parseInt(D[2],10);s=s>=1&&s<=12?s-1:0;let b=parseInt(D[3],10);b=b>=1&&b<=31?b:1;let E=parseInt(D[4],10);E=E>=0&&E<=23?E:0;let C=parseInt(D[5],10);C=C>=0&&C<=59?C:0;let V=parseInt(D[6],10);V=V>=0&&V<=59?V:0;const st=D[7]||"Z";let J=parseInt(D[8],10);J=J>=0&&J<=23?J:0;let rt=parseInt(D[9],10)||0;return rt=rt>=0&&rt<=59?rt:0,st==="-"?(E+=J,C+=rt):st==="+"&&(E-=J,C-=rt),new Date(Date.UTC(t,s,b,E,C,V))}}i.PDFDateString=d;function k(G,{scale:M=1,rotation:D=0}){const{width:t,height:s}=G.attributes.style,b=[0,0,parseInt(t),parseInt(s)];return new g({viewBox:b,scale:M,rotation:D})}function n(G){if(G.startsWith("#")){const M=parseInt(G.slice(1),16);return[(M&16711680)>>16,(M&65280)>>8,M&255]}return G.startsWith("rgb(")?G.slice(4,-1).split(",").map(M=>parseInt(M)):G.startsWith("rgba(")?G.slice(5,-1).split(",").map(M=>parseInt(M)).slice(0,3):((0,_.warn)(`Not a valid color format: "${G}"`),[0,0,0])}function j(G){const M=document.createElement("span");M.style.visibility="hidden",document.body.append(M);for(const D of G.keys()){M.style.color=D;const t=window.getComputedStyle(M).color;G.set(D,n(t))}M.remove()}function $(G){const{a:M,b:D,c:t,d:s,e:b,f:E}=G.getTransform();return[M,D,t,s,b,E]}function Y(G){const{a:M,b:D,c:t,d:s,e:b,f:E}=G.getTransform().invertSelf();return[M,D,t,s,b,E]}function Q(G,M,D=!1,t=!0){if(M instanceof g){const{pageWidth:s,pageHeight:b}=M.rawDims,{style:E}=G,C=`calc(var(--scale-factor) * ${s}px)`,V=`calc(var(--scale-factor) * ${b}px)`;!D||M.rotation%180===0?(E.width=C,E.height=V):(E.width=V,E.height=C)}t&&G.setAttribute("data-main-rotation",M.rotation)}},(B,i,U)=>{Object.defineProperty(i,"__esModule",{value:!0}),i.BaseStandardFontDataFactory=i.BaseSVGFactory=i.BaseFilterFactory=i.BaseCanvasFactory=i.BaseCMapReaderFactory=void 0;var h=U(1);class _{constructor(){this.constructor===_&&(0,h.unreachable)("Cannot initialize BaseFilterFactory.")}addFilter(v){return"none"}addHCMFilter(v,N){return"none"}destroy(v=!1){}}i.BaseFilterFactory=_;class W{constructor(){this.constructor===W&&(0,h.unreachable)("Cannot initialize BaseCanvasFactory.")}create(v,N){if(v<=0||N<=0)throw new Error("Invalid canvas size");const T=this._createCanvas(v,N);return{canvas:T,context:T.getContext("2d")}}reset(v,N,T){if(!v.canvas)throw new Error("Canvas is not specified");if(N<=0||T<=0)throw new Error("Invalid canvas size");v.canvas.width=N,v.canvas.height=T}destroy(v){if(!v.canvas)throw new Error("Canvas is not specified");v.canvas.width=0,v.canvas.height=0,v.canvas=null,v.context=null}_createCanvas(v,N){(0,h.unreachable)("Abstract method `_createCanvas` called.")}}i.BaseCanvasFactory=W;class q{constructor({baseUrl:v=null,isCompressed:N=!0}){this.constructor===q&&(0,h.unreachable)("Cannot initialize BaseCMapReaderFactory."),this.baseUrl=v,this.isCompressed=N}async fetch({name:v}){if(!this.baseUrl)throw new Error('The CMap "baseUrl" parameter must be specified, ensure that the "cMapUrl" and "cMapPacked" API parameters are provided.');if(!v)throw new Error("CMap name must be specified.");const N=this.baseUrl+v+(this.isCompressed?".bcmap":""),T=this.isCompressed?h.CMapCompressionType.BINARY:h.CMapCompressionType.NONE;return this._fetchData(N,T).catch(x=>{throw new Error(`Unable to load ${this.isCompressed?"binary ":""}CMap at: ${N}`)})}_fetchData(v,N){(0,h.unreachable)("Abstract method `_fetchData` called.")}}i.BaseCMapReaderFactory=q;class Z{constructor({baseUrl:v=null}){this.constructor===Z&&(0,h.unreachable)("Cannot initialize BaseStandardFontDataFactory."),this.baseUrl=v}async fetch({filename:v}){if(!this.baseUrl)throw new Error('The standard font "baseUrl" parameter must be specified, ensure that the "standardFontDataUrl" API parameter is provided.');if(!v)throw new Error("Font filename must be specified.");const N=`${this.baseUrl}${v}`;return this._fetchData(N).catch(T=>{throw new Error(`Unable to load font data at: ${N}`)})}_fetchData(v){(0,h.unreachable)("Abstract method `_fetchData` called.")}}i.BaseStandardFontDataFactory=Z;class L{constructor(){this.constructor===L&&(0,h.unreachable)("Cannot initialize BaseSVGFactory.")}create(v,N,T=!1){if(v<=0||N<=0)throw new Error("Invalid SVG dimensions");const x=this._createSVG("svg:svg");return x.setAttribute("version","1.1"),T||(x.setAttribute("width",`${v}px`),x.setAttribute("height",`${N}px`)),x.setAttribute("preserveAspectRatio","none"),x.setAttribute("viewBox",`0 0 ${v} ${N}`),x}createElement(v){if(typeof v!="string")throw new Error("Invalid SVG element type");return this._createSVG(v)}_createSVG(v){(0,h.unreachable)("Abstract method `_createSVG` called.")}}i.BaseSVGFactory=L},(B,i,U)=>{Object.defineProperty(i,"__esModule",{value:!0}),i.MurmurHash3_64=void 0;var h=U(1);const _=3285377520,W=4294901760,q=65535;class Z{constructor(F){this.h1=F?F&4294967295:_,this.h2=F?F&4294967295:_}update(F){let v,N;if(typeof F=="string"){v=new Uint8Array(F.length*2),N=0;for(let c=0,o=F.length;c<o;c++){const d=F.charCodeAt(c);d<=255?v[N++]=d:(v[N++]=d>>>8,v[N++]=d&255)}}else if((0,h.isArrayBuffer)(F))v=F.slice(),N=v.byteLength;else throw new Error("Wrong data format in MurmurHash3_64_update. Input must be a string or array.");const T=N>>2,x=N-T*4,g=new Uint32Array(v.buffer,0,T);let f=0,l=0,A=this.h1,S=this.h2;const w=3432918353,m=461845907,e=w&q,a=m&q;for(let c=0;c<T;c++)c&1?(f=g[c],f=f*w&W|f*e&q,f=f<<15|f>>>17,f=f*m&W|f*a&q,A^=f,A=A<<13|A>>>19,A=A*5+3864292196):(l=g[c],l=l*w&W|l*e&q,l=l<<15|l>>>17,l=l*m&W|l*a&q,S^=l,S=S<<13|S>>>19,S=S*5+3864292196);switch(f=0,x){case 3:f^=v[T*4+2]<<16;case 2:f^=v[T*4+1]<<8;case 1:f^=v[T*4],f=f*w&W|f*e&q,f=f<<15|f>>>17,f=f*m&W|f*a&q,T&1?A^=f:S^=f}this.h1=A,this.h2=S}hexdigest(){let F=this.h1,v=this.h2;return F^=v>>>1,F=F*3981806797&W|F*36045&q,v=v*4283543511&W|((v<<16|F>>>16)*2950163797&W)>>>16,F^=v>>>1,F=F*444984403&W|F*60499&q,v=v*3301882366&W|((v<<16|F>>>16)*3120437893&W)>>>16,F^=v>>>1,(F>>>0).toString(16).padStart(8,"0")+(v>>>0).toString(16).padStart(8,"0")}}i.MurmurHash3_64=Z},(B,i,U)=>{Object.defineProperty(i,"__esModule",{value:!0}),i.FontLoader=i.FontFaceObject=void 0;var h=U(1),_=U(10);class W{constructor({ownerDocument:L=globalThis.document,styleElement:F=null}){this._document=L,this.nativeFontFaces=[],this.styleElement=null,this.loadingRequests=[],this.loadTestFontId=0}addNativeFontFace(L){this.nativeFontFaces.push(L),this._document.fonts.add(L)}insertRule(L){this.styleElement||(this.styleElement=this._document.createElement("style"),this._document.documentElement.getElementsByTagName("head")[0].append(this.styleElement));const F=this.styleElement.sheet;F.insertRule(L,F.cssRules.length)}clear(){for(const L of this.nativeFontFaces)this._document.fonts.delete(L);this.nativeFontFaces.length=0,this.styleElement&&(this.styleElement.remove(),this.styleElement=null)}async bind(L){if(L.attached||L.missingFile)return;if(L.attached=!0,this.isFontLoadingAPISupported){const v=L.createNativeFontFace();if(v){this.addNativeFontFace(v);try{await v.loaded}catch(N){throw(0,h.warn)(`Failed to load font '${v.family}': '${N}'.`),L.disableFontFace=!0,N}}return}const F=L.createFontFaceRule();if(F){if(this.insertRule(F),this.isSyncFontLoadingSupported)return;await new Promise(v=>{const N=this._queueLoadingCallback(v);this._prepareFontLoadEvent(L,N)})}}get isFontLoadingAPISupported(){var F;const L=!!((F=this._document)!=null&&F.fonts);return(0,h.shadow)(this,"isFontLoadingAPISupported",L)}get isSyncFontLoadingSupported(){let L=!1;return(_.isNodeJS||typeof navigator<"u"&&/Mozilla\/5.0.*?rv:\d+.*? Gecko/.test(navigator.userAgent))&&(L=!0),(0,h.shadow)(this,"isSyncFontLoadingSupported",L)}_queueLoadingCallback(L){function F(){for((0,h.assert)(!N.done,"completeRequest() cannot be called twice."),N.done=!0;v.length>0&&v[0].done;){const T=v.shift();setTimeout(T.callback,0)}}const{loadingRequests:v}=this,N={done:!1,complete:F,callback:L};return v.push(N),N}get _loadTestFont(){const L=atob("T1RUTwALAIAAAwAwQ0ZGIDHtZg4AAAOYAAAAgUZGVE1lkzZwAAAEHAAAABxHREVGABQAFQAABDgAAAAeT1MvMlYNYwkAAAEgAAAAYGNtYXABDQLUAAACNAAAAUJoZWFk/xVFDQAAALwAAAA2aGhlYQdkA+oAAAD0AAAAJGhtdHgD6AAAAAAEWAAAAAZtYXhwAAJQAAAAARgAAAAGbmFtZVjmdH4AAAGAAAAAsXBvc3T/hgAzAAADeAAAACAAAQAAAAEAALZRFsRfDzz1AAsD6AAAAADOBOTLAAAAAM4KHDwAAAAAA+gDIQAAAAgAAgAAAAAAAAABAAADIQAAAFoD6AAAAAAD6AABAAAAAAAAAAAAAAAAAAAAAQAAUAAAAgAAAAQD6AH0AAUAAAKKArwAAACMAooCvAAAAeAAMQECAAACAAYJAAAAAAAAAAAAAQAAAAAAAAAAAAAAAFBmRWQAwAAuAC4DIP84AFoDIQAAAAAAAQAAAAAAAAAAACAAIAABAAAADgCuAAEAAAAAAAAAAQAAAAEAAAAAAAEAAQAAAAEAAAAAAAIAAQAAAAEAAAAAAAMAAQAAAAEAAAAAAAQAAQAAAAEAAAAAAAUAAQAAAAEAAAAAAAYAAQAAAAMAAQQJAAAAAgABAAMAAQQJAAEAAgABAAMAAQQJAAIAAgABAAMAAQQJAAMAAgABAAMAAQQJAAQAAgABAAMAAQQJAAUAAgABAAMAAQQJAAYAAgABWABYAAAAAAAAAwAAAAMAAAAcAAEAAAAAADwAAwABAAAAHAAEACAAAAAEAAQAAQAAAC7//wAAAC7////TAAEAAAAAAAABBgAAAQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAEAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAMAAAAAAAD/gwAyAAAAAQAAAAAAAAAAAAAAAAAAAAABAAQEAAEBAQJYAAEBASH4DwD4GwHEAvgcA/gXBIwMAYuL+nz5tQXkD5j3CBLnEQACAQEBIVhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYAAABAQAADwACAQEEE/t3Dov6fAH6fAT+fPp8+nwHDosMCvm1Cvm1DAz6fBQAAAAAAAABAAAAAMmJbzEAAAAAzgTjFQAAAADOBOQpAAEAAAAAAAAADAAUAAQAAAABAAAAAgABAAAAAAAAAAAD6AAAAAAAAA==");return(0,h.shadow)(this,"_loadTestFont",L)}_prepareFontLoadEvent(L,F){function v(n,j){return n.charCodeAt(j)<<24|n.charCodeAt(j+1)<<16|n.charCodeAt(j+2)<<8|n.charCodeAt(j+3)&255}function N(n,j,$,Y){const Q=n.substring(0,j),et=n.substring(j+$);return Q+Y+et}let T,x;const g=this._document.createElement("canvas");g.width=1,g.height=1;const f=g.getContext("2d");let l=0;function A(n,j){if(++l>30){(0,h.warn)("Load test font never loaded."),j();return}if(f.font="30px "+n,f.fillText(".",0,20),f.getImageData(0,0,1,1).data[3]>0){j();return}setTimeout(A.bind(null,n,j))}const S=`lt${Date.now()}${this.loadTestFontId++}`;let w=this._loadTestFont;w=N(w,976,S.length,S);const e=16,a=1482184792;let c=v(w,e);for(T=0,x=S.length-3;T<x;T+=4)c=c-a+v(S,T)|0;T<S.length&&(c=c-a+v(S+"XXX",T)|0),w=N(w,e,4,(0,h.string32)(c));const o=`url(data:font/opentype;base64,${btoa(w)});`,d=`@font-face {font-family:"${S}";src:${o}}`;this.insertRule(d);const k=this._document.createElement("div");k.style.visibility="hidden",k.style.width=k.style.height="10px",k.style.position="absolute",k.style.top=k.style.left="0px";for(const n of[L.loadedName,S]){const j=this._document.createElement("span");j.textContent="Hi",j.style.fontFamily=n,k.append(j)}this._document.body.append(k),A(S,()=>{k.remove(),F.complete()})}}i.FontLoader=W;class q{constructor(L,{isEvalSupported:F=!0,disableFontFace:v=!1,ignoreErrors:N=!1,inspectFont:T=null}){this.compiledGlyphs=Object.create(null);for(const x in L)this[x]=L[x];this.isEvalSupported=F!==!1,this.disableFontFace=v===!0,this.ignoreErrors=N===!0,this._inspectFont=T}createNativeFontFace(){var F;if(!this.data||this.disableFontFace)return null;let L;if(!this.cssFontInfo)L=new FontFace(this.loadedName,this.data,{});else{const v={weight:this.cssFontInfo.fontWeight};this.cssFontInfo.italicAngle&&(v.style=`oblique ${this.cssFontInfo.italicAngle}deg`),L=new FontFace(this.cssFontInfo.fontFamily,this.data,v)}return(F=this._inspectFont)==null||F.call(this,this),L}createFontFaceRule(){var N;if(!this.data||this.disableFontFace)return null;const L=(0,h.bytesToString)(this.data),F=`url(data:${this.mimetype};base64,${btoa(L)});`;let v;if(!this.cssFontInfo)v=`@font-face {font-family:"${this.loadedName}";src:${F}}`;else{let T=`font-weight: ${this.cssFontInfo.fontWeight};`;this.cssFontInfo.italicAngle&&(T+=`font-style: oblique ${this.cssFontInfo.italicAngle}deg;`),v=`@font-face {font-family:"${this.cssFontInfo.fontFamily}";${T}src:${F}}`}return(N=this._inspectFont)==null||N.call(this,this,F),v}getPathGenerator(L,F){if(this.compiledGlyphs[F]!==void 0)return this.compiledGlyphs[F];let v;try{v=L.get(this.loadedName+"_path_"+F)}catch(N){if(!this.ignoreErrors)throw N;return(0,h.warn)(`getPathGenerator - ignoring character: "${N}".`),this.compiledGlyphs[F]=function(T,x){}}if(this.isEvalSupported&&h.FeatureTest.isEvalSupported){const N=[];for(const T of v){const x=T.args!==void 0?T.args.join(","):"";N.push("c.",T.cmd,"(",x,`);
`)}return this.compiledGlyphs[F]=new Function("c","size",N.join(""))}return this.compiledGlyphs[F]=function(N,T){for(const x of v)x.cmd==="scale"&&(x.args=[T,-T]),N[x.cmd].apply(N,x.args)}}}i.FontFaceObject=q},(B,i)=>{Object.defineProperty(i,"__esModule",{value:!0}),i.isNodeJS=void 0;const U=typeof process=="object"&&process+""=="[object process]"&&!process.versions.nw&&!(process.versions.electron&&process.type&&process.type!=="browser");i.isNodeJS=U},(B,i,U)=>{var ht,ye,_t,Ae;Object.defineProperty(i,"__esModule",{value:!0}),i.CanvasGraphics=void 0;var h=U(1),_=U(6),W=U(12),q=U(13),Z=U(10);const L=16,F=100,v=4096,N=15,T=10,x=1e3,g=16;function f(X,u){if(X._removeMirroring)throw new Error("Context is already forwarding operations.");X.__originalSave=X.save,X.__originalRestore=X.restore,X.__originalRotate=X.rotate,X.__originalScale=X.scale,X.__originalTranslate=X.translate,X.__originalTransform=X.transform,X.__originalSetTransform=X.setTransform,X.__originalResetTransform=X.resetTransform,X.__originalClip=X.clip,X.__originalMoveTo=X.moveTo,X.__originalLineTo=X.lineTo,X.__originalBezierCurveTo=X.bezierCurveTo,X.__originalRect=X.rect,X.__originalClosePath=X.closePath,X.__originalBeginPath=X.beginPath,X._removeMirroring=()=>{X.save=X.__originalSave,X.restore=X.__originalRestore,X.rotate=X.__originalRotate,X.scale=X.__originalScale,X.translate=X.__originalTranslate,X.transform=X.__originalTransform,X.setTransform=X.__originalSetTransform,X.resetTransform=X.__originalResetTransform,X.clip=X.__originalClip,X.moveTo=X.__originalMoveTo,X.lineTo=X.__originalLineTo,X.bezierCurveTo=X.__originalBezierCurveTo,X.rect=X.__originalRect,X.closePath=X.__originalClosePath,X.beginPath=X.__originalBeginPath,delete X._removeMirroring},X.save=function(){u.save(),this.__originalSave()},X.restore=function(){u.restore(),this.__originalRestore()},X.translate=function(P,H){u.translate(P,H),this.__originalTranslate(P,H)},X.scale=function(P,H){u.scale(P,H),this.__originalScale(P,H)},X.transform=function(P,H,O,z,G,M){u.transform(P,H,O,z,G,M),this.__originalTransform(P,H,O,z,G,M)},X.setTransform=function(P,H,O,z,G,M){u.setTransform(P,H,O,z,G,M),this.__originalSetTransform(P,H,O,z,G,M)},X.resetTransform=function(){u.resetTransform(),this.__originalResetTransform()},X.rotate=function(P){u.rotate(P),this.__originalRotate(P)},X.clip=function(P){u.clip(P),this.__originalClip(P)},X.moveTo=function(p,P){u.moveTo(p,P),this.__originalMoveTo(p,P)},X.lineTo=function(p,P){u.lineTo(p,P),this.__originalLineTo(p,P)},X.bezierCurveTo=function(p,P,H,O,z,G){u.bezierCurveTo(p,P,H,O,z,G),this.__originalBezierCurveTo(p,P,H,O,z,G)},X.rect=function(p,P,H,O){u.rect(p,P,H,O),this.__originalRect(p,P,H,O)},X.closePath=function(){u.closePath(),this.__originalClosePath()},X.beginPath=function(){u.beginPath(),this.__originalBeginPath()}}class l{constructor(u){this.canvasFactory=u,this.cache=Object.create(null)}getCanvas(u,p,P){let H;return this.cache[u]!==void 0?(H=this.cache[u],this.canvasFactory.reset(H,p,P)):(H=this.canvasFactory.create(p,P),this.cache[u]=H),H}delete(u){delete this.cache[u]}clear(){for(const u in this.cache){const p=this.cache[u];this.canvasFactory.destroy(p),delete this.cache[u]}}}function A(X,u,p,P,H,O,z,G,M,D){const[t,s,b,E,C,V]=(0,_.getCurrentTransform)(X);if(s===0&&b===0){const rt=z*t+C,ot=Math.round(rt),nt=G*E+V,at=Math.round(nt),ft=(z+M)*t+C,pt=Math.abs(Math.round(ft)-ot)||1,Tt=(G+D)*E+V,vt=Math.abs(Math.round(Tt)-at)||1;return X.setTransform(Math.sign(t),0,0,Math.sign(E),ot,at),X.drawImage(u,p,P,H,O,0,0,pt,vt),X.setTransform(t,s,b,E,C,V),[pt,vt]}if(t===0&&E===0){const rt=G*b+C,ot=Math.round(rt),nt=z*s+V,at=Math.round(nt),ft=(G+D)*b+C,pt=Math.abs(Math.round(ft)-ot)||1,Tt=(z+M)*s+V,vt=Math.abs(Math.round(Tt)-at)||1;return X.setTransform(0,Math.sign(s),Math.sign(b),0,ot,at),X.drawImage(u,p,P,H,O,0,0,vt,pt),X.setTransform(t,s,b,E,C,V),[vt,pt]}X.drawImage(u,p,P,H,O,z,G,M,D);const st=Math.hypot(t,s),J=Math.hypot(b,E);return[st*M,J*D]}function S(X){const{width:u,height:p}=X;if(u>x||p>x)return null;const P=1e3,H=new Uint8Array([0,2,4,0,1,0,5,4,8,10,0,8,0,2,1,0]),O=u+1;let z=new Uint8Array(O*(p+1)),G,M,D;const t=u+7&-8;let s=new Uint8Array(t*p),b=0;for(const J of X.data){let rt=128;for(;rt>0;)s[b++]=J&rt?0:255,rt>>=1}let E=0;for(b=0,s[b]!==0&&(z[0]=1,++E),M=1;M<u;M++)s[b]!==s[b+1]&&(z[M]=s[b]?2:1,++E),b++;for(s[b]!==0&&(z[M]=2,++E),G=1;G<p;G++){b=G*t,D=G*O,s[b-t]!==s[b]&&(z[D]=s[b]?1:8,++E);let J=(s[b]?4:0)+(s[b-t]?8:0);for(M=1;M<u;M++)J=(J>>2)+(s[b+1]?4:0)+(s[b-t+1]?8:0),H[J]&&(z[D+M]=H[J],++E),b++;if(s[b-t]!==s[b]&&(z[D+M]=s[b]?2:4,++E),E>P)return null}for(b=t*(p-1),D=G*O,s[b]!==0&&(z[D]=8,++E),M=1;M<u;M++)s[b]!==s[b+1]&&(z[D+M]=s[b]?4:8,++E),b++;if(s[b]!==0&&(z[D+M]=4,++E),E>P)return null;const C=new Int32Array([0,O,-1,0,-O,0,0,0,1]),V=new Path2D;for(G=0;E&&G<=p;G++){let J=G*O;const rt=J+u;for(;J<rt&&!z[J];)J++;if(J===rt)continue;V.moveTo(J%O,G);const ot=J;let nt=z[J];do{const at=C[nt];do J+=at;while(!z[J]);const ft=z[J];ft!==5&&ft!==10?(nt=ft,z[J]=0):(nt=ft&51*nt>>4,z[J]&=nt>>2|nt<<2),V.lineTo(J%O,J/O|0),z[J]||--E}while(ot!==J);--G}return s=null,z=null,function(J){J.save(),J.scale(1/u,-1/p),J.translate(0,-p),J.fill(V),J.beginPath(),J.restore()}}class w{constructor(u,p){this.alphaIsShape=!1,this.fontSize=0,this.fontSizeScale=1,this.textMatrix=h.IDENTITY_MATRIX,this.textMatrixScale=1,this.fontMatrix=h.FONT_IDENTITY_MATRIX,this.leading=0,this.x=0,this.y=0,this.lineX=0,this.lineY=0,this.charSpacing=0,this.wordSpacing=0,this.textHScale=1,this.textRenderingMode=h.TextRenderingMode.FILL,this.textRise=0,this.fillColor="#000000",this.strokeColor="#000000",this.patternFill=!1,this.fillAlpha=1,this.strokeAlpha=1,this.lineWidth=1,this.activeSMask=null,this.transferMaps="none",this.startNewPathAndClipBox([0,0,u,p])}clone(){const u=Object.create(this);return u.clipBox=this.clipBox.slice(),u}setCurrentPoint(u,p){this.x=u,this.y=p}updatePathMinMax(u,p,P){[p,P]=h.Util.applyTransform([p,P],u),this.minX=Math.min(this.minX,p),this.minY=Math.min(this.minY,P),this.maxX=Math.max(this.maxX,p),this.maxY=Math.max(this.maxY,P)}updateRectMinMax(u,p){const P=h.Util.applyTransform(p,u),H=h.Util.applyTransform(p.slice(2),u);this.minX=Math.min(this.minX,P[0],H[0]),this.minY=Math.min(this.minY,P[1],H[1]),this.maxX=Math.max(this.maxX,P[0],H[0]),this.maxY=Math.max(this.maxY,P[1],H[1])}updateScalingPathMinMax(u,p){h.Util.scaleMinMax(u,p),this.minX=Math.min(this.minX,p[0]),this.maxX=Math.max(this.maxX,p[1]),this.minY=Math.min(this.minY,p[2]),this.maxY=Math.max(this.maxY,p[3])}updateCurvePathMinMax(u,p,P,H,O,z,G,M,D,t){const s=h.Util.bezierBoundingBox(p,P,H,O,z,G,M,D);if(t){t[0]=Math.min(t[0],s[0],s[2]),t[1]=Math.max(t[1],s[0],s[2]),t[2]=Math.min(t[2],s[1],s[3]),t[3]=Math.max(t[3],s[1],s[3]);return}this.updateRectMinMax(u,s)}getPathBoundingBox(u=W.PathType.FILL,p=null){const P=[this.minX,this.minY,this.maxX,this.maxY];if(u===W.PathType.STROKE){p||(0,h.unreachable)("Stroke bounding box must include transform.");const H=h.Util.singularValueDecompose2dScale(p),O=H[0]*this.lineWidth/2,z=H[1]*this.lineWidth/2;P[0]-=O,P[1]-=z,P[2]+=O,P[3]+=z}return P}updateClipFromPath(){const u=h.Util.intersect(this.clipBox,this.getPathBoundingBox());this.startNewPathAndClipBox(u||[0,0,0,0])}isEmptyClip(){return this.minX===1/0}startNewPathAndClipBox(u){this.clipBox=u,this.minX=1/0,this.minY=1/0,this.maxX=0,this.maxY=0}getClippedPathBoundingBox(u=W.PathType.FILL,p=null){return h.Util.intersect(this.clipBox,this.getPathBoundingBox(u,p))}}function m(X,u){if(typeof ImageData<"u"&&u instanceof ImageData){X.putImageData(u,0,0);return}const p=u.height,P=u.width,H=p%g,O=(p-H)/g,z=H===0?O:O+1,G=X.createImageData(P,g);let M=0,D;const t=u.data,s=G.data;let b,E,C,V;if(u.kind===h.ImageKind.GRAYSCALE_1BPP){const st=t.byteLength,J=new Uint32Array(s.buffer,0,s.byteLength>>2),rt=J.length,ot=P+7>>3,nt=4294967295,at=h.FeatureTest.isLittleEndian?4278190080:255;for(b=0;b<z;b++){for(C=b<O?g:H,D=0,E=0;E<C;E++){const ft=st-M;let pt=0;const Tt=ft>ot?P:ft*8-7,vt=Tt&-8;let Pt=0,K=0;for(;pt<vt;pt+=8)K=t[M++],J[D++]=K&128?nt:at,J[D++]=K&64?nt:at,J[D++]=K&32?nt:at,J[D++]=K&16?nt:at,J[D++]=K&8?nt:at,J[D++]=K&4?nt:at,J[D++]=K&2?nt:at,J[D++]=K&1?nt:at;for(;pt<Tt;pt++)Pt===0&&(K=t[M++],Pt=128),J[D++]=K&Pt?nt:at,Pt>>=1}for(;D<rt;)J[D++]=0;X.putImageData(G,0,b*g)}}else if(u.kind===h.ImageKind.RGBA_32BPP){for(E=0,V=P*g*4,b=0;b<O;b++)s.set(t.subarray(M,M+V)),M+=V,X.putImageData(G,0,E),E+=g;b<z&&(V=P*H*4,s.set(t.subarray(M,M+V)),X.putImageData(G,0,E))}else if(u.kind===h.ImageKind.RGB_24BPP)for(C=g,V=P*C,b=0;b<z;b++){for(b>=O&&(C=H,V=P*C),D=0,E=V;E--;)s[D++]=t[M++],s[D++]=t[M++],s[D++]=t[M++],s[D++]=255;X.putImageData(G,0,b*g)}else throw new Error(`bad image kind: ${u.kind}`)}function e(X,u){if(u.bitmap){X.drawImage(u.bitmap,0,0);return}const p=u.height,P=u.width,H=p%g,O=(p-H)/g,z=H===0?O:O+1,G=X.createImageData(P,g);let M=0;const D=u.data,t=G.data;for(let s=0;s<z;s++){const b=s<O?g:H;({srcPos:M}=(0,q.convertBlackAndWhiteToRGBA)({src:D,srcPos:M,dest:t,width:P,height:b,nonBlackColor:0})),X.putImageData(G,0,s*g)}}function a(X,u){const p=["strokeStyle","fillStyle","fillRule","globalAlpha","lineWidth","lineCap","lineJoin","miterLimit","globalCompositeOperation","font","filter"];for(const P of p)X[P]!==void 0&&(u[P]=X[P]);X.setLineDash!==void 0&&(u.setLineDash(X.getLineDash()),u.lineDashOffset=X.lineDashOffset)}function c(X){X.strokeStyle=X.fillStyle="#000000",X.fillRule="nonzero",X.globalAlpha=1,X.lineWidth=1,X.lineCap="butt",X.lineJoin="miter",X.miterLimit=10,X.globalCompositeOperation="source-over",X.font="10px sans-serif",X.setLineDash!==void 0&&(X.setLineDash([]),X.lineDashOffset=0),Z.isNodeJS||(X.filter="none")}function o(X,u,p,P){const H=X.length;for(let O=3;O<H;O+=4){const z=X[O];if(z===0)X[O-3]=u,X[O-2]=p,X[O-1]=P;else if(z<255){const G=255-z;X[O-3]=X[O-3]*z+u*G>>8,X[O-2]=X[O-2]*z+p*G>>8,X[O-1]=X[O-1]*z+P*G>>8}}}function d(X,u,p){const P=X.length,H=1/255;for(let O=3;O<P;O+=4){const z=p?p[X[O]]:X[O];u[O]=u[O]*z*H|0}}function k(X,u,p){const P=X.length;for(let H=3;H<P;H+=4){const O=X[H-3]*77+X[H-2]*152+X[H-1]*28;u[H]=p?u[H]*p[O>>8]>>8:u[H]*O>>16}}function n(X,u,p,P,H,O,z,G,M,D,t){const s=!!O,b=s?O[0]:0,E=s?O[1]:0,C=s?O[2]:0;let V;H==="Luminosity"?V=k:V=d;const J=Math.min(P,Math.ceil(1048576/p));for(let rt=0;rt<P;rt+=J){const ot=Math.min(J,P-rt),nt=X.getImageData(G-D,rt+(M-t),p,ot),at=u.getImageData(G,rt+M,p,ot);s&&o(nt.data,b,E,C),V(nt.data,at.data,z),u.putImageData(at,G,rt+M)}}function j(X,u,p,P){const H=P[0],O=P[1],z=P[2]-H,G=P[3]-O;z===0||G===0||(n(u.context,p,z,G,u.subtype,u.backdrop,u.transferMap,H,O,u.offsetX,u.offsetY),X.save(),X.globalAlpha=1,X.globalCompositeOperation="source-over",X.setTransform(1,0,0,1,0,0),X.drawImage(p.canvas,0,0),X.restore())}function $(X,u){const p=h.Util.singularValueDecompose2dScale(X);p[0]=Math.fround(p[0]),p[1]=Math.fround(p[1]);const P=Math.fround((globalThis.devicePixelRatio||1)*_.PixelsPerInch.PDF_TO_CSS_UNITS);return u!==void 0?u:p[0]<=P||p[1]<=P}const Y=["butt","round","square"],Q=["miter","round","bevel"],et={},ut={},At=class{constructor(u,p,P,H,O,{optionalContentConfig:z,markedContentStack:G=null},M,D){tt(this,ht);tt(this,_t);this.ctx=u,this.current=new w(this.ctx.canvas.width,this.ctx.canvas.height),this.stateStack=[],this.pendingClip=null,this.pendingEOFill=!1,this.res=null,this.xobjs=null,this.commonObjs=p,this.objs=P,this.canvasFactory=H,this.filterFactory=O,this.groupStack=[],this.processingType3=null,this.baseTransform=null,this.baseTransformStack=[],this.groupLevel=0,this.smaskStack=[],this.smaskCounter=0,this.tempSMask=null,this.suspendedCtx=null,this.contentVisible=!0,this.markedContentStack=G||[],this.optionalContentConfig=z,this.cachedCanvases=new l(this.canvasFactory),this.cachedPatterns=new Map,this.annotationCanvasMap=M,this.viewportScale=1,this.outputScaleX=1,this.outputScaleY=1,this.pageColors=D,this._cachedScaleForStroking=null,this._cachedGetSinglePixelWidth=null,this._cachedBitmapsMap=new Map}getObject(u,p=null){return typeof u=="string"?u.startsWith("g_")?this.commonObjs.get(u):this.objs.get(u):p}beginDrawing({transform:u,viewport:p,transparency:P=!1,background:H=null}){const O=this.ctx.canvas.width,z=this.ctx.canvas.height,G=this.ctx.fillStyle;if(this.ctx.fillStyle=H||"#ffffff",this.ctx.fillRect(0,0,O,z),this.ctx.fillStyle=G,P){const M=this.cachedCanvases.getCanvas("transparent",O,z);this.compositeCtx=this.ctx,this.transparentCanvas=M.canvas,this.ctx=M.context,this.ctx.save(),this.ctx.transform(...(0,_.getCurrentTransform)(this.compositeCtx))}this.ctx.save(),c(this.ctx),u&&(this.ctx.transform(...u),this.outputScaleX=u[0],this.outputScaleY=u[0]),this.ctx.transform(...p.transform),this.viewportScale=p.scale,this.baseTransform=(0,_.getCurrentTransform)(this.ctx)}executeOperatorList(u,p,P,H){const O=u.argsArray,z=u.fnArray;let G=p||0;const M=O.length;if(M===G)return G;const D=M-G>T&&typeof P=="function",t=D?Date.now()+N:0;let s=0;const b=this.commonObjs,E=this.objs;let C;for(;;){if(H!==void 0&&G===H.nextBreakPoint)return H.breakIt(G,P),G;if(C=z[G],C!==h.OPS.dependency)this[C].apply(this,O[G]);else for(const V of O[G]){const st=V.startsWith("g_")?b:E;if(!st.has(V))return st.get(V,P),G}if(G++,G===M)return G;if(D&&++s>T){if(Date.now()>t)return P(),G;s=0}}}endDrawing(){it(this,ht,ye).call(this),this.cachedCanvases.clear(),this.cachedPatterns.clear();for(const u of this._cachedBitmapsMap.values()){for(const p of u.values())typeof HTMLCanvasElement<"u"&&p instanceof HTMLCanvasElement&&(p.width=p.height=0);u.clear()}this._cachedBitmapsMap.clear(),it(this,_t,Ae).call(this)}_scaleImage(u,p){const P=u.width,H=u.height;let O=Math.max(Math.hypot(p[0],p[1]),1),z=Math.max(Math.hypot(p[2],p[3]),1),G=P,M=H,D="prescale1",t,s;for(;O>2&&G>1||z>2&&M>1;){let b=G,E=M;O>2&&G>1&&(b=G>=16384?Math.floor(G/2)-1||1:Math.ceil(G/2),O/=G/b),z>2&&M>1&&(E=M>=16384?Math.floor(M/2)-1||1:Math.ceil(M)/2,z/=M/E),t=this.cachedCanvases.getCanvas(D,b,E),s=t.context,s.clearRect(0,0,b,E),s.drawImage(u,0,0,G,M,0,0,b,E),u=t.canvas,G=b,M=E,D=D==="prescale1"?"prescale2":"prescale1"}return{img:u,paintWidth:G,paintHeight:M}}_createMaskCanvas(u){const p=this.ctx,{width:P,height:H}=u,O=this.current.fillColor,z=this.current.patternFill,G=(0,_.getCurrentTransform)(p);let M,D,t,s;if((u.bitmap||u.data)&&u.count>1){const pt=u.bitmap||u.data.buffer;D=JSON.stringify(z?G:[G.slice(0,4),O]),M=this._cachedBitmapsMap.get(pt),M||(M=new Map,this._cachedBitmapsMap.set(pt,M));const Tt=M.get(D);if(Tt&&!z){const vt=Math.round(Math.min(G[0],G[2])+G[4]),Pt=Math.round(Math.min(G[1],G[3])+G[5]);return{canvas:Tt,offsetX:vt,offsetY:Pt}}t=Tt}t||(s=this.cachedCanvases.getCanvas("maskCanvas",P,H),e(s.context,u));let b=h.Util.transform(G,[1/P,0,0,-1/H,0,0]);b=h.Util.transform(b,[1,0,0,1,0,-H]);const E=h.Util.applyTransform([0,0],b),C=h.Util.applyTransform([P,H],b),V=h.Util.normalizeRect([E[0],E[1],C[0],C[1]]),st=Math.round(V[2]-V[0])||1,J=Math.round(V[3]-V[1])||1,rt=this.cachedCanvases.getCanvas("fillCanvas",st,J),ot=rt.context,nt=Math.min(E[0],C[0]),at=Math.min(E[1],C[1]);ot.translate(-nt,-at),ot.transform(...b),t||(t=this._scaleImage(s.canvas,(0,_.getCurrentTransformInverse)(ot)),t=t.img,M&&z&&M.set(D,t)),ot.imageSmoothingEnabled=$((0,_.getCurrentTransform)(ot),u.interpolate),A(ot,t,0,0,t.width,t.height,0,0,P,H),ot.globalCompositeOperation="source-in";const ft=h.Util.transform((0,_.getCurrentTransformInverse)(ot),[1,0,0,1,-nt,-at]);return ot.fillStyle=z?O.getPattern(p,this,ft,W.PathType.FILL):O,ot.fillRect(0,0,P,H),M&&!z&&(this.cachedCanvases.delete("fillCanvas"),M.set(D,rt.canvas)),{canvas:rt.canvas,offsetX:Math.round(nt),offsetY:Math.round(at)}}setLineWidth(u){u!==this.current.lineWidth&&(this._cachedScaleForStroking=null),this.current.lineWidth=u,this.ctx.lineWidth=u}setLineCap(u){this.ctx.lineCap=Y[u]}setLineJoin(u){this.ctx.lineJoin=Q[u]}setMiterLimit(u){this.ctx.miterLimit=u}setDash(u,p){const P=this.ctx;P.setLineDash!==void 0&&(P.setLineDash(u),P.lineDashOffset=p)}setRenderingIntent(u){}setFlatness(u){}setGState(u){for(const[p,P]of u)switch(p){case"LW":this.setLineWidth(P);break;case"LC":this.setLineCap(P);break;case"LJ":this.setLineJoin(P);break;case"ML":this.setMiterLimit(P);break;case"D":this.setDash(P[0],P[1]);break;case"RI":this.setRenderingIntent(P);break;case"FL":this.setFlatness(P);break;case"Font":this.setFont(P[0],P[1]);break;case"CA":this.current.strokeAlpha=P;break;case"ca":this.current.fillAlpha=P,this.ctx.globalAlpha=P;break;case"BM":this.ctx.globalCompositeOperation=P;break;case"SMask":this.current.activeSMask=P?this.tempSMask:null,this.tempSMask=null,this.checkSMaskState();break;case"TR":this.ctx.filter=this.current.transferMaps=this.filterFactory.addFilter(P);break}}get inSMaskMode(){return!!this.suspendedCtx}checkSMaskState(){const u=this.inSMaskMode;this.current.activeSMask&&!u?this.beginSMaskMode():!this.current.activeSMask&&u&&this.endSMaskMode()}beginSMaskMode(){if(this.inSMaskMode)throw new Error("beginSMaskMode called while already in smask mode");const u=this.ctx.canvas.width,p=this.ctx.canvas.height,P="smaskGroupAt"+this.groupLevel,H=this.cachedCanvases.getCanvas(P,u,p);this.suspendedCtx=this.ctx,this.ctx=H.context;const O=this.ctx;O.setTransform(...(0,_.getCurrentTransform)(this.suspendedCtx)),a(this.suspendedCtx,O),f(O,this.suspendedCtx),this.setGState([["BM","source-over"],["ca",1],["CA",1]])}endSMaskMode(){if(!this.inSMaskMode)throw new Error("endSMaskMode called while not in smask mode");this.ctx._removeMirroring(),a(this.ctx,this.suspendedCtx),this.ctx=this.suspendedCtx,this.suspendedCtx=null}compose(u){if(!this.current.activeSMask)return;u?(u[0]=Math.floor(u[0]),u[1]=Math.floor(u[1]),u[2]=Math.ceil(u[2]),u[3]=Math.ceil(u[3])):u=[0,0,this.ctx.canvas.width,this.ctx.canvas.height];const p=this.current.activeSMask,P=this.suspendedCtx;j(P,p,this.ctx,u),this.ctx.save(),this.ctx.setTransform(1,0,0,1,0,0),this.ctx.clearRect(0,0,this.ctx.canvas.width,this.ctx.canvas.height),this.ctx.restore()}save(){this.inSMaskMode?(a(this.ctx,this.suspendedCtx),this.suspendedCtx.save()):this.ctx.save();const u=this.current;this.stateStack.push(u),this.current=u.clone()}restore(){this.stateStack.length===0&&this.inSMaskMode&&this.endSMaskMode(),this.stateStack.length!==0&&(this.current=this.stateStack.pop(),this.inSMaskMode?(this.suspendedCtx.restore(),a(this.suspendedCtx,this.ctx)):this.ctx.restore(),this.checkSMaskState(),this.pendingClip=null,this._cachedScaleForStroking=null,this._cachedGetSinglePixelWidth=null)}transform(u,p,P,H,O,z){this.ctx.transform(u,p,P,H,O,z),this._cachedScaleForStroking=null,this._cachedGetSinglePixelWidth=null}constructPath(u,p,P){const H=this.ctx,O=this.current;let z=O.x,G=O.y,M,D;const t=(0,_.getCurrentTransform)(H),s=t[0]===0&&t[3]===0||t[1]===0&&t[2]===0,b=s?P.slice(0):null;for(let E=0,C=0,V=u.length;E<V;E++)switch(u[E]|0){case h.OPS.rectangle:z=p[C++],G=p[C++];const st=p[C++],J=p[C++],rt=z+st,ot=G+J;H.moveTo(z,G),st===0||J===0?H.lineTo(rt,ot):(H.lineTo(rt,G),H.lineTo(rt,ot),H.lineTo(z,ot)),s||O.updateRectMinMax(t,[z,G,rt,ot]),H.closePath();break;case h.OPS.moveTo:z=p[C++],G=p[C++],H.moveTo(z,G),s||O.updatePathMinMax(t,z,G);break;case h.OPS.lineTo:z=p[C++],G=p[C++],H.lineTo(z,G),s||O.updatePathMinMax(t,z,G);break;case h.OPS.curveTo:M=z,D=G,z=p[C+4],G=p[C+5],H.bezierCurveTo(p[C],p[C+1],p[C+2],p[C+3],z,G),O.updateCurvePathMinMax(t,M,D,p[C],p[C+1],p[C+2],p[C+3],z,G,b),C+=6;break;case h.OPS.curveTo2:M=z,D=G,H.bezierCurveTo(z,G,p[C],p[C+1],p[C+2],p[C+3]),O.updateCurvePathMinMax(t,M,D,z,G,p[C],p[C+1],p[C+2],p[C+3],b),z=p[C+2],G=p[C+3],C+=4;break;case h.OPS.curveTo3:M=z,D=G,z=p[C+2],G=p[C+3],H.bezierCurveTo(p[C],p[C+1],z,G,z,G),O.updateCurvePathMinMax(t,M,D,p[C],p[C+1],z,G,z,G,b),C+=4;break;case h.OPS.closePath:H.closePath();break}s&&O.updateScalingPathMinMax(t,b),O.setCurrentPoint(z,G)}closePath(){this.ctx.closePath()}stroke(u=!0){const p=this.ctx,P=this.current.strokeColor;p.globalAlpha=this.current.strokeAlpha,this.contentVisible&&(typeof P=="object"&&(P!=null&&P.getPattern)?(p.save(),p.strokeStyle=P.getPattern(p,this,(0,_.getCurrentTransformInverse)(p),W.PathType.STROKE),this.rescaleAndStroke(!1),p.restore()):this.rescaleAndStroke(!0)),u&&this.consumePath(this.current.getClippedPathBoundingBox()),p.globalAlpha=this.current.fillAlpha}closeStroke(){this.closePath(),this.stroke()}fill(u=!0){const p=this.ctx,P=this.current.fillColor,H=this.current.patternFill;let O=!1;H&&(p.save(),p.fillStyle=P.getPattern(p,this,(0,_.getCurrentTransformInverse)(p),W.PathType.FILL),O=!0);const z=this.current.getClippedPathBoundingBox();this.contentVisible&&z!==null&&(this.pendingEOFill?(p.fill("evenodd"),this.pendingEOFill=!1):p.fill()),O&&p.restore(),u&&this.consumePath(z)}eoFill(){this.pendingEOFill=!0,this.fill()}fillStroke(){this.fill(!1),this.stroke(!1),this.consumePath()}eoFillStroke(){this.pendingEOFill=!0,this.fillStroke()}closeFillStroke(){this.closePath(),this.fillStroke()}closeEOFillStroke(){this.pendingEOFill=!0,this.closePath(),this.fillStroke()}endPath(){this.consumePath()}clip(){this.pendingClip=et}eoClip(){this.pendingClip=ut}beginText(){this.current.textMatrix=h.IDENTITY_MATRIX,this.current.textMatrixScale=1,this.current.x=this.current.lineX=0,this.current.y=this.current.lineY=0}endText(){const u=this.pendingTextPaths,p=this.ctx;if(u===void 0){p.beginPath();return}p.save(),p.beginPath();for(const P of u)p.setTransform(...P.transform),p.translate(P.x,P.y),P.addToPath(p,P.fontSize);p.restore(),p.clip(),p.beginPath(),delete this.pendingTextPaths}setCharSpacing(u){this.current.charSpacing=u}setWordSpacing(u){this.current.wordSpacing=u}setHScale(u){this.current.textHScale=u/100}setLeading(u){this.current.leading=-u}setFont(u,p){const P=this.commonObjs.get(u),H=this.current;if(!P)throw new Error(`Can't find font for ${u}`);if(H.fontMatrix=P.fontMatrix||h.FONT_IDENTITY_MATRIX,(H.fontMatrix[0]===0||H.fontMatrix[3]===0)&&(0,h.warn)("Invalid font matrix for font "+u),p<0?(p=-p,H.fontDirection=-1):H.fontDirection=1,this.current.font=P,this.current.fontSize=p,P.isType3Font)return;const O=P.loadedName||"sans-serif";let z="normal";P.black?z="900":P.bold&&(z="bold");const G=P.italic?"italic":"normal",M=`"${O}", ${P.fallbackName}`;let D=p;p<L?D=L:p>F&&(D=F),this.current.fontSizeScale=p/D,this.ctx.font=`${G} ${z} ${D}px ${M}`}setTextRenderingMode(u){this.current.textRenderingMode=u}setTextRise(u){this.current.textRise=u}moveText(u,p){this.current.x=this.current.lineX+=u,this.current.y=this.current.lineY+=p}setLeadingMoveText(u,p){this.setLeading(-p),this.moveText(u,p)}setTextMatrix(u,p,P,H,O,z){this.current.textMatrix=[u,p,P,H,O,z],this.current.textMatrixScale=Math.hypot(u,p),this.current.x=this.current.lineX=0,this.current.y=this.current.lineY=0}nextLine(){this.moveText(0,this.current.leading)}paintChar(u,p,P,H){const O=this.ctx,z=this.current,G=z.font,M=z.textRenderingMode,D=z.fontSize/z.fontSizeScale,t=M&h.TextRenderingMode.FILL_STROKE_MASK,s=!!(M&h.TextRenderingMode.ADD_TO_PATH_FLAG),b=z.patternFill&&!G.missingFile;let E;(G.disableFontFace||s||b)&&(E=G.getPathGenerator(this.commonObjs,u)),G.disableFontFace||b?(O.save(),O.translate(p,P),O.beginPath(),E(O,D),H&&O.setTransform(...H),(t===h.TextRenderingMode.FILL||t===h.TextRenderingMode.FILL_STROKE)&&O.fill(),(t===h.TextRenderingMode.STROKE||t===h.TextRenderingMode.FILL_STROKE)&&O.stroke(),O.restore()):((t===h.TextRenderingMode.FILL||t===h.TextRenderingMode.FILL_STROKE)&&O.fillText(u,p,P),(t===h.TextRenderingMode.STROKE||t===h.TextRenderingMode.FILL_STROKE)&&O.strokeText(u,p,P)),s&&(this.pendingTextPaths||(this.pendingTextPaths=[])).push({transform:(0,_.getCurrentTransform)(O),x:p,y:P,fontSize:D,addToPath:E})}get isFontSubpixelAAEnabled(){const{context:u}=this.cachedCanvases.getCanvas("isFontSubpixelAAEnabled",10,10);u.scale(1.5,1),u.fillText("I",0,10);const p=u.getImageData(0,0,10,10).data;let P=!1;for(let H=3;H<p.length;H+=4)if(p[H]>0&&p[H]<255){P=!0;break}return(0,h.shadow)(this,"isFontSubpixelAAEnabled",P)}showText(u){const p=this.current,P=p.font;if(P.isType3Font)return this.showType3Text(u);const H=p.fontSize;if(H===0)return;const O=this.ctx,z=p.fontSizeScale,G=p.charSpacing,M=p.wordSpacing,D=p.fontDirection,t=p.textHScale*D,s=u.length,b=P.vertical,E=b?1:-1,C=P.defaultVMetrics,V=H*p.fontMatrix[0],st=p.textRenderingMode===h.TextRenderingMode.FILL&&!P.disableFontFace&&!p.patternFill;O.save(),O.transform(...p.textMatrix),O.translate(p.x,p.y+p.textRise),D>0?O.scale(t,-1):O.scale(t,1);let J;if(p.patternFill){O.save();const ft=p.fillColor.getPattern(O,this,(0,_.getCurrentTransformInverse)(O),W.PathType.FILL);J=(0,_.getCurrentTransform)(O),O.restore(),O.fillStyle=ft}let rt=p.lineWidth;const ot=p.textMatrixScale;if(ot===0||rt===0){const ft=p.textRenderingMode&h.TextRenderingMode.FILL_STROKE_MASK;(ft===h.TextRenderingMode.STROKE||ft===h.TextRenderingMode.FILL_STROKE)&&(rt=this.getSinglePixelWidth())}else rt/=ot;if(z!==1&&(O.scale(z,z),rt/=z),O.lineWidth=rt,P.isInvalidPDFjsFont){const ft=[];let pt=0;for(const Tt of u)ft.push(Tt.unicode),pt+=Tt.width;O.fillText(ft.join(""),0,0),p.x+=pt*V*t,O.restore(),this.compose();return}let nt=0,at;for(at=0;at<s;++at){const ft=u[at];if(typeof ft=="number"){nt+=E*ft*H/1e3;continue}let pt=!1;const Tt=(ft.isSpace?M:0)+G,vt=ft.fontChar,Pt=ft.accent;let K,yt,Et=ft.width;if(b){const dt=ft.vmetric||C,R=-(ft.vmetric?dt[1]:Et*.5)*V,I=dt[2]*V;Et=dt?-dt[0]:Et,K=R/z,yt=(nt+I)/z}else K=nt/z,yt=0;if(P.remeasure&&Et>0){const dt=O.measureText(vt).width*1e3/H*z;if(Et<dt&&this.isFontSubpixelAAEnabled){const R=Et/dt;pt=!0,O.save(),O.scale(R,1),K/=R}else Et!==dt&&(K+=(Et-dt)/2e3*H/z)}if(this.contentVisible&&(ft.isInFont||P.missingFile)){if(st&&!Pt)O.fillText(vt,K,yt);else if(this.paintChar(vt,K,yt,J),Pt){const dt=K+H*Pt.offset.x/z,R=yt-H*Pt.offset.y/z;this.paintChar(Pt.fontChar,dt,R,J)}}let Mt;b?Mt=Et*V-Tt*D:Mt=Et*V+Tt*D,nt+=Mt,pt&&O.restore()}b?p.y-=nt:p.x+=nt*t,O.restore(),this.compose()}showType3Text(u){const p=this.ctx,P=this.current,H=P.font,O=P.fontSize,z=P.fontDirection,G=H.vertical?1:-1,M=P.charSpacing,D=P.wordSpacing,t=P.textHScale*z,s=P.fontMatrix||h.FONT_IDENTITY_MATRIX,b=u.length,E=P.textRenderingMode===h.TextRenderingMode.INVISIBLE;let C,V,st,J;if(!(E||O===0)){for(this._cachedScaleForStroking=null,this._cachedGetSinglePixelWidth=null,p.save(),p.transform(...P.textMatrix),p.translate(P.x,P.y),p.scale(t,z),C=0;C<b;++C){if(V=u[C],typeof V=="number"){J=G*V*O/1e3,this.ctx.translate(J,0),P.x+=J*t;continue}const rt=(V.isSpace?D:0)+M,ot=H.charProcOperatorList[V.operatorListId];if(!ot){(0,h.warn)(`Type3 character "${V.operatorListId}" is not available.`);continue}this.contentVisible&&(this.processingType3=V,this.save(),p.scale(O,O),p.transform(...s),this.executeOperatorList(ot),this.restore()),st=h.Util.applyTransform([V.width,0],s)[0]*O+rt,p.translate(st,0),P.x+=st*t}p.restore(),this.processingType3=null}}setCharWidth(u,p){}setCharWidthAndBounds(u,p,P,H,O,z){this.ctx.rect(P,H,O-P,z-H),this.ctx.clip(),this.endPath()}getColorN_Pattern(u){let p;if(u[0]==="TilingPattern"){const P=u[1],H=this.baseTransform||(0,_.getCurrentTransform)(this.ctx),O={createCanvasGraphics:z=>new At(z,this.commonObjs,this.objs,this.canvasFactory,this.filterFactory,{optionalContentConfig:this.optionalContentConfig,markedContentStack:this.markedContentStack})};p=new W.TilingPattern(u,P,this.ctx,O,H)}else p=this._getPattern(u[1],u[2]);return p}setStrokeColorN(){this.current.strokeColor=this.getColorN_Pattern(arguments)}setFillColorN(){this.current.fillColor=this.getColorN_Pattern(arguments),this.current.patternFill=!0}setStrokeRGBColor(u,p,P){const H=h.Util.makeHexColor(u,p,P);this.ctx.strokeStyle=H,this.current.strokeColor=H}setFillRGBColor(u,p,P){const H=h.Util.makeHexColor(u,p,P);this.ctx.fillStyle=H,this.current.fillColor=H,this.current.patternFill=!1}_getPattern(u,p=null){let P;return this.cachedPatterns.has(u)?P=this.cachedPatterns.get(u):(P=(0,W.getShadingPattern)(this.getObject(u)),this.cachedPatterns.set(u,P)),p&&(P.matrix=p),P}shadingFill(u){if(!this.contentVisible)return;const p=this.ctx;this.save();const P=this._getPattern(u);p.fillStyle=P.getPattern(p,this,(0,_.getCurrentTransformInverse)(p),W.PathType.SHADING);const H=(0,_.getCurrentTransformInverse)(p);if(H){const O=p.canvas,z=O.width,G=O.height,M=h.Util.applyTransform([0,0],H),D=h.Util.applyTransform([0,G],H),t=h.Util.applyTransform([z,0],H),s=h.Util.applyTransform([z,G],H),b=Math.min(M[0],D[0],t[0],s[0]),E=Math.min(M[1],D[1],t[1],s[1]),C=Math.max(M[0],D[0],t[0],s[0]),V=Math.max(M[1],D[1],t[1],s[1]);this.ctx.fillRect(b,E,C-b,V-E)}else this.ctx.fillRect(-1e10,-1e10,2e10,2e10);this.compose(this.current.getClippedPathBoundingBox()),this.restore()}beginInlineImage(){(0,h.unreachable)("Should not call beginInlineImage")}beginImageData(){(0,h.unreachable)("Should not call beginImageData")}paintFormXObjectBegin(u,p){if(this.contentVisible&&(this.save(),this.baseTransformStack.push(this.baseTransform),Array.isArray(u)&&u.length===6&&this.transform(...u),this.baseTransform=(0,_.getCurrentTransform)(this.ctx),p)){const P=p[2]-p[0],H=p[3]-p[1];this.ctx.rect(p[0],p[1],P,H),this.current.updateRectMinMax((0,_.getCurrentTransform)(this.ctx),p),this.clip(),this.endPath()}}paintFormXObjectEnd(){this.contentVisible&&(this.restore(),this.baseTransform=this.baseTransformStack.pop())}beginGroup(u){if(!this.contentVisible)return;this.save(),this.inSMaskMode&&(this.endSMaskMode(),this.current.activeSMask=null);const p=this.ctx;u.isolated||(0,h.info)("TODO: Support non-isolated groups."),u.knockout&&(0,h.warn)("Knockout groups not supported.");const P=(0,_.getCurrentTransform)(p);if(u.matrix&&p.transform(...u.matrix),!u.bbox)throw new Error("Bounding box is required.");let H=h.Util.getAxialAlignedBoundingBox(u.bbox,(0,_.getCurrentTransform)(p));const O=[0,0,p.canvas.width,p.canvas.height];H=h.Util.intersect(H,O)||[0,0,0,0];const z=Math.floor(H[0]),G=Math.floor(H[1]);let M=Math.max(Math.ceil(H[2])-z,1),D=Math.max(Math.ceil(H[3])-G,1),t=1,s=1;M>v&&(t=M/v,M=v),D>v&&(s=D/v,D=v),this.current.startNewPathAndClipBox([0,0,M,D]);let b="groupAt"+this.groupLevel;u.smask&&(b+="_smask_"+this.smaskCounter++%2);const E=this.cachedCanvases.getCanvas(b,M,D),C=E.context;C.scale(1/t,1/s),C.translate(-z,-G),C.transform(...P),u.smask?this.smaskStack.push({canvas:E.canvas,context:C,offsetX:z,offsetY:G,scaleX:t,scaleY:s,subtype:u.smask.subtype,backdrop:u.smask.backdrop,transferMap:u.smask.transferMap||null,startTransformInverse:null}):(p.setTransform(1,0,0,1,0,0),p.translate(z,G),p.scale(t,s),p.save()),a(p,C),this.ctx=C,this.setGState([["BM","source-over"],["ca",1],["CA",1]]),this.groupStack.push(p),this.groupLevel++}endGroup(u){if(!this.contentVisible)return;this.groupLevel--;const p=this.ctx,P=this.groupStack.pop();if(this.ctx=P,this.ctx.imageSmoothingEnabled=!1,u.smask)this.tempSMask=this.smaskStack.pop(),this.restore();else{this.ctx.restore();const H=(0,_.getCurrentTransform)(this.ctx);this.restore(),this.ctx.save(),this.ctx.setTransform(...H);const O=h.Util.getAxialAlignedBoundingBox([0,0,p.canvas.width,p.canvas.height],H);this.ctx.drawImage(p.canvas,0,0),this.ctx.restore(),this.compose(O)}}beginAnnotation(u,p,P,H,O){if(it(this,ht,ye).call(this),c(this.ctx),this.ctx.save(),this.save(),this.baseTransform&&this.ctx.setTransform(...this.baseTransform),Array.isArray(p)&&p.length===4){const z=p[2]-p[0],G=p[3]-p[1];if(O&&this.annotationCanvasMap){P=P.slice(),P[4]-=p[0],P[5]-=p[1],p=p.slice(),p[0]=p[1]=0,p[2]=z,p[3]=G;const[M,D]=h.Util.singularValueDecompose2dScale((0,_.getCurrentTransform)(this.ctx)),{viewportScale:t}=this,s=Math.ceil(z*this.outputScaleX*t),b=Math.ceil(G*this.outputScaleY*t);this.annotationCanvas=this.canvasFactory.create(s,b);const{canvas:E,context:C}=this.annotationCanvas;this.annotationCanvasMap.set(u,E),this.annotationCanvas.savedCtx=this.ctx,this.ctx=C,this.ctx.save(),this.ctx.setTransform(M,0,0,-D,0,G*D),c(this.ctx)}else c(this.ctx),this.ctx.rect(p[0],p[1],z,G),this.ctx.clip(),this.endPath()}this.current=new w(this.ctx.canvas.width,this.ctx.canvas.height),this.transform(...P),this.transform(...H)}endAnnotation(){this.annotationCanvas&&(this.ctx.restore(),it(this,_t,Ae).call(this),this.ctx=this.annotationCanvas.savedCtx,delete this.annotationCanvas.savedCtx,delete this.annotationCanvas)}paintImageMaskXObject(u){if(!this.contentVisible)return;const p=u.count;u=this.getObject(u.data,u),u.count=p;const P=this.ctx,H=this.processingType3;if(H&&(H.compiled===void 0&&(H.compiled=S(u)),H.compiled)){H.compiled(P);return}const O=this._createMaskCanvas(u),z=O.canvas;P.save(),P.setTransform(1,0,0,1,0,0),P.drawImage(z,O.offsetX,O.offsetY),P.restore(),this.compose()}paintImageMaskXObjectRepeat(u,p,P=0,H=0,O,z){if(!this.contentVisible)return;u=this.getObject(u.data,u);const G=this.ctx;G.save();const M=(0,_.getCurrentTransform)(G);G.transform(p,P,H,O,0,0);const D=this._createMaskCanvas(u);G.setTransform(1,0,0,1,D.offsetX-M[4],D.offsetY-M[5]);for(let t=0,s=z.length;t<s;t+=2){const b=h.Util.transform(M,[p,P,H,O,z[t],z[t+1]]),[E,C]=h.Util.applyTransform([0,0],b);G.drawImage(D.canvas,E,C)}G.restore(),this.compose()}paintImageMaskXObjectGroup(u){if(!this.contentVisible)return;const p=this.ctx,P=this.current.fillColor,H=this.current.patternFill;for(const O of u){const{data:z,width:G,height:M,transform:D}=O,t=this.cachedCanvases.getCanvas("maskCanvas",G,M),s=t.context;s.save();const b=this.getObject(z,O);e(s,b),s.globalCompositeOperation="source-in",s.fillStyle=H?P.getPattern(s,this,(0,_.getCurrentTransformInverse)(p),W.PathType.FILL):P,s.fillRect(0,0,G,M),s.restore(),p.save(),p.transform(...D),p.scale(1,-1),A(p,t.canvas,0,0,G,M,0,-1,1,1),p.restore()}this.compose()}paintImageXObject(u){if(!this.contentVisible)return;const p=this.getObject(u);if(!p){(0,h.warn)("Dependent image isn't ready yet");return}this.paintInlineImageXObject(p)}paintImageXObjectRepeat(u,p,P,H){if(!this.contentVisible)return;const O=this.getObject(u);if(!O){(0,h.warn)("Dependent image isn't ready yet");return}const z=O.width,G=O.height,M=[];for(let D=0,t=H.length;D<t;D+=2)M.push({transform:[p,0,0,P,H[D],H[D+1]],x:0,y:0,w:z,h:G});this.paintInlineImageXObjectGroup(O,M)}applyTransferMapsToCanvas(u){return this.current.transferMaps!=="none"&&(u.filter=this.current.transferMaps,u.drawImage(u.canvas,0,0),u.filter="none"),u.canvas}applyTransferMapsToBitmap(u){if(this.current.transferMaps==="none")return u.bitmap;const{bitmap:p,width:P,height:H}=u,O=this.cachedCanvases.getCanvas("inlineImage",P,H),z=O.context;return z.filter=this.current.transferMaps,z.drawImage(p,0,0),z.filter="none",O.canvas}paintInlineImageXObject(u){if(!this.contentVisible)return;const p=u.width,P=u.height,H=this.ctx;this.save(),Z.isNodeJS||(H.filter="none"),H.scale(1/p,-1/P);let O;if(u.bitmap)O=this.applyTransferMapsToBitmap(u);else if(typeof HTMLElement=="function"&&u instanceof HTMLElement||!u.data)O=u;else{const M=this.cachedCanvases.getCanvas("inlineImage",p,P).context;m(M,u),O=this.applyTransferMapsToCanvas(M)}const z=this._scaleImage(O,(0,_.getCurrentTransformInverse)(H));H.imageSmoothingEnabled=$((0,_.getCurrentTransform)(H),u.interpolate),A(H,z.img,0,0,z.paintWidth,z.paintHeight,0,-P,p,P),this.compose(),this.restore()}paintInlineImageXObjectGroup(u,p){if(!this.contentVisible)return;const P=this.ctx;let H;if(u.bitmap)H=u.bitmap;else{const O=u.width,z=u.height,M=this.cachedCanvases.getCanvas("inlineImage",O,z).context;m(M,u),H=this.applyTransferMapsToCanvas(M)}for(const O of p)P.save(),P.transform(...O.transform),P.scale(1,-1),A(P,H,O.x,O.y,O.w,O.h,0,-1,1,1),P.restore();this.compose()}paintSolidColorImageMask(){this.contentVisible&&(this.ctx.fillRect(0,0,1,1),this.compose())}markPoint(u){}markPointProps(u,p){}beginMarkedContent(u){this.markedContentStack.push({visible:!0})}beginMarkedContentProps(u,p){u==="OC"?this.markedContentStack.push({visible:this.optionalContentConfig.isVisible(p)}):this.markedContentStack.push({visible:!0}),this.contentVisible=this.isContentVisible()}endMarkedContent(){this.markedContentStack.pop(),this.contentVisible=this.isContentVisible()}beginCompat(){}endCompat(){}consumePath(u){const p=this.current.isEmptyClip();this.pendingClip&&this.current.updateClipFromPath(),this.pendingClip||this.compose(u);const P=this.ctx;this.pendingClip&&(p||(this.pendingClip===ut?P.clip("evenodd"):P.clip()),this.pendingClip=null),this.current.startNewPathAndClipBox(this.current.clipBox),P.beginPath()}getSinglePixelWidth(){if(!this._cachedGetSinglePixelWidth){const u=(0,_.getCurrentTransform)(this.ctx);if(u[1]===0&&u[2]===0)this._cachedGetSinglePixelWidth=1/Math.min(Math.abs(u[0]),Math.abs(u[3]));else{const p=Math.abs(u[0]*u[3]-u[2]*u[1]),P=Math.hypot(u[0],u[2]),H=Math.hypot(u[1],u[3]);this._cachedGetSinglePixelWidth=Math.max(P,H)/p}}return this._cachedGetSinglePixelWidth}getScaleForStroking(){if(!this._cachedScaleForStroking){const{lineWidth:u}=this.current,p=(0,_.getCurrentTransform)(this.ctx);let P,H;if(p[1]===0&&p[2]===0){const O=Math.abs(p[0]),z=Math.abs(p[3]);if(u===0)P=1/O,H=1/z;else{const G=O*u,M=z*u;P=G<1?1/G:1,H=M<1?1/M:1}}else{const O=Math.abs(p[0]*p[3]-p[2]*p[1]),z=Math.hypot(p[0],p[1]),G=Math.hypot(p[2],p[3]);if(u===0)P=G/O,H=z/O;else{const M=u*O;P=G>M?G/M:1,H=z>M?z/M:1}}this._cachedScaleForStroking=[P,H]}return this._cachedScaleForStroking}rescaleAndStroke(u){const{ctx:p}=this,{lineWidth:P}=this.current,[H,O]=this.getScaleForStroking();if(p.lineWidth=P||1,H===1&&O===1){p.stroke();return}let z,G,M;u&&(z=(0,_.getCurrentTransform)(p),G=p.getLineDash().slice(),M=p.lineDashOffset),p.scale(H,O);const D=Math.max(H,O);p.setLineDash(p.getLineDash().map(t=>t/D)),p.lineDashOffset/=D,p.stroke(),u&&(p.setTransform(...z),p.setLineDash(G),p.lineDashOffset=M)}isContentVisible(){for(let u=this.markedContentStack.length-1;u>=0;u--)if(!this.markedContentStack[u].visible)return!1;return!0}};let lt=At;ht=new WeakSet,ye=function(){for(;this.stateStack.length||this.inSMaskMode;)this.restore();this.ctx.restore(),this.transparentCanvas&&(this.ctx=this.compositeCtx,this.ctx.save(),this.ctx.setTransform(1,0,0,1,0,0),this.ctx.drawImage(this.transparentCanvas,0,0),this.ctx.restore(),this.transparentCanvas=null)},_t=new WeakSet,Ae=function(){if(this.pageColors){const u=this.filterFactory.addHCMFilter(this.pageColors.foreground,this.pageColors.background);if(u!=="none"){const p=this.ctx.filter;this.ctx.filter=u,this.ctx.drawImage(this.ctx.canvas,0,0),this.ctx.filter=p}}},i.CanvasGraphics=lt;for(const X in h.OPS)lt.prototype[X]!==void 0&&(lt.prototype[h.OPS[X]]=lt.prototype[X])},(B,i,U)=>{Object.defineProperty(i,"__esModule",{value:!0}),i.TilingPattern=i.PathType=void 0,i.getShadingPattern=x;var h=U(1),_=U(6);const W={FILL:"Fill",STROKE:"Stroke",SHADING:"Shading"};i.PathType=W;function q(A,S){if(!S)return;const w=S[2]-S[0],m=S[3]-S[1],e=new Path2D;e.rect(S[0],S[1],w,m),A.clip(e)}class Z{constructor(){this.constructor===Z&&(0,h.unreachable)("Cannot initialize BaseShadingPattern.")}getPattern(){(0,h.unreachable)("Abstract method `getPattern` called.")}}class L extends Z{constructor(S){super(),this._type=S[1],this._bbox=S[2],this._colorStops=S[3],this._p0=S[4],this._p1=S[5],this._r0=S[6],this._r1=S[7],this.matrix=null}_createGradient(S){let w;this._type==="axial"?w=S.createLinearGradient(this._p0[0],this._p0[1],this._p1[0],this._p1[1]):this._type==="radial"&&(w=S.createRadialGradient(this._p0[0],this._p0[1],this._r0,this._p1[0],this._p1[1],this._r1));for(const m of this._colorStops)w.addColorStop(m[0],m[1]);return w}getPattern(S,w,m,e){let a;if(e===W.STROKE||e===W.FILL){const c=w.current.getClippedPathBoundingBox(e,(0,_.getCurrentTransform)(S))||[0,0,0,0],o=Math.ceil(c[2]-c[0])||1,d=Math.ceil(c[3]-c[1])||1,k=w.cachedCanvases.getCanvas("pattern",o,d,!0),n=k.context;n.clearRect(0,0,n.canvas.width,n.canvas.height),n.beginPath(),n.rect(0,0,n.canvas.width,n.canvas.height),n.translate(-c[0],-c[1]),m=h.Util.transform(m,[1,0,0,1,c[0],c[1]]),n.transform(...w.baseTransform),this.matrix&&n.transform(...this.matrix),q(n,this._bbox),n.fillStyle=this._createGradient(n),n.fill(),a=S.createPattern(k.canvas,"no-repeat");const j=new DOMMatrix(m);a.setTransform(j)}else q(S,this._bbox),a=this._createGradient(S);return a}}function F(A,S,w,m,e,a,c,o){const d=S.coords,k=S.colors,n=A.data,j=A.width*4;let $;d[w+1]>d[m+1]&&($=w,w=m,m=$,$=a,a=c,c=$),d[m+1]>d[e+1]&&($=m,m=e,e=$,$=c,c=o,o=$),d[w+1]>d[m+1]&&($=w,w=m,m=$,$=a,a=c,c=$);const Y=(d[w]+S.offsetX)*S.scaleX,Q=(d[w+1]+S.offsetY)*S.scaleY,et=(d[m]+S.offsetX)*S.scaleX,ut=(d[m+1]+S.offsetY)*S.scaleY,lt=(d[e]+S.offsetX)*S.scaleX,ht=(d[e+1]+S.offsetY)*S.scaleY;if(Q>=ht)return;const mt=k[a],_t=k[a+1],St=k[a+2],At=k[c],X=k[c+1],u=k[c+2],p=k[o],P=k[o+1],H=k[o+2],O=Math.round(Q),z=Math.round(ht);let G,M,D,t,s,b,E,C;for(let V=O;V<=z;V++){if(V<ut){let nt;V<Q?nt=0:nt=(Q-V)/(Q-ut),G=Y-(Y-et)*nt,M=mt-(mt-At)*nt,D=_t-(_t-X)*nt,t=St-(St-u)*nt}else{let nt;V>ht?nt=1:ut===ht?nt=0:nt=(ut-V)/(ut-ht),G=et-(et-lt)*nt,M=At-(At-p)*nt,D=X-(X-P)*nt,t=u-(u-H)*nt}let st;V<Q?st=0:V>ht?st=1:st=(Q-V)/(Q-ht),s=Y-(Y-lt)*st,b=mt-(mt-p)*st,E=_t-(_t-P)*st,C=St-(St-H)*st;const J=Math.round(Math.min(G,s)),rt=Math.round(Math.max(G,s));let ot=j*V+J*4;for(let nt=J;nt<=rt;nt++)st=(G-nt)/(G-s),st<0?st=0:st>1&&(st=1),n[ot++]=M-(M-b)*st|0,n[ot++]=D-(D-E)*st|0,n[ot++]=t-(t-C)*st|0,n[ot++]=255}}function v(A,S,w){const m=S.coords,e=S.colors;let a,c;switch(S.type){case"lattice":const o=S.verticesPerRow,d=Math.floor(m.length/o)-1,k=o-1;for(a=0;a<d;a++){let n=a*o;for(let j=0;j<k;j++,n++)F(A,w,m[n],m[n+1],m[n+o],e[n],e[n+1],e[n+o]),F(A,w,m[n+o+1],m[n+1],m[n+o],e[n+o+1],e[n+1],e[n+o])}break;case"triangles":for(a=0,c=m.length;a<c;a+=3)F(A,w,m[a],m[a+1],m[a+2],e[a],e[a+1],e[a+2]);break;default:throw new Error("illegal figure")}}class N extends Z{constructor(S){super(),this._coords=S[2],this._colors=S[3],this._figures=S[4],this._bounds=S[5],this._bbox=S[7],this._background=S[8],this.matrix=null}_createMeshCanvas(S,w,m){const o=Math.floor(this._bounds[0]),d=Math.floor(this._bounds[1]),k=Math.ceil(this._bounds[2])-o,n=Math.ceil(this._bounds[3])-d,j=Math.min(Math.ceil(Math.abs(k*S[0]*1.1)),3e3),$=Math.min(Math.ceil(Math.abs(n*S[1]*1.1)),3e3),Y=k/j,Q=n/$,et={coords:this._coords,colors:this._colors,offsetX:-o,offsetY:-d,scaleX:1/Y,scaleY:1/Q},ut=j+2*2,lt=$+2*2,ht=m.getCanvas("mesh",ut,lt,!1),mt=ht.context,_t=mt.createImageData(j,$);if(w){const At=_t.data;for(let X=0,u=At.length;X<u;X+=4)At[X]=w[0],At[X+1]=w[1],At[X+2]=w[2],At[X+3]=255}for(const At of this._figures)v(_t,At,et);return mt.putImageData(_t,2,2),{canvas:ht.canvas,offsetX:o-2*Y,offsetY:d-2*Q,scaleX:Y,scaleY:Q}}getPattern(S,w,m,e){q(S,this._bbox);let a;if(e===W.SHADING)a=h.Util.singularValueDecompose2dScale((0,_.getCurrentTransform)(S));else if(a=h.Util.singularValueDecompose2dScale(w.baseTransform),this.matrix){const o=h.Util.singularValueDecompose2dScale(this.matrix);a=[a[0]*o[0],a[1]*o[1]]}const c=this._createMeshCanvas(a,e===W.SHADING?null:this._background,w.cachedCanvases);return e!==W.SHADING&&(S.setTransform(...w.baseTransform),this.matrix&&S.transform(...this.matrix)),S.translate(c.offsetX,c.offsetY),S.scale(c.scaleX,c.scaleY),S.createPattern(c.canvas,"no-repeat")}}class T extends Z{getPattern(){return"hotpink"}}function x(A){switch(A[0]){case"RadialAxial":return new L(A);case"Mesh":return new N(A);case"Dummy":return new T}throw new Error(`Unknown IR type: ${A[0]}`)}const g={COLORED:1,UNCOLORED:2},l=class{constructor(S,w,m,e,a){this.operatorList=S[2],this.matrix=S[3]||[1,0,0,1,0,0],this.bbox=S[4],this.xstep=S[5],this.ystep=S[6],this.paintType=S[7],this.tilingType=S[8],this.color=w,this.ctx=m,this.canvasGraphicsFactory=e,this.baseTransform=a}createPatternCanvas(S){const w=this.operatorList,m=this.bbox,e=this.xstep,a=this.ystep,c=this.paintType,o=this.tilingType,d=this.color,k=this.canvasGraphicsFactory;(0,h.info)("TilingType: "+o);const n=m[0],j=m[1],$=m[2],Y=m[3],Q=h.Util.singularValueDecompose2dScale(this.matrix),et=h.Util.singularValueDecompose2dScale(this.baseTransform),ut=[Q[0]*et[0],Q[1]*et[1]],lt=this.getSizeAndScale(e,this.ctx.canvas.width,ut[0]),ht=this.getSizeAndScale(a,this.ctx.canvas.height,ut[1]),mt=S.cachedCanvases.getCanvas("pattern",lt.size,ht.size,!0),_t=mt.context,St=k.createCanvasGraphics(_t);St.groupLevel=S.groupLevel,this.setFillAndStrokeStyleToContext(St,c,d);let At=n,X=j,u=$,p=Y;return n<0&&(At=0,u+=Math.abs(n)),j<0&&(X=0,p+=Math.abs(j)),_t.translate(-(lt.scale*At),-(ht.scale*X)),St.transform(lt.scale,0,0,ht.scale,0,0),_t.save(),this.clipBbox(St,At,X,u,p),St.baseTransform=(0,_.getCurrentTransform)(St.ctx),St.executeOperatorList(w),St.endDrawing(),{canvas:mt.canvas,scaleX:lt.scale,scaleY:ht.scale,offsetX:At,offsetY:X}}getSizeAndScale(S,w,m){S=Math.abs(S);const e=Math.max(l.MAX_PATTERN_SIZE,w);let a=Math.ceil(S*m);return a>=e?a=e:m=a/S,{scale:m,size:a}}clipBbox(S,w,m,e,a){const c=e-w,o=a-m;S.ctx.rect(w,m,c,o),S.current.updateRectMinMax((0,_.getCurrentTransform)(S.ctx),[w,m,e,a]),S.clip(),S.endPath()}setFillAndStrokeStyleToContext(S,w,m){const e=S.ctx,a=S.current;switch(w){case g.COLORED:const c=this.ctx;e.fillStyle=c.fillStyle,e.strokeStyle=c.strokeStyle,a.fillColor=c.fillStyle,a.strokeColor=c.strokeStyle;break;case g.UNCOLORED:const o=h.Util.makeHexColor(m[0],m[1],m[2]);e.fillStyle=o,e.strokeStyle=o,a.fillColor=o,a.strokeColor=o;break;default:throw new h.FormatError(`Unsupported paint type: ${w}`)}}getPattern(S,w,m,e){let a=m;e!==W.SHADING&&(a=h.Util.transform(a,w.baseTransform),this.matrix&&(a=h.Util.transform(a,this.matrix)));const c=this.createPatternCanvas(w);let o=new DOMMatrix(a);o=o.translate(c.offsetX,c.offsetY),o=o.scale(1/c.scaleX,1/c.scaleY);const d=S.createPattern(c.canvas,"repeat");return d.setTransform(o),d}};let f=l;Lt(f,"MAX_PATTERN_SIZE",3e3),i.TilingPattern=f},(B,i,U)=>{Object.defineProperty(i,"__esModule",{value:!0}),i.convertBlackAndWhiteToRGBA=W,i.convertToRGBA=_,i.grayToRGBA=Z;var h=U(1);function _(L){switch(L.kind){case h.ImageKind.GRAYSCALE_1BPP:return W(L);case h.ImageKind.RGB_24BPP:return q(L)}return null}function W({src:L,srcPos:F=0,dest:v,width:N,height:T,nonBlackColor:x=4294967295,inverseDecode:g=!1}){const f=h.FeatureTest.isLittleEndian?4278190080:255,[l,A]=g?[x,f]:[f,x],S=N>>3,w=N&7,m=L.length;v=new Uint32Array(v.buffer);let e=0;for(let a=0;a<T;a++){for(const o=F+S;F<o;F++){const d=F<m?L[F]:255;v[e++]=d&128?A:l,v[e++]=d&64?A:l,v[e++]=d&32?A:l,v[e++]=d&16?A:l,v[e++]=d&8?A:l,v[e++]=d&4?A:l,v[e++]=d&2?A:l,v[e++]=d&1?A:l}if(w===0)continue;const c=F<m?L[F++]:255;for(let o=0;o<w;o++)v[e++]=c&1<<7-o?A:l}return{srcPos:F,destPos:e}}function q({src:L,srcPos:F=0,dest:v,destPos:N=0,width:T,height:x}){let g=0;const f=L.length>>2,l=new Uint32Array(L.buffer,F,f);if(h.FeatureTest.isLittleEndian){for(;g<f-2;g+=3,N+=4){const A=l[g],S=l[g+1],w=l[g+2];v[N]=A|4278190080,v[N+1]=A>>>24|S<<8|4278190080,v[N+2]=S>>>16|w<<16|4278190080,v[N+3]=w>>>8|4278190080}for(let A=g*4,S=L.length;A<S;A+=3)v[N++]=L[A]|L[A+1]<<8|L[A+2]<<16|4278190080}else{for(;g<f-2;g+=3,N+=4){const A=l[g],S=l[g+1],w=l[g+2];v[N]=A|255,v[N+1]=A<<24|S>>>8|255,v[N+2]=S<<16|w>>>16|255,v[N+3]=w<<8|255}for(let A=g*4,S=L.length;A<S;A+=3)v[N++]=L[A]<<24|L[A+1]<<16|L[A+2]<<8|255}return{srcPos:F,destPos:N}}function Z(L,F){if(h.FeatureTest.isLittleEndian)for(let v=0,N=L.length;v<N;v++)F[v]=L[v]*65793|4278190080;else for(let v=0,N=L.length;v<N;v++)F[v]=L[v]*16843008|255}},(B,i)=>{Object.defineProperty(i,"__esModule",{value:!0}),i.GlobalWorkerOptions=void 0;const U=Object.create(null);i.GlobalWorkerOptions=U,U.workerPort=null,U.workerSrc=""},(B,i,U)=>{var L,We,v,He,T,oe;Object.defineProperty(i,"__esModule",{value:!0}),i.MessageHandler=void 0;var h=U(1);const _={UNKNOWN:0,DATA:1,ERROR:2},W={UNKNOWN:0,CANCEL:1,CANCEL_COMPLETE:2,CLOSE:3,ENQUEUE:4,ERROR:5,PULL:6,PULL_COMPLETE:7,START_COMPLETE:8};function q(g){switch(g instanceof Error||typeof g=="object"&&g!==null||(0,h.unreachable)('wrapReason: Expected "reason" to be a (possibly cloned) Error.'),g.name){case"AbortException":return new h.AbortException(g.message);case"MissingPDFException":return new h.MissingPDFException(g.message);case"PasswordException":return new h.PasswordException(g.message,g.code);case"UnexpectedResponseException":return new h.UnexpectedResponseException(g.message,g.status);case"UnknownErrorException":return new h.UnknownErrorException(g.message,g.details);default:return new h.UnknownErrorException(g.message,g.toString())}}class Z{constructor(f,l,A){tt(this,L);tt(this,v);tt(this,T);this.sourceName=f,this.targetName=l,this.comObj=A,this.callbackId=1,this.streamId=1,this.streamSinks=Object.create(null),this.streamControllers=Object.create(null),this.callbackCapabilities=Object.create(null),this.actionHandler=Object.create(null),this._onComObjOnMessage=S=>{const w=S.data;if(w.targetName!==this.sourceName)return;if(w.stream){it(this,v,He).call(this,w);return}if(w.callback){const e=w.callbackId,a=this.callbackCapabilities[e];if(!a)throw new Error(`Cannot resolve callback ${e}`);if(delete this.callbackCapabilities[e],w.callback===_.DATA)a.resolve(w.data);else if(w.callback===_.ERROR)a.reject(q(w.reason));else throw new Error("Unexpected callback case");return}const m=this.actionHandler[w.action];if(!m)throw new Error(`Unknown action from worker: ${w.action}`);if(w.callbackId){const e=this.sourceName,a=w.sourceName;new Promise(function(c){c(m(w.data))}).then(function(c){A.postMessage({sourceName:e,targetName:a,callback:_.DATA,callbackId:w.callbackId,data:c})},function(c){A.postMessage({sourceName:e,targetName:a,callback:_.ERROR,callbackId:w.callbackId,reason:q(c)})});return}if(w.streamId){it(this,L,We).call(this,w);return}m(w.data)},A.addEventListener("message",this._onComObjOnMessage)}on(f,l){const A=this.actionHandler;if(A[f])throw new Error(`There is already an actionName called "${f}"`);A[f]=l}send(f,l,A){this.comObj.postMessage({sourceName:this.sourceName,targetName:this.targetName,action:f,data:l},A)}sendWithPromise(f,l,A){const S=this.callbackId++,w=new h.PromiseCapability;this.callbackCapabilities[S]=w;try{this.comObj.postMessage({sourceName:this.sourceName,targetName:this.targetName,action:f,callbackId:S,data:l},A)}catch(m){w.reject(m)}return w.promise}sendWithStream(f,l,A,S){const w=this.streamId++,m=this.sourceName,e=this.targetName,a=this.comObj;return new ReadableStream({start:c=>{const o=new h.PromiseCapability;return this.streamControllers[w]={controller:c,startCall:o,pullCall:null,cancelCall:null,isClosed:!1},a.postMessage({sourceName:m,targetName:e,action:f,streamId:w,data:l,desiredSize:c.desiredSize},S),o.promise},pull:c=>{const o=new h.PromiseCapability;return this.streamControllers[w].pullCall=o,a.postMessage({sourceName:m,targetName:e,stream:W.PULL,streamId:w,desiredSize:c.desiredSize}),o.promise},cancel:c=>{(0,h.assert)(c instanceof Error,"cancel must have a valid reason");const o=new h.PromiseCapability;return this.streamControllers[w].cancelCall=o,this.streamControllers[w].isClosed=!0,a.postMessage({sourceName:m,targetName:e,stream:W.CANCEL,streamId:w,reason:q(c)}),o.promise}},A)}destroy(){this.comObj.removeEventListener("message",this._onComObjOnMessage)}}L=new WeakSet,We=function(f){const l=f.streamId,A=this.sourceName,S=f.sourceName,w=this.comObj,m=this,e=this.actionHandler[f.action],a={enqueue(c,o=1,d){if(this.isCancelled)return;const k=this.desiredSize;this.desiredSize-=o,k>0&&this.desiredSize<=0&&(this.sinkCapability=new h.PromiseCapability,this.ready=this.sinkCapability.promise),w.postMessage({sourceName:A,targetName:S,stream:W.ENQUEUE,streamId:l,chunk:c},d)},close(){this.isCancelled||(this.isCancelled=!0,w.postMessage({sourceName:A,targetName:S,stream:W.CLOSE,streamId:l}),delete m.streamSinks[l])},error(c){(0,h.assert)(c instanceof Error,"error must have a valid reason"),!this.isCancelled&&(this.isCancelled=!0,w.postMessage({sourceName:A,targetName:S,stream:W.ERROR,streamId:l,reason:q(c)}))},sinkCapability:new h.PromiseCapability,onPull:null,onCancel:null,isCancelled:!1,desiredSize:f.desiredSize,ready:null};a.sinkCapability.resolve(),a.ready=a.sinkCapability.promise,this.streamSinks[l]=a,new Promise(function(c){c(e(f.data,a))}).then(function(){w.postMessage({sourceName:A,targetName:S,stream:W.START_COMPLETE,streamId:l,success:!0})},function(c){w.postMessage({sourceName:A,targetName:S,stream:W.START_COMPLETE,streamId:l,reason:q(c)})})},v=new WeakSet,He=function(f){const l=f.streamId,A=this.sourceName,S=f.sourceName,w=this.comObj,m=this.streamControllers[l],e=this.streamSinks[l];switch(f.stream){case W.START_COMPLETE:f.success?m.startCall.resolve():m.startCall.reject(q(f.reason));break;case W.PULL_COMPLETE:f.success?m.pullCall.resolve():m.pullCall.reject(q(f.reason));break;case W.PULL:if(!e){w.postMessage({sourceName:A,targetName:S,stream:W.PULL_COMPLETE,streamId:l,success:!0});break}e.desiredSize<=0&&f.desiredSize>0&&e.sinkCapability.resolve(),e.desiredSize=f.desiredSize,new Promise(function(a){var c;a((c=e.onPull)==null?void 0:c.call(e))}).then(function(){w.postMessage({sourceName:A,targetName:S,stream:W.PULL_COMPLETE,streamId:l,success:!0})},function(a){w.postMessage({sourceName:A,targetName:S,stream:W.PULL_COMPLETE,streamId:l,reason:q(a)})});break;case W.ENQUEUE:if((0,h.assert)(m,"enqueue should have stream controller"),m.isClosed)break;m.controller.enqueue(f.chunk);break;case W.CLOSE:if((0,h.assert)(m,"close should have stream controller"),m.isClosed)break;m.isClosed=!0,m.controller.close(),it(this,T,oe).call(this,m,l);break;case W.ERROR:(0,h.assert)(m,"error should have stream controller"),m.controller.error(q(f.reason)),it(this,T,oe).call(this,m,l);break;case W.CANCEL_COMPLETE:f.success?m.cancelCall.resolve():m.cancelCall.reject(q(f.reason)),it(this,T,oe).call(this,m,l);break;case W.CANCEL:if(!e)break;new Promise(function(a){var c;a((c=e.onCancel)==null?void 0:c.call(e,q(f.reason)))}).then(function(){w.postMessage({sourceName:A,targetName:S,stream:W.CANCEL_COMPLETE,streamId:l,success:!0})},function(a){w.postMessage({sourceName:A,targetName:S,stream:W.CANCEL_COMPLETE,streamId:l,reason:q(a)})}),e.sinkCapability.reject(q(f.reason)),e.isCancelled=!0,delete this.streamSinks[l];break;default:throw new Error("Unexpected stream case")}},T=new WeakSet,oe=async function(f,l){var A,S,w;await Promise.allSettled([(A=f.startCall)==null?void 0:A.promise,(S=f.pullCall)==null?void 0:S.promise,(w=f.cancelCall)==null?void 0:w.promise]),delete this.streamControllers[l]},i.MessageHandler=Z},(B,i,U)=>{var W,q;Object.defineProperty(i,"__esModule",{value:!0}),i.Metadata=void 0;var h=U(1);class _{constructor({parsedData:L,rawData:F}){tt(this,W,void 0);tt(this,q,void 0);gt(this,W,L),gt(this,q,F)}getRaw(){return y(this,q)}get(L){return y(this,W).get(L)??null}getAll(){return(0,h.objectFromMap)(y(this,W))}has(L){return y(this,W).has(L)}}W=new WeakMap,q=new WeakMap,i.Metadata=_},(B,i,U)=>{var L,F,v,N,T,x,_e;Object.defineProperty(i,"__esModule",{value:!0}),i.OptionalContentConfig=void 0;var h=U(1),_=U(8);const W=Symbol("INTERNAL");class q{constructor(l,A){tt(this,L,!0);this.name=l,this.intent=A}get visible(){return y(this,L)}_setVisible(l,A){l!==W&&(0,h.unreachable)("Internal method `_setVisible` called."),gt(this,L,A)}}L=new WeakMap;class Z{constructor(l){tt(this,x);tt(this,F,null);tt(this,v,new Map);tt(this,N,null);tt(this,T,null);if(this.name=null,this.creator=null,l!==null){this.name=l.name,this.creator=l.creator,gt(this,T,l.order);for(const A of l.groups)y(this,v).set(A.id,new q(A.name,A.intent));if(l.baseState==="OFF")for(const A of y(this,v).values())A._setVisible(W,!1);for(const A of l.on)y(this,v).get(A)._setVisible(W,!0);for(const A of l.off)y(this,v).get(A)._setVisible(W,!1);gt(this,N,this.getHash())}}isVisible(l){if(y(this,v).size===0)return!0;if(!l)return(0,h.warn)("Optional content group not defined."),!0;if(l.type==="OCG")return y(this,v).has(l.id)?y(this,v).get(l.id).visible:((0,h.warn)(`Optional content group not found: ${l.id}`),!0);if(l.type==="OCMD"){if(l.expression)return it(this,x,_e).call(this,l.expression);if(!l.policy||l.policy==="AnyOn"){for(const A of l.ids){if(!y(this,v).has(A))return(0,h.warn)(`Optional content group not found: ${A}`),!0;if(y(this,v).get(A).visible)return!0}return!1}else if(l.policy==="AllOn"){for(const A of l.ids){if(!y(this,v).has(A))return(0,h.warn)(`Optional content group not found: ${A}`),!0;if(!y(this,v).get(A).visible)return!1}return!0}else if(l.policy==="AnyOff"){for(const A of l.ids){if(!y(this,v).has(A))return(0,h.warn)(`Optional content group not found: ${A}`),!0;if(!y(this,v).get(A).visible)return!0}return!1}else if(l.policy==="AllOff"){for(const A of l.ids){if(!y(this,v).has(A))return(0,h.warn)(`Optional content group not found: ${A}`),!0;if(y(this,v).get(A).visible)return!1}return!0}return(0,h.warn)(`Unknown optional content policy ${l.policy}.`),!0}return(0,h.warn)(`Unknown group type ${l.type}.`),!0}setVisibility(l,A=!0){if(!y(this,v).has(l)){(0,h.warn)(`Optional content group not found: ${l}`);return}y(this,v).get(l)._setVisible(W,!!A),gt(this,F,null)}get hasInitialVisibility(){return this.getHash()===y(this,N)}getOrder(){return y(this,v).size?y(this,T)?y(this,T).slice():[...y(this,v).keys()]:null}getGroups(){return y(this,v).size>0?(0,h.objectFromMap)(y(this,v)):null}getGroup(l){return y(this,v).get(l)||null}getHash(){if(y(this,F)!==null)return y(this,F);const l=new _.MurmurHash3_64;for(const[A,S]of y(this,v))l.update(`${A}:${S.visible}`);return gt(this,F,l.hexdigest())}}F=new WeakMap,v=new WeakMap,N=new WeakMap,T=new WeakMap,x=new WeakSet,_e=function(l){const A=l.length;if(A<2)return!0;const S=l[0];for(let w=1;w<A;w++){const m=l[w];let e;if(Array.isArray(m))e=it(this,x,_e).call(this,m);else if(y(this,v).has(m))e=y(this,v).get(m).visible;else return(0,h.warn)(`Optional content group not found: ${m}`),!0;switch(S){case"And":if(!e)return!1;break;case"Or":if(e)return!0;break;case"Not":return!e;default:return!0}}return S==="And"},i.OptionalContentConfig=Z},(B,i,U)=>{Object.defineProperty(i,"__esModule",{value:!0}),i.PDFDataTransportStream=void 0;var h=U(1),_=U(6);class W{constructor({length:F,initialData:v,progressiveDone:N=!1,contentDispositionFilename:T=null,disableRange:x=!1,disableStream:g=!1},f){if((0,h.assert)(f,'PDFDataTransportStream - missing required "pdfDataRangeTransport" argument.'),this._queuedChunks=[],this._progressiveDone=N,this._contentDispositionFilename=T,(v==null?void 0:v.length)>0){const l=v instanceof Uint8Array&&v.byteLength===v.buffer.byteLength?v.buffer:new Uint8Array(v).buffer;this._queuedChunks.push(l)}this._pdfDataRangeTransport=f,this._isStreamingSupported=!g,this._isRangeSupported=!x,this._contentLength=F,this._fullRequestReader=null,this._rangeReaders=[],this._pdfDataRangeTransport.addRangeListener((l,A)=>{this._onReceiveData({begin:l,chunk:A})}),this._pdfDataRangeTransport.addProgressListener((l,A)=>{this._onProgress({loaded:l,total:A})}),this._pdfDataRangeTransport.addProgressiveReadListener(l=>{this._onReceiveData({chunk:l})}),this._pdfDataRangeTransport.addProgressiveDoneListener(()=>{this._onProgressiveDone()}),this._pdfDataRangeTransport.transportReady()}_onReceiveData({begin:F,chunk:v}){const N=v instanceof Uint8Array&&v.byteLength===v.buffer.byteLength?v.buffer:new Uint8Array(v).buffer;if(F===void 0)this._fullRequestReader?this._fullRequestReader._enqueue(N):this._queuedChunks.push(N);else{const T=this._rangeReaders.some(function(x){return x._begin!==F?!1:(x._enqueue(N),!0)});(0,h.assert)(T,"_onReceiveData - no `PDFDataTransportStreamRangeReader` instance found.")}}get _progressiveDataLength(){var F;return((F=this._fullRequestReader)==null?void 0:F._loaded)??0}_onProgress(F){var v,N,T,x;F.total===void 0?(N=(v=this._rangeReaders[0])==null?void 0:v.onProgress)==null||N.call(v,{loaded:F.loaded}):(x=(T=this._fullRequestReader)==null?void 0:T.onProgress)==null||x.call(T,{loaded:F.loaded,total:F.total})}_onProgressiveDone(){var F;(F=this._fullRequestReader)==null||F.progressiveDone(),this._progressiveDone=!0}_removeRangeReader(F){const v=this._rangeReaders.indexOf(F);v>=0&&this._rangeReaders.splice(v,1)}getFullReader(){(0,h.assert)(!this._fullRequestReader,"PDFDataTransportStream.getFullReader can only be called once.");const F=this._queuedChunks;return this._queuedChunks=null,new q(this,F,this._progressiveDone,this._contentDispositionFilename)}getRangeReader(F,v){if(v<=this._progressiveDataLength)return null;const N=new Z(this,F,v);return this._pdfDataRangeTransport.requestDataRange(F,v),this._rangeReaders.push(N),N}cancelAllRequests(F){var v;(v=this._fullRequestReader)==null||v.cancel(F);for(const N of this._rangeReaders.slice(0))N.cancel(F);this._pdfDataRangeTransport.abort()}}i.PDFDataTransportStream=W;class q{constructor(F,v,N=!1,T=null){this._stream=F,this._done=N||!1,this._filename=(0,_.isPdfFile)(T)?T:null,this._queuedChunks=v||[],this._loaded=0;for(const x of this._queuedChunks)this._loaded+=x.byteLength;this._requests=[],this._headersReady=Promise.resolve(),F._fullRequestReader=this,this.onProgress=null}_enqueue(F){this._done||(this._requests.length>0?this._requests.shift().resolve({value:F,done:!1}):this._queuedChunks.push(F),this._loaded+=F.byteLength)}get headersReady(){return this._headersReady}get filename(){return this._filename}get isRangeSupported(){return this._stream._isRangeSupported}get isStreamingSupported(){return this._stream._isStreamingSupported}get contentLength(){return this._stream._contentLength}async read(){if(this._queuedChunks.length>0)return{value:this._queuedChunks.shift(),done:!1};if(this._done)return{value:void 0,done:!0};const F=new h.PromiseCapability;return this._requests.push(F),F.promise}cancel(F){this._done=!0;for(const v of this._requests)v.resolve({value:void 0,done:!0});this._requests.length=0}progressiveDone(){this._done||(this._done=!0)}}class Z{constructor(F,v,N){this._stream=F,this._begin=v,this._end=N,this._queuedChunk=null,this._requests=[],this._done=!1,this.onProgress=null}_enqueue(F){if(!this._done){if(this._requests.length===0)this._queuedChunk=F;else{this._requests.shift().resolve({value:F,done:!1});for(const N of this._requests)N.resolve({value:void 0,done:!0});this._requests.length=0}this._done=!0,this._stream._removeRangeReader(this)}}get isStreamingSupported(){return!1}async read(){if(this._queuedChunk){const v=this._queuedChunk;return this._queuedChunk=null,{value:v,done:!1}}if(this._done)return{value:void 0,done:!0};const F=new h.PromiseCapability;return this._requests.push(F),F.promise}cancel(F){this._done=!0;for(const v of this._requests)v.resolve({value:void 0,done:!0});this._requests.length=0,this._stream._removeRangeReader(this)}}},(B,i)=>{Object.defineProperty(i,"__esModule",{value:!0}),i.XfaText=void 0;class U{static textContent(_){const W=[],q={items:W,styles:Object.create(null)};function Z(L){var N;if(!L)return;let F=null;const v=L.name;if(v==="#text")F=L.value;else if(U.shouldBuildText(v))(N=L==null?void 0:L.attributes)!=null&&N.textContent?F=L.attributes.textContent:L.value&&(F=L.value);else return;if(F!==null&&W.push({str:F}),!!L.children)for(const T of L.children)Z(T)}return Z(_),q}static shouldBuildText(_){return!(_==="textarea"||_==="input"||_==="option"||_==="select")}}i.XfaText=U},(B,i,U)=>{Object.defineProperty(i,"__esModule",{value:!0}),i.NodeStandardFontDataFactory=i.NodeFilterFactory=i.NodeCanvasFactory=i.NodeCMapReaderFactory=void 0;var h=U(7);const _=function(F){return new Promise((v,N)=>{require$$5.readFile(F,(x,g)=>{if(x||!g){N(new Error(x));return}v(new Uint8Array(g))})})};class W extends h.BaseFilterFactory{}i.NodeFilterFactory=W;class q extends h.BaseCanvasFactory{_createCanvas(v,N){return require$$5.createCanvas(v,N)}}i.NodeCanvasFactory=q;class Z extends h.BaseCMapReaderFactory{_fetchData(v,N){return _(v).then(T=>({cMapData:T,compressionType:N}))}}i.NodeCMapReaderFactory=Z;class L extends h.BaseStandardFontDataFactory{_fetchData(v){return _(v)}}i.NodeStandardFontDataFactory=L},(B,i,U)=>{Object.defineProperty(i,"__esModule",{value:!0}),i.PDFNodeStream=void 0;var h=U(1),_=U(22);const W=require$$5,q=require$$5,Z=require$$5,L=require$$5,F=/^file:\/\/\/[a-zA-Z]:\//;function v(w){const m=L.parse(w);return m.protocol==="file:"||m.host?m:/^[a-z]:[/\\]/i.test(w)?L.parse(`file:///${w}`):(m.host||(m.protocol="file:"),m)}class N{constructor(m){this.source=m,this.url=v(m.url),this.isHttp=this.url.protocol==="http:"||this.url.protocol==="https:",this.isFsUrl=this.url.protocol==="file:",this.httpHeaders=this.isHttp&&m.httpHeaders||{},this._fullRequestReader=null,this._rangeRequestReaders=[]}get _progressiveDataLength(){var m;return((m=this._fullRequestReader)==null?void 0:m._loaded)??0}getFullReader(){return(0,h.assert)(!this._fullRequestReader,"PDFNodeStream.getFullReader can only be called once."),this._fullRequestReader=this.isFsUrl?new A(this):new f(this),this._fullRequestReader}getRangeReader(m,e){if(e<=this._progressiveDataLength)return null;const a=this.isFsUrl?new S(this,m,e):new l(this,m,e);return this._rangeRequestReaders.push(a),a}cancelAllRequests(m){var e;(e=this._fullRequestReader)==null||e.cancel(m);for(const a of this._rangeRequestReaders.slice(0))a.cancel(m)}}i.PDFNodeStream=N;class T{constructor(m){this._url=m.url,this._done=!1,this._storedError=null,this.onProgress=null;const e=m.source;this._contentLength=e.length,this._loaded=0,this._filename=null,this._disableRange=e.disableRange||!1,this._rangeChunkSize=e.rangeChunkSize,!this._rangeChunkSize&&!this._disableRange&&(this._disableRange=!0),this._isStreamingSupported=!e.disableStream,this._isRangeSupported=!e.disableRange,this._readableStream=null,this._readCapability=new h.PromiseCapability,this._headersCapability=new h.PromiseCapability}get headersReady(){return this._headersCapability.promise}get filename(){return this._filename}get contentLength(){return this._contentLength}get isRangeSupported(){return this._isRangeSupported}get isStreamingSupported(){return this._isStreamingSupported}async read(){var a;if(await this._readCapability.promise,this._done)return{value:void 0,done:!0};if(this._storedError)throw this._storedError;const m=this._readableStream.read();return m===null?(this._readCapability=new h.PromiseCapability,this.read()):(this._loaded+=m.length,(a=this.onProgress)==null||a.call(this,{loaded:this._loaded,total:this._contentLength}),{value:new Uint8Array(m).buffer,done:!1})}cancel(m){if(!this._readableStream){this._error(m);return}this._readableStream.destroy(m)}_error(m){this._storedError=m,this._readCapability.resolve()}_setReadableStream(m){this._readableStream=m,m.on("readable",()=>{this._readCapability.resolve()}),m.on("end",()=>{m.destroy(),this._done=!0,this._readCapability.resolve()}),m.on("error",e=>{this._error(e)}),!this._isStreamingSupported&&this._isRangeSupported&&this._error(new h.AbortException("streaming is disabled")),this._storedError&&this._readableStream.destroy(this._storedError)}}class x{constructor(m){this._url=m.url,this._done=!1,this._storedError=null,this.onProgress=null,this._loaded=0,this._readableStream=null,this._readCapability=new h.PromiseCapability;const e=m.source;this._isStreamingSupported=!e.disableStream}get isStreamingSupported(){return this._isStreamingSupported}async read(){var a;if(await this._readCapability.promise,this._done)return{value:void 0,done:!0};if(this._storedError)throw this._storedError;const m=this._readableStream.read();return m===null?(this._readCapability=new h.PromiseCapability,this.read()):(this._loaded+=m.length,(a=this.onProgress)==null||a.call(this,{loaded:this._loaded}),{value:new Uint8Array(m).buffer,done:!1})}cancel(m){if(!this._readableStream){this._error(m);return}this._readableStream.destroy(m)}_error(m){this._storedError=m,this._readCapability.resolve()}_setReadableStream(m){this._readableStream=m,m.on("readable",()=>{this._readCapability.resolve()}),m.on("end",()=>{m.destroy(),this._done=!0,this._readCapability.resolve()}),m.on("error",e=>{this._error(e)}),this._storedError&&this._readableStream.destroy(this._storedError)}}function g(w,m){return{protocol:w.protocol,auth:w.auth,host:w.hostname,port:w.port,path:w.path,method:"GET",headers:m}}class f extends T{constructor(m){super(m);const e=a=>{if(a.statusCode===404){const k=new h.MissingPDFException(`Missing PDF "${this._url}".`);this._storedError=k,this._headersCapability.reject(k);return}this._headersCapability.resolve(),this._setReadableStream(a);const c=k=>this._readableStream.headers[k.toLowerCase()],{allowRangeRequests:o,suggestedLength:d}=(0,_.validateRangeRequestCapabilities)({getResponseHeader:c,isHttp:m.isHttp,rangeChunkSize:this._rangeChunkSize,disableRange:this._disableRange});this._isRangeSupported=o,this._contentLength=d||this._contentLength,this._filename=(0,_.extractFilenameFromHeader)(c)};this._request=null,this._url.protocol==="http:"?this._request=q.request(g(this._url,m.httpHeaders),e):this._request=Z.request(g(this._url,m.httpHeaders),e),this._request.on("error",a=>{this._storedError=a,this._headersCapability.reject(a)}),this._request.end()}}class l extends x{constructor(m,e,a){super(m),this._httpHeaders={};for(const o in m.httpHeaders){const d=m.httpHeaders[o];d!==void 0&&(this._httpHeaders[o]=d)}this._httpHeaders.Range=`bytes=${e}-${a-1}`;const c=o=>{if(o.statusCode===404){const d=new h.MissingPDFException(`Missing PDF "${this._url}".`);this._storedError=d;return}this._setReadableStream(o)};this._request=null,this._url.protocol==="http:"?this._request=q.request(g(this._url,this._httpHeaders),c):this._request=Z.request(g(this._url,this._httpHeaders),c),this._request.on("error",o=>{this._storedError=o}),this._request.end()}}class A extends T{constructor(m){super(m);let e=decodeURIComponent(this._url.path);F.test(this._url.href)&&(e=e.replace(/^\//,"")),W.lstat(e,(a,c)=>{if(a){a.code==="ENOENT"&&(a=new h.MissingPDFException(`Missing PDF "${e}".`)),this._storedError=a,this._headersCapability.reject(a);return}this._contentLength=c.size,this._setReadableStream(W.createReadStream(e)),this._headersCapability.resolve()})}}class S extends x{constructor(m,e,a){super(m);let c=decodeURIComponent(this._url.path);F.test(this._url.href)&&(c=c.replace(/^\//,"")),this._setReadableStream(W.createReadStream(c,{start:e,end:a-1}))}}},(B,i,U)=>{Object.defineProperty(i,"__esModule",{value:!0}),i.createResponseStatusError=L,i.extractFilenameFromHeader=Z,i.validateRangeRequestCapabilities=q,i.validateResponseStatus=F;var h=U(1),_=U(23),W=U(6);function q({getResponseHeader:v,isHttp:N,rangeChunkSize:T,disableRange:x}){const g={allowRangeRequests:!1,suggestedLength:void 0},f=parseInt(v("Content-Length"),10);return!Number.isInteger(f)||(g.suggestedLength=f,f<=2*T)||x||!N||v("Accept-Ranges")!=="bytes"||(v("Content-Encoding")||"identity")!=="identity"||(g.allowRangeRequests=!0),g}function Z(v){const N=v("Content-Disposition");if(N){let T=(0,_.getFilenameFromContentDispositionHeader)(N);if(T.includes("%"))try{T=decodeURIComponent(T)}catch{}if((0,W.isPdfFile)(T))return T}return null}function L(v,N){return v===404||v===0&&N.startsWith("file:")?new h.MissingPDFException('Missing PDF "'+N+'".'):new h.UnexpectedResponseException(`Unexpected server response (${v}) while retrieving PDF "${N}".`,v)}function F(v){return v===200||v===206}},(B,i,U)=>{Object.defineProperty(i,"__esModule",{value:!0}),i.getFilenameFromContentDispositionHeader=_;var h=U(1);function _(W){let q=!0,Z=L("filename\\*","i").exec(W);if(Z){Z=Z[1];let f=T(Z);return f=unescape(f),f=x(f),f=g(f),v(f)}if(Z=N(W),Z){const f=g(Z);return v(f)}if(Z=L("filename","i").exec(W),Z){Z=Z[1];let f=T(Z);return f=g(f),v(f)}function L(f,l){return new RegExp("(?:^|;)\\s*"+f+'\\s*=\\s*([^";\\s][^;\\s]*|"(?:[^"\\\\]|\\\\"?)+"?)',l)}function F(f,l){if(f){if(!/^[\x00-\xFF]+$/.test(l))return l;try{const A=new TextDecoder(f,{fatal:!0}),S=(0,h.stringToBytes)(l);l=A.decode(S),q=!1}catch{}}return l}function v(f){return q&&/[\x80-\xff]/.test(f)&&(f=F("utf-8",f),q&&(f=F("iso-8859-1",f))),f}function N(f){const l=[];let A;const S=L("filename\\*((?!0\\d)\\d+)(\\*?)","ig");for(;(A=S.exec(f))!==null;){let[,m,e,a]=A;if(m=parseInt(m,10),m in l){if(m===0)break;continue}l[m]=[e,a]}const w=[];for(let m=0;m<l.length&&m in l;++m){let[e,a]=l[m];a=T(a),e&&(a=unescape(a),m===0&&(a=x(a))),w.push(a)}return w.join("")}function T(f){if(f.startsWith('"')){const l=f.slice(1).split('\\"');for(let A=0;A<l.length;++A){const S=l[A].indexOf('"');S!==-1&&(l[A]=l[A].slice(0,S),l.length=A+1),l[A]=l[A].replaceAll(/\\(.)/g,"$1")}f=l.join('"')}return f}function x(f){const l=f.indexOf("'");if(l===-1)return f;const A=f.slice(0,l),w=f.slice(l+1).replace(/^[^']*'/,"");return F(A,w)}function g(f){return!f.startsWith("=?")||/[\x00-\x19\x80-\xff]/.test(f)?f:f.replaceAll(/=\?([\w-]*)\?([QqBb])\?((?:[^?]|\?(?!=))*)\?=/g,function(l,A,S,w){if(S==="q"||S==="Q")return w=w.replaceAll("_"," "),w=w.replaceAll(/=([0-9a-fA-F]{2})/g,function(m,e){return String.fromCharCode(parseInt(e,16))}),F(A,w);try{w=atob(w)}catch{}return F(A,w)})}return""}},(B,i,U)=>{Object.defineProperty(i,"__esModule",{value:!0}),i.PDFNetworkStream=void 0;var h=U(1),_=U(22);const W=200,q=206;function Z(T){const x=T.response;return typeof x!="string"?x:(0,h.stringToBytes)(x).buffer}class L{constructor(x,g={}){this.url=x,this.isHttp=/^https?:/i.test(x),this.httpHeaders=this.isHttp&&g.httpHeaders||Object.create(null),this.withCredentials=g.withCredentials||!1,this.currXhrId=0,this.pendingRequests=Object.create(null)}requestRange(x,g,f){const l={begin:x,end:g};for(const A in f)l[A]=f[A];return this.request(l)}requestFull(x){return this.request(x)}request(x){const g=new XMLHttpRequest,f=this.currXhrId++,l=this.pendingRequests[f]={xhr:g};g.open("GET",this.url),g.withCredentials=this.withCredentials;for(const A in this.httpHeaders){const S=this.httpHeaders[A];S!==void 0&&g.setRequestHeader(A,S)}return this.isHttp&&"begin"in x&&"end"in x?(g.setRequestHeader("Range",`bytes=${x.begin}-${x.end-1}`),l.expectedStatus=q):l.expectedStatus=W,g.responseType="arraybuffer",x.onError&&(g.onerror=function(A){x.onError(g.status)}),g.onreadystatechange=this.onStateChange.bind(this,f),g.onprogress=this.onProgress.bind(this,f),l.onHeadersReceived=x.onHeadersReceived,l.onDone=x.onDone,l.onError=x.onError,l.onProgress=x.onProgress,g.send(null),f}onProgress(x,g){var l;const f=this.pendingRequests[x];f&&((l=f.onProgress)==null||l.call(f,g))}onStateChange(x,g){var m,e,a;const f=this.pendingRequests[x];if(!f)return;const l=f.xhr;if(l.readyState>=2&&f.onHeadersReceived&&(f.onHeadersReceived(),delete f.onHeadersReceived),l.readyState!==4||!(x in this.pendingRequests))return;if(delete this.pendingRequests[x],l.status===0&&this.isHttp){(m=f.onError)==null||m.call(f,l.status);return}const A=l.status||W;if(!(A===W&&f.expectedStatus===q)&&A!==f.expectedStatus){(e=f.onError)==null||e.call(f,l.status);return}const w=Z(l);if(A===q){const c=l.getResponseHeader("Content-Range"),o=/bytes (\d+)-(\d+)\/(\d+)/.exec(c);f.onDone({begin:parseInt(o[1],10),chunk:w})}else w?f.onDone({begin:0,chunk:w}):(a=f.onError)==null||a.call(f,l.status)}getRequestXhr(x){return this.pendingRequests[x].xhr}isPendingRequest(x){return x in this.pendingRequests}abortRequest(x){const g=this.pendingRequests[x].xhr;delete this.pendingRequests[x],g.abort()}}class F{constructor(x){this._source=x,this._manager=new L(x.url,{httpHeaders:x.httpHeaders,withCredentials:x.withCredentials}),this._rangeChunkSize=x.rangeChunkSize,this._fullRequestReader=null,this._rangeRequestReaders=[]}_onRangeRequestReaderClosed(x){const g=this._rangeRequestReaders.indexOf(x);g>=0&&this._rangeRequestReaders.splice(g,1)}getFullReader(){return(0,h.assert)(!this._fullRequestReader,"PDFNetworkStream.getFullReader can only be called once."),this._fullRequestReader=new v(this._manager,this._source),this._fullRequestReader}getRangeReader(x,g){const f=new N(this._manager,x,g);return f.onClosed=this._onRangeRequestReaderClosed.bind(this),this._rangeRequestReaders.push(f),f}cancelAllRequests(x){var g;(g=this._fullRequestReader)==null||g.cancel(x);for(const f of this._rangeRequestReaders.slice(0))f.cancel(x)}}i.PDFNetworkStream=F;class v{constructor(x,g){this._manager=x;const f={onHeadersReceived:this._onHeadersReceived.bind(this),onDone:this._onDone.bind(this),onError:this._onError.bind(this),onProgress:this._onProgress.bind(this)};this._url=g.url,this._fullRequestId=x.requestFull(f),this._headersReceivedCapability=new h.PromiseCapability,this._disableRange=g.disableRange||!1,this._contentLength=g.length,this._rangeChunkSize=g.rangeChunkSize,!this._rangeChunkSize&&!this._disableRange&&(this._disableRange=!0),this._isStreamingSupported=!1,this._isRangeSupported=!1,this._cachedChunks=[],this._requests=[],this._done=!1,this._storedError=void 0,this._filename=null,this.onProgress=null}_onHeadersReceived(){const x=this._fullRequestId,g=this._manager.getRequestXhr(x),f=S=>g.getResponseHeader(S),{allowRangeRequests:l,suggestedLength:A}=(0,_.validateRangeRequestCapabilities)({getResponseHeader:f,isHttp:this._manager.isHttp,rangeChunkSize:this._rangeChunkSize,disableRange:this._disableRange});l&&(this._isRangeSupported=!0),this._contentLength=A||this._contentLength,this._filename=(0,_.extractFilenameFromHeader)(f),this._isRangeSupported&&this._manager.abortRequest(x),this._headersReceivedCapability.resolve()}_onDone(x){if(x&&(this._requests.length>0?this._requests.shift().resolve({value:x.chunk,done:!1}):this._cachedChunks.push(x.chunk)),this._done=!0,!(this._cachedChunks.length>0)){for(const g of this._requests)g.resolve({value:void 0,done:!0});this._requests.length=0}}_onError(x){this._storedError=(0,_.createResponseStatusError)(x,this._url),this._headersReceivedCapability.reject(this._storedError);for(const g of this._requests)g.reject(this._storedError);this._requests.length=0,this._cachedChunks.length=0}_onProgress(x){var g;(g=this.onProgress)==null||g.call(this,{loaded:x.loaded,total:x.lengthComputable?x.total:this._contentLength})}get filename(){return this._filename}get isRangeSupported(){return this._isRangeSupported}get isStreamingSupported(){return this._isStreamingSupported}get contentLength(){return this._contentLength}get headersReady(){return this._headersReceivedCapability.promise}async read(){if(this._storedError)throw this._storedError;if(this._cachedChunks.length>0)return{value:this._cachedChunks.shift(),done:!1};if(this._done)return{value:void 0,done:!0};const x=new h.PromiseCapability;return this._requests.push(x),x.promise}cancel(x){this._done=!0,this._headersReceivedCapability.reject(x);for(const g of this._requests)g.resolve({value:void 0,done:!0});this._requests.length=0,this._manager.isPendingRequest(this._fullRequestId)&&this._manager.abortRequest(this._fullRequestId),this._fullRequestReader=null}}class N{constructor(x,g,f){this._manager=x;const l={onDone:this._onDone.bind(this),onError:this._onError.bind(this),onProgress:this._onProgress.bind(this)};this._url=x.url,this._requestId=x.requestRange(g,f,l),this._requests=[],this._queuedChunk=null,this._done=!1,this._storedError=void 0,this.onProgress=null,this.onClosed=null}_close(){var x;(x=this.onClosed)==null||x.call(this,this)}_onDone(x){const g=x.chunk;this._requests.length>0?this._requests.shift().resolve({value:g,done:!1}):this._queuedChunk=g,this._done=!0;for(const f of this._requests)f.resolve({value:void 0,done:!0});this._requests.length=0,this._close()}_onError(x){this._storedError=(0,_.createResponseStatusError)(x,this._url);for(const g of this._requests)g.reject(this._storedError);this._requests.length=0,this._queuedChunk=null}_onProgress(x){var g;this.isStreamingSupported||(g=this.onProgress)==null||g.call(this,{loaded:x.loaded})}get isStreamingSupported(){return!1}async read(){if(this._storedError)throw this._storedError;if(this._queuedChunk!==null){const g=this._queuedChunk;return this._queuedChunk=null,{value:g,done:!1}}if(this._done)return{value:void 0,done:!0};const x=new h.PromiseCapability;return this._requests.push(x),x.promise}cancel(x){this._done=!0;for(const g of this._requests)g.resolve({value:void 0,done:!0});this._requests.length=0,this._manager.isPendingRequest(this._requestId)&&this._manager.abortRequest(this._requestId),this._close()}}},(B,i,U)=>{Object.defineProperty(i,"__esModule",{value:!0}),i.PDFFetchStream=void 0;var h=U(1),_=U(22);function W(N,T,x){return{method:"GET",headers:N,signal:x.signal,mode:"cors",credentials:T?"include":"same-origin",redirect:"follow"}}function q(N){const T=new Headers;for(const x in N){const g=N[x];g!==void 0&&T.append(x,g)}return T}function Z(N){return N instanceof Uint8Array?N.buffer:N instanceof ArrayBuffer?N:((0,h.warn)(`getArrayBuffer - unexpected data format: ${N}`),new Uint8Array(N).buffer)}class L{constructor(T){this.source=T,this.isHttp=/^https?:/i.test(T.url),this.httpHeaders=this.isHttp&&T.httpHeaders||{},this._fullRequestReader=null,this._rangeRequestReaders=[]}get _progressiveDataLength(){var T;return((T=this._fullRequestReader)==null?void 0:T._loaded)??0}getFullReader(){return(0,h.assert)(!this._fullRequestReader,"PDFFetchStream.getFullReader can only be called once."),this._fullRequestReader=new F(this),this._fullRequestReader}getRangeReader(T,x){if(x<=this._progressiveDataLength)return null;const g=new v(this,T,x);return this._rangeRequestReaders.push(g),g}cancelAllRequests(T){var x;(x=this._fullRequestReader)==null||x.cancel(T);for(const g of this._rangeRequestReaders.slice(0))g.cancel(T)}}i.PDFFetchStream=L;class F{constructor(T){this._stream=T,this._reader=null,this._loaded=0,this._filename=null;const x=T.source;this._withCredentials=x.withCredentials||!1,this._contentLength=x.length,this._headersCapability=new h.PromiseCapability,this._disableRange=x.disableRange||!1,this._rangeChunkSize=x.rangeChunkSize,!this._rangeChunkSize&&!this._disableRange&&(this._disableRange=!0),this._abortController=new AbortController,this._isStreamingSupported=!x.disableStream,this._isRangeSupported=!x.disableRange,this._headers=q(this._stream.httpHeaders);const g=x.url;fetch(g,W(this._headers,this._withCredentials,this._abortController)).then(f=>{if(!(0,_.validateResponseStatus)(f.status))throw(0,_.createResponseStatusError)(f.status,g);this._reader=f.body.getReader(),this._headersCapability.resolve();const l=w=>f.headers.get(w),{allowRangeRequests:A,suggestedLength:S}=(0,_.validateRangeRequestCapabilities)({getResponseHeader:l,isHttp:this._stream.isHttp,rangeChunkSize:this._rangeChunkSize,disableRange:this._disableRange});this._isRangeSupported=A,this._contentLength=S||this._contentLength,this._filename=(0,_.extractFilenameFromHeader)(l),!this._isStreamingSupported&&this._isRangeSupported&&this.cancel(new h.AbortException("Streaming is disabled."))}).catch(this._headersCapability.reject),this.onProgress=null}get headersReady(){return this._headersCapability.promise}get filename(){return this._filename}get contentLength(){return this._contentLength}get isRangeSupported(){return this._isRangeSupported}get isStreamingSupported(){return this._isStreamingSupported}async read(){var g;await this._headersCapability.promise;const{value:T,done:x}=await this._reader.read();return x?{value:T,done:x}:(this._loaded+=T.byteLength,(g=this.onProgress)==null||g.call(this,{loaded:this._loaded,total:this._contentLength}),{value:Z(T),done:!1})}cancel(T){var x;(x=this._reader)==null||x.cancel(T),this._abortController.abort()}}class v{constructor(T,x,g){this._stream=T,this._reader=null,this._loaded=0;const f=T.source;this._withCredentials=f.withCredentials||!1,this._readCapability=new h.PromiseCapability,this._isStreamingSupported=!f.disableStream,this._abortController=new AbortController,this._headers=q(this._stream.httpHeaders),this._headers.append("Range",`bytes=${x}-${g-1}`);const l=f.url;fetch(l,W(this._headers,this._withCredentials,this._abortController)).then(A=>{if(!(0,_.validateResponseStatus)(A.status))throw(0,_.createResponseStatusError)(A.status,l);this._readCapability.resolve(),this._reader=A.body.getReader()}).catch(this._readCapability.reject),this.onProgress=null}get isStreamingSupported(){return this._isStreamingSupported}async read(){var g;await this._readCapability.promise;const{value:T,done:x}=await this._reader.read();return x?{value:T,done:x}:(this._loaded+=T.byteLength,(g=this.onProgress)==null||g.call(this,{loaded:this._loaded}),{value:Z(T),done:!1})}cancel(T){var x;(x=this._reader)==null||x.cancel(T),this._abortController.abort()}}},(B,i,U)=>{Object.defineProperty(i,"__esModule",{value:!0}),i.TextLayerRenderTask=void 0,i.renderTextLayer=f,i.updateTextLayer=l;var h=U(1),_=U(6);const W=1e5,q=30,Z=.8,L=new Map;function F(A,S){let w;if(S&&h.FeatureTest.isOffscreenCanvasSupported)w=new OffscreenCanvas(A,A).getContext("2d",{alpha:!1});else{const m=document.createElement("canvas");m.width=m.height=A,w=m.getContext("2d",{alpha:!1})}return w}function v(A,S){const w=L.get(A);if(w)return w;const m=F(q,S);m.font=`${q}px ${A}`;const e=m.measureText("");let a=e.fontBoundingBoxAscent,c=Math.abs(e.fontBoundingBoxDescent);if(a){const d=a/(a+c);return L.set(A,d),m.canvas.width=m.canvas.height=0,d}m.strokeStyle="red",m.clearRect(0,0,q,q),m.strokeText("g",0,0);let o=m.getImageData(0,0,q,q).data;c=0;for(let d=o.length-1-3;d>=0;d-=4)if(o[d]>0){c=Math.ceil(d/4/q);break}m.clearRect(0,0,q,q),m.strokeText("A",0,q),o=m.getImageData(0,0,q,q).data,a=0;for(let d=0,k=o.length;d<k;d+=4)if(o[d]>0){a=q-Math.floor(d/4/q);break}if(m.canvas.width=m.canvas.height=0,a){const d=a/(a+c);return L.set(A,d),d}return L.set(A,Z),Z}function N(A,S,w){const m=document.createElement("span"),e={angle:0,canvasWidth:0,hasText:S.str!=="",hasEOL:S.hasEOL,fontSize:0};A._textDivs.push(m);const a=h.Util.transform(A._transform,S.transform);let c=Math.atan2(a[1],a[0]);const o=w[S.fontName];o.vertical&&(c+=Math.PI/2);const d=Math.hypot(a[2],a[3]),k=d*v(o.fontFamily,A._isOffscreenCanvasSupported);let n,j;c===0?(n=a[4],j=a[5]-k):(n=a[4]+k*Math.sin(c),j=a[5]-k*Math.cos(c));const $="calc(var(--scale-factor)*",Y=m.style;A._container===A._rootContainer?(Y.left=`${(100*n/A._pageWidth).toFixed(2)}%`,Y.top=`${(100*j/A._pageHeight).toFixed(2)}%`):(Y.left=`${$}${n.toFixed(2)}px)`,Y.top=`${$}${j.toFixed(2)}px)`),Y.fontSize=`${$}${d.toFixed(2)}px)`,Y.fontFamily=o.fontFamily,e.fontSize=d,m.setAttribute("role","presentation"),m.textContent=S.str,m.dir=S.dir,A._fontInspectorEnabled&&(m.dataset.fontName=S.fontName),c!==0&&(e.angle=c*(180/Math.PI));let Q=!1;if(S.str.length>1)Q=!0;else if(S.str!==" "&&S.transform[0]!==S.transform[3]){const et=Math.abs(S.transform[0]),ut=Math.abs(S.transform[3]);et!==ut&&Math.max(et,ut)/Math.min(et,ut)>1.5&&(Q=!0)}Q&&(e.canvasWidth=o.vertical?S.height:S.width),A._textDivProperties.set(m,e),A._isReadableStream&&A._layoutText(m)}function T(A){const{div:S,scale:w,properties:m,ctx:e,prevFontSize:a,prevFontFamily:c}=A,{style:o}=S;let d="";if(m.canvasWidth!==0&&m.hasText){const{fontFamily:k}=o,{canvasWidth:n,fontSize:j}=m;(a!==j||c!==k)&&(e.font=`${j*w}px ${k}`,A.prevFontSize=j,A.prevFontFamily=k);const{width:$}=e.measureText(S.textContent);$>0&&(d=`scaleX(${n*w/$})`)}m.angle!==0&&(d=`rotate(${m.angle}deg) ${d}`),d.length>0&&(o.transform=d)}function x(A){if(A._canceled)return;const S=A._textDivs,w=A._capability;if(S.length>W){w.resolve();return}if(!A._isReadableStream)for(const e of S)A._layoutText(e);w.resolve()}class g{constructor({textContentSource:S,container:w,viewport:m,textDivs:e,textDivProperties:a,textContentItemsStr:c,isOffscreenCanvasSupported:o}){var $;this._textContentSource=S,this._isReadableStream=S instanceof ReadableStream,this._container=this._rootContainer=w,this._textDivs=e||[],this._textContentItemsStr=c||[],this._isOffscreenCanvasSupported=o,this._fontInspectorEnabled=!!(($=globalThis.FontInspector)!=null&&$.enabled),this._reader=null,this._textDivProperties=a||new WeakMap,this._canceled=!1,this._capability=new h.PromiseCapability,this._layoutTextParams={prevFontSize:null,prevFontFamily:null,div:null,scale:m.scale*(globalThis.devicePixelRatio||1),properties:null,ctx:F(0,o)};const{pageWidth:d,pageHeight:k,pageX:n,pageY:j}=m.rawDims;this._transform=[1,0,0,-1,-n,j+k],this._pageWidth=d,this._pageHeight=k,(0,_.setLayerDimensions)(w,m),this._capability.promise.finally(()=>{this._layoutTextParams=null}).catch(()=>{})}get promise(){return this._capability.promise}cancel(){this._canceled=!0,this._reader&&(this._reader.cancel(new h.AbortException("TextLayer task cancelled.")).catch(()=>{}),this._reader=null),this._capability.reject(new h.AbortException("TextLayer task cancelled."))}_processItems(S,w){for(const m of S){if(m.str===void 0){if(m.type==="beginMarkedContentProps"||m.type==="beginMarkedContent"){const e=this._container;this._container=document.createElement("span"),this._container.classList.add("markedContent"),m.id!==null&&this._container.setAttribute("id",`${m.id}`),e.append(this._container)}else m.type==="endMarkedContent"&&(this._container=this._container.parentNode);continue}this._textContentItemsStr.push(m.str),N(this,m,w)}}_layoutText(S){const w=this._layoutTextParams.properties=this._textDivProperties.get(S);if(this._layoutTextParams.div=S,T(this._layoutTextParams),w.hasText&&this._container.append(S),w.hasEOL){const m=document.createElement("br");m.setAttribute("role","presentation"),this._container.append(m)}}_render(){const S=new h.PromiseCapability;let w=Object.create(null);if(this._isReadableStream){const m=()=>{this._reader.read().then(({value:e,done:a})=>{if(a){S.resolve();return}Object.assign(w,e.styles),this._processItems(e.items,w),m()},S.reject)};this._reader=this._textContentSource.getReader(),m()}else if(this._textContentSource){const{items:m,styles:e}=this._textContentSource;this._processItems(m,e),S.resolve()}else throw new Error('No "textContentSource" parameter specified.');S.promise.then(()=>{w=null,x(this)},this._capability.reject)}}i.TextLayerRenderTask=g;function f(A){!A.textContentSource&&(A.textContent||A.textContentStream)&&((0,_.deprecated)("The TextLayerRender `textContent`/`textContentStream` parameters will be removed in the future, please use `textContentSource` instead."),A.textContentSource=A.textContent||A.textContentStream);const{container:S,viewport:w}=A,m=getComputedStyle(S),e=m.getPropertyValue("visibility"),a=parseFloat(m.getPropertyValue("--scale-factor"));e==="visible"&&(!a||Math.abs(a-w.scale)>1e-5)&&console.error("The `--scale-factor` CSS-variable must be set, to the same value as `viewport.scale`, either on the `container`-element itself or higher up in the DOM.");const c=new g(A);return c._render(),c}function l({container:A,viewport:S,textDivs:w,textDivProperties:m,isOffscreenCanvasSupported:e,mustRotate:a=!0,mustRescale:c=!0}){if(a&&(0,_.setLayerDimensions)(A,{rotation:S.rotation}),c){const o=F(0,e),k={prevFontSize:null,prevFontFamily:null,div:null,scale:S.scale*(globalThis.devicePixelRatio||1),properties:null,ctx:o};for(const n of w)k.properties=m.get(n),k.div=n,T(k)}}},(B,i,U)=>{var F,v,N,T,x,g,f,l,A,ve,w,qe,e,Se,c,Ee;Object.defineProperty(i,"__esModule",{value:!0}),i.AnnotationEditorLayer=void 0;var h=U(1),_=U(5),W=U(28),q=U(29),Z=U(6);const d=class{constructor(n){tt(this,A);tt(this,w);tt(this,e);tt(this,c);tt(this,F,void 0);tt(this,v,!1);tt(this,N,this.pointerup.bind(this));tt(this,T,this.pointerdown.bind(this));tt(this,x,new Map);tt(this,g,!1);tt(this,f,!1);tt(this,l,void 0);d._initialized||(d._initialized=!0,W.FreeTextEditor.initialize(n.l10n),q.InkEditor.initialize(n.l10n)),n.uiManager.registerEditorTypes([W.FreeTextEditor,q.InkEditor]),gt(this,l,n.uiManager),this.pageIndex=n.pageIndex,this.div=n.div,gt(this,F,n.accessibilityManager),y(this,l).addLayer(this)}get isEmpty(){return y(this,x).size===0}updateToolbar(n){y(this,l).updateToolbar(n)}updateMode(n=y(this,l).getMode()){it(this,c,Ee).call(this),n===h.AnnotationEditorType.INK?(this.addInkEditorIfNeeded(!1),this.disableClick()):this.enableClick(),y(this,l).unselectAll(),n!==h.AnnotationEditorType.NONE&&(this.div.classList.toggle("freeTextEditing",n===h.AnnotationEditorType.FREETEXT),this.div.classList.toggle("inkEditing",n===h.AnnotationEditorType.INK),this.div.hidden=!1)}addInkEditorIfNeeded(n){if(!n&&y(this,l).getMode()!==h.AnnotationEditorType.INK)return;if(!n){for(const $ of y(this,x).values())if($.isEmpty()){$.setInBackground();return}}it(this,e,Se).call(this,{offsetX:0,offsetY:0}).setInBackground()}setEditingState(n){y(this,l).setEditingState(n)}addCommands(n){y(this,l).addCommands(n)}enable(){this.div.style.pointerEvents="auto";for(const n of y(this,x).values())n.enableEditing()}disable(){this.div.style.pointerEvents="none";for(const n of y(this,x).values())n.disableEditing();it(this,c,Ee).call(this),this.isEmpty&&(this.div.hidden=!0)}setActiveEditor(n){y(this,l).getActive()!==n&&y(this,l).setActiveEditor(n)}enableClick(){this.div.addEventListener("pointerdown",y(this,T)),this.div.addEventListener("pointerup",y(this,N))}disableClick(){this.div.removeEventListener("pointerdown",y(this,T)),this.div.removeEventListener("pointerup",y(this,N))}attach(n){y(this,x).set(n.id,n)}detach(n){var j;y(this,x).delete(n.id),(j=y(this,F))==null||j.removePointerInTextLayer(n.contentDiv)}remove(n){y(this,l).removeEditor(n),this.detach(n),n.div.style.display="none",setTimeout(()=>{n.div.style.display="",n.div.remove(),n.isAttachedToDOM=!1,document.activeElement===document.body&&y(this,l).focusMainContainer()},0),y(this,f)||this.addInkEditorIfNeeded(!1)}add(n){if(it(this,A,ve).call(this,n),y(this,l).addEditor(n),this.attach(n),!n.isAttachedToDOM){const j=n.render();this.div.append(j),n.isAttachedToDOM=!0}this.moveEditorInDOM(n),n.onceAdded(),y(this,l).addToAnnotationStorage(n)}moveEditorInDOM(n){var j;(j=y(this,F))==null||j.moveElementInDOM(this.div,n.div,n.contentDiv,!0)}addOrRebuild(n){n.needsToBeRebuilt()?n.rebuild():this.add(n)}addANewEditor(n){const j=()=>{this.addOrRebuild(n)},$=()=>{n.remove()};this.addCommands({cmd:j,undo:$,mustExec:!0})}addUndoableEditor(n){const j=()=>{this.addOrRebuild(n)},$=()=>{n.remove()};this.addCommands({cmd:j,undo:$,mustExec:!1})}getNextId(){return y(this,l).getId()}deserialize(n){switch(n.annotationType){case h.AnnotationEditorType.FREETEXT:return W.FreeTextEditor.deserialize(n,this,y(this,l));case h.AnnotationEditorType.INK:return q.InkEditor.deserialize(n,this,y(this,l))}return null}setSelected(n){y(this,l).setSelected(n)}toggleSelected(n){y(this,l).toggleSelected(n)}isSelected(n){return y(this,l).isSelected(n)}unselect(n){y(this,l).unselect(n)}pointerup(n){const{isMac:j}=h.FeatureTest.platform;if(!(n.button!==0||n.ctrlKey&&j)&&n.target===this.div&&y(this,g)){if(gt(this,g,!1),!y(this,v)){gt(this,v,!0);return}it(this,e,Se).call(this,n)}}pointerdown(n){const{isMac:j}=h.FeatureTest.platform;if(n.button!==0||n.ctrlKey&&j||n.target!==this.div)return;gt(this,g,!0);const $=y(this,l).getActive();gt(this,v,!$||$.isEmpty())}drop(n){const j=n.dataTransfer.getData("text/plain"),$=y(this,l).getEditor(j);if(!$)return;n.preventDefault(),n.dataTransfer.dropEffect="move",it(this,A,ve).call(this,$);const Y=this.div.getBoundingClientRect(),Q=n.clientX-Y.x,et=n.clientY-Y.y;$.translate(Q-$.startX,et-$.startY),this.moveEditorInDOM($),$.div.focus()}dragover(n){n.preventDefault()}destroy(){var n,j;((n=y(this,l).getActive())==null?void 0:n.parent)===this&&y(this,l).setActiveEditor(null);for(const $ of y(this,x).values())(j=y(this,F))==null||j.removePointerInTextLayer($.contentDiv),$.setParent(null),$.isAttachedToDOM=!1,$.div.remove();this.div=null,y(this,x).clear(),y(this,l).removeLayer(this)}render({viewport:n}){this.viewport=n,(0,Z.setLayerDimensions)(this.div,n),(0,_.bindEvents)(this,this.div,["dragover","drop"]);for(const j of y(this,l).getEditors(this.pageIndex))this.add(j);this.updateMode()}update({viewport:n}){y(this,l).commitOrRemove(),this.viewport=n,(0,Z.setLayerDimensions)(this.div,{rotation:n.rotation}),this.updateMode()}get pageDimensions(){const{pageWidth:n,pageHeight:j}=this.viewport.rawDims;return[n,j]}};let L=d;F=new WeakMap,v=new WeakMap,N=new WeakMap,T=new WeakMap,x=new WeakMap,g=new WeakMap,f=new WeakMap,l=new WeakMap,A=new WeakSet,ve=function(n){var j;n.parent!==this&&(this.attach(n),(j=n.parent)==null||j.detach(n),n.setParent(this),n.div&&n.isAttachedToDOM&&(n.div.remove(),this.div.append(n.div)))},w=new WeakSet,qe=function(n){switch(y(this,l).getMode()){case h.AnnotationEditorType.FREETEXT:return new W.FreeTextEditor(n);case h.AnnotationEditorType.INK:return new q.InkEditor(n)}return null},e=new WeakSet,Se=function(n){const j=this.getNextId(),$=it(this,w,qe).call(this,{parent:this,id:j,x:n.offsetX,y:n.offsetY,uiManager:y(this,l)});return $&&this.add($),$},c=new WeakSet,Ee=function(){gt(this,f,!0);for(const n of y(this,x).values())n.isEmpty()&&n.remove();gt(this,f,!1)},Lt(L,"_initialized",!1),i.AnnotationEditorLayer=L},(B,i,U)=>{var Z,L,F,v,N,T,x,g,f,l,Ve,S,$e,m,Xe,a,Te;Object.defineProperty(i,"__esModule",{value:!0}),i.FreeTextEditor=void 0;var h=U(1),_=U(5),W=U(4);const o=class extends W.AnnotationEditor{constructor(n){super({...n,name:"freeTextEditor"});tt(this,l);tt(this,S);tt(this,m);tt(this,a);tt(this,Z,this.editorDivBlur.bind(this));tt(this,L,this.editorDivFocus.bind(this));tt(this,F,this.editorDivInput.bind(this));tt(this,v,this.editorDivKeydown.bind(this));tt(this,N,void 0);tt(this,T,"");tt(this,x,`${this.id}-editor`);tt(this,g,!1);tt(this,f,void 0);gt(this,N,n.color||o._defaultColor||W.AnnotationEditor._defaultLineColor),gt(this,f,n.fontSize||o._defaultFontSize)}static initialize(n){this._l10nPromise=new Map(["free_text2_default_content","editor_free_text2_aria_label"].map($=>[$,n.get($)]));const j=getComputedStyle(document.documentElement);this._internalPadding=parseFloat(j.getPropertyValue("--freetext-padding"))}static updateDefaultParams(n,j){switch(n){case h.AnnotationEditorParamsType.FREETEXT_SIZE:o._defaultFontSize=j;break;case h.AnnotationEditorParamsType.FREETEXT_COLOR:o._defaultColor=j;break}}updateParams(n,j){switch(n){case h.AnnotationEditorParamsType.FREETEXT_SIZE:it(this,l,Ve).call(this,j);break;case h.AnnotationEditorParamsType.FREETEXT_COLOR:it(this,S,$e).call(this,j);break}}static get defaultPropertiesToUpdate(){return[[h.AnnotationEditorParamsType.FREETEXT_SIZE,o._defaultFontSize],[h.AnnotationEditorParamsType.FREETEXT_COLOR,o._defaultColor||W.AnnotationEditor._defaultLineColor]]}get propertiesToUpdate(){return[[h.AnnotationEditorParamsType.FREETEXT_SIZE,y(this,f)],[h.AnnotationEditorParamsType.FREETEXT_COLOR,y(this,N)]]}getInitialTranslation(){const n=this.parentScale;return[-o._internalPadding*n,-(o._internalPadding+y(this,f))*n]}rebuild(){super.rebuild(),this.div!==null&&(this.isAttachedToDOM||this.parent.add(this))}enableEditMode(){this.isInEditMode()||(this.parent.setEditingState(!1),this.parent.updateToolbar(h.AnnotationEditorType.FREETEXT),super.enableEditMode(),this.overlayDiv.classList.remove("enabled"),this.editorDiv.contentEditable=!0,this.div.draggable=!1,this.div.removeAttribute("aria-activedescendant"),this.editorDiv.addEventListener("keydown",y(this,v)),this.editorDiv.addEventListener("focus",y(this,L)),this.editorDiv.addEventListener("blur",y(this,Z)),this.editorDiv.addEventListener("input",y(this,F)))}disableEditMode(){this.isInEditMode()&&(this.parent.setEditingState(!0),super.disableEditMode(),this.overlayDiv.classList.add("enabled"),this.editorDiv.contentEditable=!1,this.div.setAttribute("aria-activedescendant",y(this,x)),this.div.draggable=!0,this.editorDiv.removeEventListener("keydown",y(this,v)),this.editorDiv.removeEventListener("focus",y(this,L)),this.editorDiv.removeEventListener("blur",y(this,Z)),this.editorDiv.removeEventListener("input",y(this,F)),this.div.focus({preventScroll:!0}),this.isEditing=!1,this.parent.div.classList.add("freeTextEditing"))}focusin(n){super.focusin(n),n.target!==this.editorDiv&&this.editorDiv.focus()}onceAdded(){this.width||(this.enableEditMode(),this.editorDiv.focus())}isEmpty(){return!this.editorDiv||this.editorDiv.innerText.trim()===""}remove(){this.isEditing=!1,this.parent.setEditingState(!0),this.parent.div.classList.add("freeTextEditing"),super.remove()}commit(){this.isInEditMode()&&(super.commit(),y(this,g)||(gt(this,g,!0),this.parent.addUndoableEditor(this)),this.disableEditMode(),gt(this,T,it(this,m,Xe).call(this).trimEnd()),it(this,a,Te).call(this))}shouldGetKeyboardEvents(){return this.isInEditMode()}dblclick(n){this.enableEditMode(),this.editorDiv.focus()}keydown(n){n.target===this.div&&n.key==="Enter"&&(this.enableEditMode(),this.editorDiv.focus())}editorDivKeydown(n){o._keyboardManager.exec(this,n)}editorDivFocus(n){this.isEditing=!0}editorDivBlur(n){this.isEditing=!1}editorDivInput(n){this.parent.div.classList.toggle("freeTextEditing",this.isEmpty())}disableEditing(){this.editorDiv.setAttribute("role","comment"),this.editorDiv.removeAttribute("aria-multiline")}enableEditing(){this.editorDiv.setAttribute("role","textbox"),this.editorDiv.setAttribute("aria-multiline",!0)}render(){if(this.div)return this.div;let n,j;this.width&&(n=this.x,j=this.y),super.render(),this.editorDiv=document.createElement("div"),this.editorDiv.className="internal",this.editorDiv.setAttribute("id",y(this,x)),this.enableEditing(),o._l10nPromise.get("editor_free_text2_aria_label").then(Y=>{var Q;return(Q=this.editorDiv)==null?void 0:Q.setAttribute("aria-label",Y)}),o._l10nPromise.get("free_text2_default_content").then(Y=>{var Q;return(Q=this.editorDiv)==null?void 0:Q.setAttribute("default-content",Y)}),this.editorDiv.contentEditable=!0;const{style:$}=this.editorDiv;if($.fontSize=`calc(${y(this,f)}px * var(--scale-factor))`,$.color=y(this,N),this.div.append(this.editorDiv),this.overlayDiv=document.createElement("div"),this.overlayDiv.classList.add("overlay","enabled"),this.div.append(this.overlayDiv),(0,_.bindEvents)(this,this.div,["dblclick","keydown"]),this.width){const[Y,Q]=this.parentDimensions;this.setAt(n*Y,j*Q,this.width*Y,this.height*Q);for(const et of y(this,T).split(`
`)){const ut=document.createElement("div");ut.append(et?document.createTextNode(et):document.createElement("br")),this.editorDiv.append(ut)}this.div.draggable=!0,this.editorDiv.contentEditable=!1}else this.div.draggable=!1,this.editorDiv.contentEditable=!0;return this.div}get contentDiv(){return this.editorDiv}static deserialize(n,j,$){const Y=super.deserialize(n,j,$);return gt(Y,f,n.fontSize),gt(Y,N,h.Util.makeHexColor(...n.color)),gt(Y,T,n.value),Y}serialize(){if(this.isEmpty())return null;const n=o._internalPadding*this.parentScale,j=this.getRect(n,n),$=W.AnnotationEditor._colorManager.convert(this.isAttachedToDOM?getComputedStyle(this.editorDiv).color:y(this,N));return{annotationType:h.AnnotationEditorType.FREETEXT,color:$,fontSize:y(this,f),value:y(this,T),pageIndex:this.pageIndex,rect:j,rotation:this.rotation}}};let q=o;Z=new WeakMap,L=new WeakMap,F=new WeakMap,v=new WeakMap,N=new WeakMap,T=new WeakMap,x=new WeakMap,g=new WeakMap,f=new WeakMap,l=new WeakSet,Ve=function(n){const j=Y=>{this.editorDiv.style.fontSize=`calc(${Y}px * var(--scale-factor))`,this.translate(0,-(Y-y(this,f))*this.parentScale),gt(this,f,Y),it(this,a,Te).call(this)},$=y(this,f);this.addCommands({cmd:()=>{j(n)},undo:()=>{j($)},mustExec:!0,type:h.AnnotationEditorParamsType.FREETEXT_SIZE,overwriteIfSameType:!0,keepUndo:!0})},S=new WeakSet,$e=function(n){const j=y(this,N);this.addCommands({cmd:()=>{gt(this,N,this.editorDiv.style.color=n)},undo:()=>{gt(this,N,this.editorDiv.style.color=j)},mustExec:!0,type:h.AnnotationEditorParamsType.FREETEXT_COLOR,overwriteIfSameType:!0,keepUndo:!0})},m=new WeakSet,Xe=function(){const n=this.editorDiv.getElementsByTagName("div");if(n.length===0)return this.editorDiv.innerText;const j=[];for(const $ of n)j.push($.innerText.replace(/\r\n?|\n/,""));return j.join(`
`)},a=new WeakSet,Te=function(){const[n,j]=this.parentDimensions;let $;if(this.isAttachedToDOM)$=this.div.getBoundingClientRect();else{const{currentLayer:Y,div:Q}=this,et=Q.style.display;Q.style.display="hidden",Y.div.append(this.div),$=Q.getBoundingClientRect(),Q.remove(),Q.style.display=et}this.width=$.width/n,this.height=$.height/j},Lt(q,"_freeTextDefaultContent",""),Lt(q,"_l10nPromise"),Lt(q,"_internalPadding",0),Lt(q,"_defaultColor",null),Lt(q,"_defaultFontSize",10),Lt(q,"_keyboardManager",new _.KeyboardManager([[["ctrl+Enter","mac+meta+Enter","Escape","mac+Escape"],o.prototype.commitOrRemove]])),Lt(q,"_type","freetext"),i.FreeTextEditor=q},(B,i,U)=>{var F,v,N,T,x,g,f,l,A,S,w,m,e,a,c,ze,d,Ye,n,Ke,$,Je,Q,Pe,ut,Qe,ht,Ze,_t,tn,At,Xt,u,Ce,P,le,O,ce,G,Zt,D,xe,s,he,E,we,V,en,J,nn,ot,sn,at,Re,pt,de,vt,te,K,ke;Object.defineProperty(i,"__esModule",{value:!0}),i.InkEditor=void 0,Object.defineProperty(i,"fitCurve",{enumerable:!0,get:function(){return W.fitCurve}});var h=U(1),_=U(4),W=U(30),q=U(5);const Z=16,Et=class extends _.AnnotationEditor{constructor(R){super({...R,name:"inkEditor"});tt(this,c);tt(this,d);tt(this,n);tt(this,$);tt(this,Q);tt(this,ut);tt(this,ht);tt(this,_t);tt(this,At);tt(this,u);tt(this,P);tt(this,O);tt(this,G);tt(this,D);tt(this,s);tt(this,V);tt(this,J);tt(this,ot);tt(this,at);tt(this,pt);tt(this,vt);tt(this,K);tt(this,F,0);tt(this,v,0);tt(this,N,0);tt(this,T,this.canvasPointermove.bind(this));tt(this,x,this.canvasPointerleave.bind(this));tt(this,g,this.canvasPointerup.bind(this));tt(this,f,this.canvasPointerdown.bind(this));tt(this,l,!1);tt(this,A,!1);tt(this,S,null);tt(this,w,null);tt(this,m,0);tt(this,e,0);tt(this,a,null);this.color=R.color||null,this.thickness=R.thickness||null,this.opacity=R.opacity||null,this.paths=[],this.bezierPath2D=[],this.currentPath=[],this.scaleFactor=1,this.translationX=this.translationY=0,this.x=0,this.y=0}static initialize(R){this._l10nPromise=new Map(["editor_ink_canvas_aria_label","editor_ink2_aria_label"].map(I=>[I,R.get(I)]))}static updateDefaultParams(R,I){switch(R){case h.AnnotationEditorParamsType.INK_THICKNESS:Et._defaultThickness=I;break;case h.AnnotationEditorParamsType.INK_COLOR:Et._defaultColor=I;break;case h.AnnotationEditorParamsType.INK_OPACITY:Et._defaultOpacity=I/100;break}}updateParams(R,I){switch(R){case h.AnnotationEditorParamsType.INK_THICKNESS:it(this,c,ze).call(this,I);break;case h.AnnotationEditorParamsType.INK_COLOR:it(this,d,Ye).call(this,I);break;case h.AnnotationEditorParamsType.INK_OPACITY:it(this,n,Ke).call(this,I);break}}static get defaultPropertiesToUpdate(){return[[h.AnnotationEditorParamsType.INK_THICKNESS,Et._defaultThickness],[h.AnnotationEditorParamsType.INK_COLOR,Et._defaultColor||_.AnnotationEditor._defaultLineColor],[h.AnnotationEditorParamsType.INK_OPACITY,Math.round(Et._defaultOpacity*100)]]}get propertiesToUpdate(){return[[h.AnnotationEditorParamsType.INK_THICKNESS,this.thickness||Et._defaultThickness],[h.AnnotationEditorParamsType.INK_COLOR,this.color||Et._defaultColor||_.AnnotationEditor._defaultLineColor],[h.AnnotationEditorParamsType.INK_OPACITY,Math.round(100*(this.opacity??Et._defaultOpacity))]]}rebuild(){super.rebuild(),this.div!==null&&(this.canvas||(it(this,P,le).call(this),it(this,O,ce).call(this)),this.isAttachedToDOM||(this.parent.add(this),it(this,G,Zt).call(this)),it(this,vt,te).call(this))}remove(){this.canvas!==null&&(this.isEmpty()||this.commit(),this.canvas.width=this.canvas.height=0,this.canvas.remove(),this.canvas=null,y(this,w).disconnect(),gt(this,w,null),super.remove())}setParent(R){!this.parent&&R?this._uiManager.removeShouldRescale(this):this.parent&&R===null&&this._uiManager.addShouldRescale(this),super.setParent(R)}onScaleChanging(){const[R,I]=this.parentDimensions,ct=this.width*R,bt=this.height*I;this.setDimensions(ct,bt)}enableEditMode(){y(this,l)||this.canvas===null||(super.enableEditMode(),this.div.draggable=!1,this.canvas.addEventListener("pointerdown",y(this,f)),this.canvas.addEventListener("pointerup",y(this,g)))}disableEditMode(){!this.isInEditMode()||this.canvas===null||(super.disableEditMode(),this.div.draggable=!this.isEmpty(),this.div.classList.remove("editing"),this.canvas.removeEventListener("pointerdown",y(this,f)),this.canvas.removeEventListener("pointerup",y(this,g)))}onceAdded(){this.div.draggable=!this.isEmpty()}isEmpty(){return this.paths.length===0||this.paths.length===1&&this.paths[0].length===0}commit(){y(this,l)||(super.commit(),this.isEditing=!1,this.disableEditMode(),this.setInForeground(),gt(this,l,!0),this.div.classList.add("disabled"),it(this,vt,te).call(this,!0),this.parent.addInkEditorIfNeeded(!0),this.parent.moveEditorInDOM(this),this.div.focus({preventScroll:!0}))}focusin(R){super.focusin(R),this.enableEditMode()}canvasPointerdown(R){R.button!==0||!this.isInEditMode()||y(this,l)||(this.setInForeground(),R.type!=="mouse"&&this.div.focus(),R.stopPropagation(),this.canvas.addEventListener("pointerleave",y(this,x)),this.canvas.addEventListener("pointermove",y(this,T)),it(this,ut,Qe).call(this,R.offsetX,R.offsetY))}canvasPointermove(R){R.stopPropagation(),it(this,ht,Ze).call(this,R.offsetX,R.offsetY)}canvasPointerup(R){R.button===0&&this.isInEditMode()&&this.currentPath.length!==0&&(R.stopPropagation(),it(this,u,Ce).call(this,R),this.setInBackground())}canvasPointerleave(R){it(this,u,Ce).call(this,R),this.setInBackground()}render(){if(this.div)return this.div;let R,I;this.width&&(R=this.x,I=this.y),super.render(),Et._l10nPromise.get("editor_ink2_aria_label").then(kt=>{var Rt;return(Rt=this.div)==null?void 0:Rt.setAttribute("aria-label",kt)});const[ct,bt,Ct,wt]=it(this,$,Je).call(this);if(this.setAt(ct,bt,0,0),this.setDims(Ct,wt),it(this,P,le).call(this),this.width){const[kt,Rt]=this.parentDimensions;this.setAt(R*kt,I*Rt,this.width*kt,this.height*Rt),gt(this,A,!0),it(this,G,Zt).call(this),this.setDims(this.width*kt,this.height*Rt),it(this,At,Xt).call(this),it(this,K,ke).call(this),this.div.classList.add("disabled")}else this.div.classList.add("editing"),this.enableEditMode();return it(this,O,ce).call(this),this.div}setDimensions(R,I){const ct=Math.round(R),bt=Math.round(I);if(y(this,m)===ct&&y(this,e)===bt)return;gt(this,m,ct),gt(this,e,bt),this.canvas.style.visibility="hidden",y(this,F)&&Math.abs(y(this,F)-R/I)>.01&&(I=Math.ceil(R/y(this,F)),this.setDims(R,I));const[Ct,wt]=this.parentDimensions;this.width=R/Ct,this.height=I/wt,y(this,l)&&it(this,D,xe).call(this,R,I),it(this,G,Zt).call(this),it(this,At,Xt).call(this),this.canvas.style.visibility="visible",this.fixDims()}static deserialize(R,I,ct){var Dt,It;const bt=super.deserialize(R,I,ct);bt.thickness=R.thickness,bt.color=h.Util.makeHexColor(...R.color),bt.opacity=R.opacity;const[Ct,wt]=bt.pageDimensions,kt=bt.width*Ct,Rt=bt.height*wt,Ot=bt.parentScale,xt=R.thickness/2;gt(bt,F,kt/Rt),gt(bt,l,!0),gt(bt,m,Math.round(kt)),gt(bt,e,Math.round(Rt));for(const{bezier:Ft}of R.paths){const Ut=[];bt.paths.push(Ut);let Gt=Ot*(Ft[0]-xt),Wt=Ot*(Rt-Ft[1]-xt);for(let jt=2,Bt=Ft.length;jt<Bt;jt+=6){const Vt=Ot*(Ft[jt]-xt),zt=Ot*(Rt-Ft[jt+1]-xt),se=Ot*(Ft[jt+2]-xt),ie=Ot*(Rt-Ft[jt+3]-xt),Oe=Ot*(Ft[jt+4]-xt),De=Ot*(Rt-Ft[jt+5]-xt);Ut.push([[Gt,Wt],[Vt,zt],[se,ie],[Oe,De]]),Gt=Oe,Wt=De}const qt=it(this,E,we).call(this,Ut);bt.bezierPath2D.push(qt)}const Nt=it(Dt=bt,at,Re).call(Dt);return gt(bt,N,Math.max(Z,Nt[2]-Nt[0])),gt(bt,v,Math.max(Z,Nt[3]-Nt[1])),it(It=bt,D,xe).call(It,kt,Rt),bt}serialize(){if(this.isEmpty())return null;const R=this.getRect(0,0),I=this.rotation%180===0?R[3]-R[1]:R[2]-R[0],ct=_.AnnotationEditor._colorManager.convert(this.ctx.strokeStyle);return{annotationType:h.AnnotationEditorType.INK,color:ct,thickness:this.thickness,opacity:this.opacity,paths:it(this,V,en).call(this,this.scaleFactor/this.parentScale,this.translationX,this.translationY,I),pageIndex:this.pageIndex,rect:R,rotation:this.rotation}}};let L=Et;F=new WeakMap,v=new WeakMap,N=new WeakMap,T=new WeakMap,x=new WeakMap,g=new WeakMap,f=new WeakMap,l=new WeakMap,A=new WeakMap,S=new WeakMap,w=new WeakMap,m=new WeakMap,e=new WeakMap,a=new WeakMap,c=new WeakSet,ze=function(R){const I=this.thickness;this.addCommands({cmd:()=>{this.thickness=R,it(this,vt,te).call(this)},undo:()=>{this.thickness=I,it(this,vt,te).call(this)},mustExec:!0,type:h.AnnotationEditorParamsType.INK_THICKNESS,overwriteIfSameType:!0,keepUndo:!0})},d=new WeakSet,Ye=function(R){const I=this.color;this.addCommands({cmd:()=>{this.color=R,it(this,At,Xt).call(this)},undo:()=>{this.color=I,it(this,At,Xt).call(this)},mustExec:!0,type:h.AnnotationEditorParamsType.INK_COLOR,overwriteIfSameType:!0,keepUndo:!0})},n=new WeakSet,Ke=function(R){R/=100;const I=this.opacity;this.addCommands({cmd:()=>{this.opacity=R,it(this,At,Xt).call(this)},undo:()=>{this.opacity=I,it(this,At,Xt).call(this)},mustExec:!0,type:h.AnnotationEditorParamsType.INK_OPACITY,overwriteIfSameType:!0,keepUndo:!0})},$=new WeakSet,Je=function(){const{parentRotation:R,parentDimensions:[I,ct]}=this;switch(R){case 90:return[0,ct,ct,I];case 180:return[I,ct,I,ct];case 270:return[I,0,ct,I];default:return[0,0,I,ct]}},Q=new WeakSet,Pe=function(){const{ctx:R,color:I,opacity:ct,thickness:bt,parentScale:Ct,scaleFactor:wt}=this;R.lineWidth=bt*Ct/wt,R.lineCap="round",R.lineJoin="round",R.miterLimit=10,R.strokeStyle=`${I}${(0,q.opacityToHex)(ct)}`},ut=new WeakSet,Qe=function(R,I){this.isEditing=!0,y(this,A)||(gt(this,A,!0),it(this,G,Zt).call(this),this.thickness||(this.thickness=Et._defaultThickness),this.color||(this.color=Et._defaultColor||_.AnnotationEditor._defaultLineColor),this.opacity??(this.opacity=Et._defaultOpacity)),this.currentPath.push([R,I]),gt(this,S,null),it(this,Q,Pe).call(this),this.ctx.beginPath(),this.ctx.moveTo(R,I),gt(this,a,()=>{y(this,a)&&(y(this,S)&&(this.isEmpty()?(this.ctx.setTransform(1,0,0,1,0,0),this.ctx.clearRect(0,0,this.canvas.width,this.canvas.height)):it(this,At,Xt).call(this),this.ctx.lineTo(...y(this,S)),gt(this,S,null),this.ctx.stroke()),window.requestAnimationFrame(y(this,a)))}),window.requestAnimationFrame(y(this,a))},ht=new WeakSet,Ze=function(R,I){const[ct,bt]=this.currentPath.at(-1);R===ct&&I===bt||(this.currentPath.push([R,I]),gt(this,S,[R,I]))},_t=new WeakSet,tn=function(R,I){var Ot;this.ctx.closePath(),gt(this,a,null),R=Math.min(Math.max(R,0),this.canvas.width),I=Math.min(Math.max(I,0),this.canvas.height);const[ct,bt]=this.currentPath.at(-1);(R!==ct||I!==bt)&&this.currentPath.push([R,I]);let Ct;if(this.currentPath.length!==1)Ct=(0,W.fitCurve)(this.currentPath,30,null);else{const xt=[R,I];Ct=[[xt,xt.slice(),xt.slice(),xt]]}const wt=it(Ot=Et,E,we).call(Ot,Ct);this.currentPath.length=0;const kt=()=>{this.paths.push(Ct),this.bezierPath2D.push(wt),this.rebuild()},Rt=()=>{this.paths.pop(),this.bezierPath2D.pop(),this.paths.length===0?this.remove():(this.canvas||(it(this,P,le).call(this),it(this,O,ce).call(this)),it(this,vt,te).call(this))};this.addCommands({cmd:kt,undo:Rt,mustExec:!0})},At=new WeakSet,Xt=function(){if(this.isEmpty()){it(this,s,he).call(this);return}it(this,Q,Pe).call(this);const{canvas:R,ctx:I}=this;I.setTransform(1,0,0,1,0,0),I.clearRect(0,0,R.width,R.height),it(this,s,he).call(this);for(const ct of this.bezierPath2D)I.stroke(ct)},u=new WeakSet,Ce=function(R){it(this,_t,tn).call(this,R.offsetX,R.offsetY),this.canvas.removeEventListener("pointerleave",y(this,x)),this.canvas.removeEventListener("pointermove",y(this,T)),this.addToAnnotationStorage()},P=new WeakSet,le=function(){this.canvas=document.createElement("canvas"),this.canvas.width=this.canvas.height=0,this.canvas.className="inkEditorCanvas",Et._l10nPromise.get("editor_ink_canvas_aria_label").then(R=>{var I;return(I=this.canvas)==null?void 0:I.setAttribute("aria-label",R)}),this.div.append(this.canvas),this.ctx=this.canvas.getContext("2d")},O=new WeakSet,ce=function(){gt(this,w,new ResizeObserver(R=>{const I=R[0].contentRect;I.width&&I.height&&this.setDimensions(I.width,I.height)})),y(this,w).observe(this.div)},G=new WeakSet,Zt=function(){if(!y(this,A))return;const[R,I]=this.parentDimensions;this.canvas.width=Math.ceil(this.width*R),this.canvas.height=Math.ceil(this.height*I),it(this,s,he).call(this)},D=new WeakSet,xe=function(R,I){const ct=it(this,pt,de).call(this),bt=(R-ct)/y(this,N),Ct=(I-ct)/y(this,v);this.scaleFactor=Math.min(bt,Ct)},s=new WeakSet,he=function(){const R=it(this,pt,de).call(this)/2;this.ctx.setTransform(this.scaleFactor,0,0,this.scaleFactor,this.translationX*this.scaleFactor+R,this.translationY*this.scaleFactor+R)},E=new WeakSet,we=function(R){const I=new Path2D;for(let ct=0,bt=R.length;ct<bt;ct++){const[Ct,wt,kt,Rt]=R[ct];ct===0&&I.moveTo(...Ct),I.bezierCurveTo(wt[0],wt[1],kt[0],kt[1],Rt[0],Rt[1])}return I},V=new WeakSet,en=function(R,I,ct,bt){const wt=[],kt=this.thickness/2;let Rt,Ot;for(const xt of this.paths){Rt=[],Ot=[];for(let Nt=0,Dt=xt.length;Nt<Dt;Nt++){const[It,Ft,Ut,Gt]=xt[Nt],Wt=R*(It[0]+I)+kt,qt=bt-R*(It[1]+ct)-kt,jt=R*(Ft[0]+I)+kt,Bt=bt-R*(Ft[1]+ct)-kt,Vt=R*(Ut[0]+I)+kt,zt=bt-R*(Ut[1]+ct)-kt,se=R*(Gt[0]+I)+kt,ie=bt-R*(Gt[1]+ct)-kt;Nt===0&&(Rt.push(Wt,qt),Ot.push(Wt,qt)),Rt.push(jt,Bt,Vt,zt,se,ie),it(this,J,nn).call(this,Wt,qt,jt,Bt,Vt,zt,se,ie,4,Ot)}wt.push({bezier:Rt,points:Ot})}return wt},J=new WeakSet,nn=function(R,I,ct,bt,Ct,wt,kt,Rt,Ot,xt){if(it(this,ot,sn).call(this,R,I,ct,bt,Ct,wt,kt,Rt)){xt.push(kt,Rt);return}for(let Nt=1;Nt<Ot-1;Nt++){const Dt=Nt/Ot,It=1-Dt;let Ft=Dt*R+It*ct,Ut=Dt*I+It*bt,Gt=Dt*ct+It*Ct,Wt=Dt*bt+It*wt;const qt=Dt*Ct+It*kt,jt=Dt*wt+It*Rt;Ft=Dt*Ft+It*Gt,Ut=Dt*Ut+It*Wt,Gt=Dt*Gt+It*qt,Wt=Dt*Wt+It*jt,Ft=Dt*Ft+It*Gt,Ut=Dt*Ut+It*Wt,xt.push(Ft,Ut)}xt.push(kt,Rt)},ot=new WeakSet,sn=function(R,I,ct,bt,Ct,wt,kt,Rt){const xt=(3*ct-2*R-kt)**2,Nt=(3*bt-2*I-Rt)**2,Dt=(3*Ct-R-2*kt)**2,It=(3*wt-I-2*Rt)**2;return Math.max(xt,Dt)+Math.max(Nt,It)<=10},at=new WeakSet,Re=function(){let R=1/0,I=-1/0,ct=1/0,bt=-1/0;for(const Ct of this.paths)for(const[wt,kt,Rt,Ot]of Ct){const xt=h.Util.bezierBoundingBox(...wt,...kt,...Rt,...Ot);R=Math.min(R,xt[0]),ct=Math.min(ct,xt[1]),I=Math.max(I,xt[2]),bt=Math.max(bt,xt[3])}return[R,ct,I,bt]},pt=new WeakSet,de=function(){return y(this,l)?Math.ceil(this.thickness*this.parentScale):0},vt=new WeakSet,te=function(R=!1){if(this.isEmpty())return;if(!y(this,l)){it(this,At,Xt).call(this);return}const I=it(this,at,Re).call(this),ct=it(this,pt,de).call(this);gt(this,N,Math.max(Z,I[2]-I[0])),gt(this,v,Math.max(Z,I[3]-I[1]));const bt=Math.ceil(ct+y(this,N)*this.scaleFactor),Ct=Math.ceil(ct+y(this,v)*this.scaleFactor),[wt,kt]=this.parentDimensions;this.width=bt/wt,this.height=Ct/kt,gt(this,F,bt/Ct),it(this,K,ke).call(this);const Rt=this.translationX,Ot=this.translationY;this.translationX=-I[0],this.translationY=-I[1],it(this,G,Zt).call(this),it(this,At,Xt).call(this),gt(this,m,bt),gt(this,e,Ct),this.setDims(bt,Ct);const xt=R?ct/this.scaleFactor/2:0;this.translate(Rt-this.translationX-xt,Ot-this.translationY-xt)},K=new WeakSet,ke=function(){const{style:R}=this.div;y(this,F)>=1?(R.minHeight=`${Z}px`,R.minWidth=`${Math.round(y(this,F)*Z)}px`):(R.minWidth=`${Z}px`,R.minHeight=`${Math.round(Z/y(this,F))}px`)},tt(L,E),Lt(L,"_defaultColor",null),Lt(L,"_defaultOpacity",1),Lt(L,"_defaultThickness",1),Lt(L,"_l10nPromise"),Lt(L,"_type","ink"),i.InkEditor=L},(B,i,U)=>{Object.defineProperty(i,"__esModule",{value:!0}),i.fitCurve=void 0;const h=U(31);i.fitCurve=h},B=>{function i(g,f,l){if(!Array.isArray(g))throw new TypeError("First argument should be an array");if(g.forEach(m=>{if(!Array.isArray(m)||m.some(e=>typeof e!="number")||m.length!==g[0].length)throw Error("Each point should be an array of numbers. Each point should have the same amount of numbers.")}),g=g.filter((m,e)=>e===0||!m.every((a,c)=>a===g[e-1][c])),g.length<2)return[];const A=g.length,S=N(g[1],g[0]),w=N(g[A-2],g[A-1]);return U(g,S,w,f,l)}function U(g,f,l,A,S){var m,e,a,c,o,d,k,n,j,$,Y,Q,et;if(g.length===2)return Q=T.vectorLen(T.subtract(g[0],g[1]))/3,m=[g[0],T.addArrays(g[0],T.mulItems(f,Q)),T.addArrays(g[1],T.mulItems(l,Q)),g[1]],[m];if(e=Z(g),[m,c,d]=h(g,e,e,f,l,S),c===0||c<A)return[m];if(c<A*A)for(a=e,o=c,k=d,et=0;et<20;et++){if(a=W(m,g,a),[m,c,d]=h(g,e,a,f,l,S),c<A)return[m];if(d===k){let ut=c/o;if(ut>.9999&&ut<1.0001)break}o=c,k=d}return Y=[],n=T.subtract(g[d-1],g[d+1]),n.every(ut=>ut===0)&&(n=T.subtract(g[d-1],g[d]),[n[0],n[1]]=[-n[1],n[0]]),j=T.normalize(n),$=T.mulItems(j,-1),Y=Y.concat(U(g.slice(0,d+1),f,j,A,S)),Y=Y.concat(U(g.slice(d),$,l,A,S)),Y}function h(g,f,l,A,S,w){var m,e,a;return m=_(g,l,A,S),[e,a]=L(g,m,f),w&&w({bez:m,points:g,params:f,maxErr:e,maxPoint:a}),[m,e,a]}function _(g,f,l,A){var S,w,m,e,a,c,o,d,k,n,j,$,Y,Q,et,ut,lt,ht=g[0],mt=g[g.length-1];for(S=[ht,null,null,mt],w=T.zeros_Xx2x2(f.length),Y=0,Q=f.length;Y<Q;Y++)ut=f[Y],lt=1-ut,m=w[Y],m[0]=T.mulItems(l,3*ut*(lt*lt)),m[1]=T.mulItems(A,3*lt*(ut*ut));for(e=[[0,0],[0,0]],a=[0,0],Y=0,Q=g.length;Y<Q;Y++)ut=f[Y],m=w[Y],e[0][0]+=T.dot(m[0],m[0]),e[0][1]+=T.dot(m[0],m[1]),e[1][0]+=T.dot(m[0],m[1]),e[1][1]+=T.dot(m[1],m[1]),et=T.subtract(g[Y],x.q([ht,ht,mt,mt],ut)),a[0]+=T.dot(m[0],et),a[1]+=T.dot(m[1],et);return c=e[0][0]*e[1][1]-e[1][0]*e[0][1],o=e[0][0]*a[1]-e[1][0]*a[0],d=a[0]*e[1][1]-a[1]*e[0][1],k=c===0?0:d/c,n=c===0?0:o/c,$=T.vectorLen(T.subtract(ht,mt)),j=1e-6*$,k<j||n<j?(S[1]=T.addArrays(ht,T.mulItems(l,$/3)),S[2]=T.addArrays(mt,T.mulItems(A,$/3))):(S[1]=T.addArrays(ht,T.mulItems(l,k)),S[2]=T.addArrays(mt,T.mulItems(A,n))),S}function W(g,f,l){return l.map((A,S)=>q(g,f[S],A))}function q(g,f,l){var A=T.subtract(x.q(g,l),f),S=x.qprime(g,l),w=T.mulMatrix(A,S),m=T.sum(T.squareItems(S))+2*T.mulMatrix(A,x.qprimeprime(g,l));return m===0?l:l-w/m}function Z(g){var f=[],l,A,S;return g.forEach((w,m)=>{l=m?A+T.vectorLen(T.subtract(w,S)):0,f.push(l),A=l,S=w}),f=f.map(w=>w/A),f}function L(g,f,l){var A,S,w,m,e,a,c,o;S=0,w=Math.floor(g.length/2);const d=F(f,10);for(e=0,a=g.length;e<a;e++)c=g[e],o=v(f,l[e],d,10),m=T.subtract(x.q(f,o),c),A=m[0]*m[0]+m[1]*m[1],A>S&&(S=A,w=e);return[S,w]}var F=function(g,f){for(var l,A=[0],S=g[0],w=0,m=1;m<=f;m++)l=x.q(g,m/f),w+=T.vectorLen(T.subtract(l,S)),A.push(w),S=l;return A=A.map(e=>e/w),A};function v(g,f,l,A){if(f<0)return 0;if(f>1)return 1;for(var S,w,m,e,a,c=1;c<=A;c++)if(f<=l[c]){e=(c-1)/A,m=c/A,w=l[c-1],S=l[c],a=(f-w)/(S-w)*(m-e)+e;break}return a}function N(g,f){return T.normalize(T.subtract(g,f))}class T{static zeros_Xx2x2(f){for(var l=[];f--;)l.push([0,0]);return l}static mulItems(f,l){return f.map(A=>A*l)}static mulMatrix(f,l){return f.reduce((A,S,w)=>A+S*l[w],0)}static subtract(f,l){return f.map((A,S)=>A-l[S])}static addArrays(f,l){return f.map((A,S)=>A+l[S])}static addItems(f,l){return f.map(A=>A+l)}static sum(f){return f.reduce((l,A)=>l+A)}static dot(f,l){return T.mulMatrix(f,l)}static vectorLen(f){return Math.hypot(...f)}static divItems(f,l){return f.map(A=>A/l)}static squareItems(f){return f.map(l=>l*l)}static normalize(f){return this.divItems(f,this.vectorLen(f))}}class x{static q(f,l){var A=1-l,S=T.mulItems(f[0],A*A*A),w=T.mulItems(f[1],3*A*A*l),m=T.mulItems(f[2],3*A*l*l),e=T.mulItems(f[3],l*l*l);return T.addArrays(T.addArrays(S,w),T.addArrays(m,e))}static qprime(f,l){var A=1-l,S=T.mulItems(T.subtract(f[1],f[0]),3*A*A),w=T.mulItems(T.subtract(f[2],f[1]),6*A*l),m=T.mulItems(T.subtract(f[3],f[2]),3*l*l);return T.addArrays(T.addArrays(S,w),m)}static qprimeprime(f,l){return T.addArrays(T.mulItems(T.addArrays(T.subtract(f[2],T.mulItems(f[1],2)),f[0]),6*(1-l)),T.mulItems(T.addArrays(T.subtract(f[3],T.mulItems(f[2],2)),f[1]),6*l))}}B.exports=i,B.exports.fitCubic=U,B.exports.createTangent=N},(B,i,U)=>{var At,Kt,u,rn,H,Fe,z,Me;Object.defineProperty(i,"__esModule",{value:!0}),i.AnnotationLayer=void 0;var h=U(1),_=U(6),W=U(3),q=U(33),Z=U(34);const L=1e3,F=9,v=new WeakSet;function N(D){return{width:D[2]-D[0],height:D[3]-D[1]}}class T{static create(t){switch(t.data.annotationType){case h.AnnotationType.LINK:return new g(t);case h.AnnotationType.TEXT:return new f(t);case h.AnnotationType.WIDGET:switch(t.data.fieldType){case"Tx":return new A(t);case"Btn":return t.data.radioButton?new w(t):t.data.checkBox?new S(t):new m(t);case"Ch":return new e(t)}return new l(t);case h.AnnotationType.POPUP:return new a(t);case h.AnnotationType.FREETEXT:return new o(t);case h.AnnotationType.LINE:return new d(t);case h.AnnotationType.SQUARE:return new k(t);case h.AnnotationType.CIRCLE:return new n(t);case h.AnnotationType.POLYLINE:return new j(t);case h.AnnotationType.CARET:return new Y(t);case h.AnnotationType.INK:return new Q(t);case h.AnnotationType.POLYGON:return new $(t);case h.AnnotationType.HIGHLIGHT:return new et(t);case h.AnnotationType.UNDERLINE:return new ut(t);case h.AnnotationType.SQUIGGLY:return new lt(t);case h.AnnotationType.STRIKEOUT:return new ht(t);case h.AnnotationType.STAMP:return new mt(t);case h.AnnotationType.FILEATTACHMENT:return new _t(t);default:return new x(t)}}}class x{constructor(t,{isRenderable:s=!1,ignoreBorder:b=!1,createQuadrilaterals:E=!1}={}){this.isRenderable=s,this.data=t.data,this.layer=t.layer,this.page=t.page,this.viewport=t.viewport,this.linkService=t.linkService,this.downloadManager=t.downloadManager,this.imageResourcesPath=t.imageResourcesPath,this.renderForms=t.renderForms,this.svgFactory=t.svgFactory,this.annotationStorage=t.annotationStorage,this.enableScripting=t.enableScripting,this.hasJSActions=t.hasJSActions,this._fieldObjects=t.fieldObjects,s&&(this.container=this._createContainer(b)),E&&(this.quadrilaterals=this._createQuadrilaterals(b))}_createContainer(t=!1){const{data:s,page:b,viewport:E}=this,C=document.createElement("section");C.setAttribute("data-annotation-id",s.id),s.noRotate&&C.classList.add("norotate");const{pageWidth:V,pageHeight:st,pageX:J,pageY:rt}=E.rawDims,{width:ot,height:nt}=N(s.rect),at=h.Util.normalizeRect([s.rect[0],b.view[3]-s.rect[1]+b.view[1],s.rect[2],b.view[3]-s.rect[3]+b.view[1]]);if(!t&&s.borderStyle.width>0){C.style.borderWidth=`${s.borderStyle.width}px`;const pt=s.borderStyle.horizontalCornerRadius,Tt=s.borderStyle.verticalCornerRadius;if(pt>0||Tt>0){const Pt=`calc(${pt}px * var(--scale-factor)) / calc(${Tt}px * var(--scale-factor))`;C.style.borderRadius=Pt}else if(this instanceof w){const Pt=`calc(${ot}px * var(--scale-factor)) / calc(${nt}px * var(--scale-factor))`;C.style.borderRadius=Pt}switch(s.borderStyle.style){case h.AnnotationBorderStyleType.SOLID:C.style.borderStyle="solid";break;case h.AnnotationBorderStyleType.DASHED:C.style.borderStyle="dashed";break;case h.AnnotationBorderStyleType.BEVELED:(0,h.warn)("Unimplemented border style: beveled");break;case h.AnnotationBorderStyleType.INSET:(0,h.warn)("Unimplemented border style: inset");break;case h.AnnotationBorderStyleType.UNDERLINE:C.style.borderBottomStyle="solid";break}const vt=s.borderColor||null;vt?C.style.borderColor=h.Util.makeHexColor(vt[0]|0,vt[1]|0,vt[2]|0):C.style.borderWidth=0}C.style.left=`${100*(at[0]-J)/V}%`,C.style.top=`${100*(at[1]-rt)/st}%`;const{rotation:ft}=s;return s.hasOwnCanvas||ft===0?(C.style.width=`${100*ot/V}%`,C.style.height=`${100*nt/st}%`):this.setRotation(ft,C),C}setRotation(t,s=this.container){const{pageWidth:b,pageHeight:E}=this.viewport.rawDims,{width:C,height:V}=N(this.data.rect);let st,J;t%180===0?(st=100*C/b,J=100*V/E):(st=100*V/b,J=100*C/E),s.style.width=`${st}%`,s.style.height=`${J}%`,s.setAttribute("data-main-rotation",(360-t)%360)}get _commonActions(){const t=(s,b,E)=>{const C=E.detail[s];E.target.style[b]=q.ColorConverters[`${C[0]}_HTML`](C.slice(1))};return(0,h.shadow)(this,"_commonActions",{display:s=>{const b=s.detail.display%2===1;this.container.style.visibility=b?"hidden":"visible",this.annotationStorage.setValue(this.data.id,{hidden:b,print:s.detail.display===0||s.detail.display===3})},print:s=>{this.annotationStorage.setValue(this.data.id,{print:s.detail.print})},hidden:s=>{this.container.style.visibility=s.detail.hidden?"hidden":"visible",this.annotationStorage.setValue(this.data.id,{hidden:s.detail.hidden})},focus:s=>{setTimeout(()=>s.target.focus({preventScroll:!1}),0)},userName:s=>{s.target.title=s.detail.userName},readonly:s=>{s.detail.readonly?s.target.setAttribute("readonly",""):s.target.removeAttribute("readonly")},required:s=>{this._setRequired(s.target,s.detail.required)},bgColor:s=>{t("bgColor","backgroundColor",s)},fillColor:s=>{t("fillColor","backgroundColor",s)},fgColor:s=>{t("fgColor","color",s)},textColor:s=>{t("textColor","color",s)},borderColor:s=>{t("borderColor","borderColor",s)},strokeColor:s=>{t("strokeColor","borderColor",s)},rotation:s=>{const b=s.detail.rotation;this.setRotation(b),this.annotationStorage.setValue(this.data.id,{rotation:b})}})}_dispatchEventFromSandbox(t,s){const b=this._commonActions;for(const E of Object.keys(s.detail)){const C=t[E]||b[E];C==null||C(s)}}_setDefaultPropertiesFromJS(t){if(!this.enableScripting)return;const s=this.annotationStorage.getRawValue(this.data.id);if(!s)return;const b=this._commonActions;for(const[E,C]of Object.entries(s)){const V=b[E];if(V){const st={detail:{[E]:C},target:t};V(st),delete s[E]}}}_createQuadrilaterals(t=!1){if(!this.data.quadPoints)return null;const s=[],b=this.data.rect;for(const E of this.data.quadPoints)this.data.rect=[E[2].x,E[2].y,E[1].x,E[1].y],s.push(this._createContainer(t));return this.data.rect=b,s}_createPopup(t,s){let b=this.container;this.quadrilaterals&&(t||(t=this.quadrilaterals),b=this.quadrilaterals[0]),t||(t=document.createElement("div"),t.classList.add("popupTriggerArea"),b.append(t));const C=new c({container:b,trigger:t,color:s.color,titleObj:s.titleObj,modificationDate:s.modificationDate,contentsObj:s.contentsObj,richText:s.richText,hideWrapper:!0}).render();C.style.left="100%",b.append(C)}_renderQuadrilaterals(t){for(const s of this.quadrilaterals)s.classList.add(t);return this.quadrilaterals}render(){(0,h.unreachable)("Abstract method `AnnotationElement.render` called")}_getElementsByName(t,s=null){const b=[];if(this._fieldObjects){const E=this._fieldObjects[t];if(E)for(const{page:C,id:V,exportValues:st}of E){if(C===-1||V===s)continue;const J=typeof st=="string"?st:null,rt=document.querySelector(`[data-element-id="${V}"]`);if(rt&&!v.has(rt)){(0,h.warn)(`_getElementsByName - element not allowed: ${V}`);continue}b.push({id:V,exportValue:J,domElement:rt})}return b}for(const E of document.getElementsByName(t)){const{exportValue:C}=E,V=E.getAttribute("data-element-id");V!==s&&v.has(E)&&b.push({id:V,exportValue:C,domElement:E})}return b}}class g extends x{constructor(s,b=null){super(s,{isRenderable:!0,ignoreBorder:!!(b!=null&&b.ignoreBorder),createQuadrilaterals:!0});tt(this,At);tt(this,u);this.isTooltipOnly=s.data.isTooltipOnly}render(){const{data:s,linkService:b}=this,E=document.createElement("a");E.setAttribute("data-element-id",s.id);let C=!1;return s.url?(b.addLinkAttributes(E,s.url,s.newWindow),C=!0):s.action?(this._bindNamedAction(E,s.action),C=!0):s.attachment?(this._bindAttachment(E,s.attachment),C=!0):s.setOCGState?(it(this,u,rn).call(this,E,s.setOCGState),C=!0):s.dest?(this._bindLink(E,s.dest),C=!0):(s.actions&&(s.actions.Action||s.actions["Mouse Up"]||s.actions["Mouse Down"])&&this.enableScripting&&this.hasJSActions&&(this._bindJSAction(E,s),C=!0),s.resetForm?(this._bindResetFormAction(E,s.resetForm),C=!0):this.isTooltipOnly&&!C&&(this._bindLink(E,""),C=!0)),this.quadrilaterals?this._renderQuadrilaterals("linkAnnotation").map((V,st)=>{const J=st===0?E:E.cloneNode();return V.append(J),V}):(this.container.classList.add("linkAnnotation"),C&&this.container.append(E),this.container)}_bindLink(s,b){s.href=this.linkService.getDestinationHash(b),s.onclick=()=>(b&&this.linkService.goToDestination(b),!1),(b||b==="")&&it(this,At,Kt).call(this)}_bindNamedAction(s,b){s.href=this.linkService.getAnchorUrl(""),s.onclick=()=>(this.linkService.executeNamedAction(b),!1),it(this,At,Kt).call(this)}_bindAttachment(s,b){s.href=this.linkService.getAnchorUrl(""),s.onclick=()=>{var E;return(E=this.downloadManager)==null||E.openOrDownloadData(this.container,b.content,b.filename),!1},it(this,At,Kt).call(this)}_bindJSAction(s,b){s.href=this.linkService.getAnchorUrl("");const E=new Map([["Action","onclick"],["Mouse Up","onmouseup"],["Mouse Down","onmousedown"]]);for(const C of Object.keys(b.actions)){const V=E.get(C);V&&(s[V]=()=>{var st;return(st=this.linkService.eventBus)==null||st.dispatch("dispatcheventinsandbox",{source:this,detail:{id:b.id,name:C}}),!1})}s.onclick||(s.onclick=()=>!1),it(this,At,Kt).call(this)}_bindResetFormAction(s,b){const E=s.onclick;if(E||(s.href=this.linkService.getAnchorUrl("")),it(this,At,Kt).call(this),!this._fieldObjects){(0,h.warn)('_bindResetFormAction - "resetForm" action not supported, ensure that the `fieldObjects` parameter is provided.'),E||(s.onclick=()=>!1);return}s.onclick=()=>{var nt;E==null||E();const{fields:C,refs:V,include:st}=b,J=[];if(C.length!==0||V.length!==0){const at=new Set(V);for(const ft of C){const pt=this._fieldObjects[ft]||[];for(const{id:Tt}of pt)at.add(Tt)}for(const ft of Object.values(this._fieldObjects))for(const pt of ft)at.has(pt.id)===st&&J.push(pt)}else for(const at of Object.values(this._fieldObjects))J.push(...at);const rt=this.annotationStorage,ot=[];for(const at of J){const{id:ft}=at;switch(ot.push(ft),at.type){case"text":{const Tt=at.defaultValue||"";rt.setValue(ft,{value:Tt});break}case"checkbox":case"radiobutton":{const Tt=at.defaultValue===at.exportValues;rt.setValue(ft,{value:Tt});break}case"combobox":case"listbox":{const Tt=at.defaultValue||"";rt.setValue(ft,{value:Tt});break}default:continue}const pt=document.querySelector(`[data-element-id="${ft}"]`);if(pt){if(!v.has(pt)){(0,h.warn)(`_bindResetFormAction - element not allowed: ${ft}`);continue}}else continue;pt.dispatchEvent(new Event("resetform"))}return this.enableScripting&&((nt=this.linkService.eventBus)==null||nt.dispatch("dispatcheventinsandbox",{source:this,detail:{id:"app",ids:ot,name:"ResetForm"}})),!1}}}At=new WeakSet,Kt=function(){this.container.setAttribute("data-internal-link","")},u=new WeakSet,rn=function(s,b){s.href=this.linkService.getAnchorUrl(""),s.onclick=()=>(this.linkService.executeSetOCGState(b),!1),it(this,At,Kt).call(this)};class f extends x{constructor(t){var b,E,C;const s=!!(t.data.hasPopup||(b=t.data.titleObj)!=null&&b.str||(E=t.data.contentsObj)!=null&&E.str||(C=t.data.richText)!=null&&C.str);super(t,{isRenderable:s})}render(){this.container.classList.add("textAnnotation");const t=document.createElement("img");return t.src=this.imageResourcesPath+"annotation-"+this.data.name.toLowerCase()+".svg",t.alt="[{{type}} Annotation]",t.dataset.l10nId="text_annotation_type",t.dataset.l10nArgs=JSON.stringify({type:this.data.name}),this.data.hasPopup||this._createPopup(t,this.data),this.container.append(t),this.container}}class l extends x{render(){return this.data.alternativeText&&(this.container.title=this.data.alternativeText),this.container}showElementAndHideCanvas(t){var s;this.data.hasOwnCanvas&&(((s=t.previousSibling)==null?void 0:s.nodeName)==="CANVAS"&&(t.previousSibling.hidden=!0),t.hidden=!1)}_getKeyModifier(t){const{isWin:s,isMac:b}=h.FeatureTest.platform;return s&&t.ctrlKey||b&&t.metaKey}_setEventListener(t,s,b,E){s.includes("mouse")?t.addEventListener(s,C=>{var V;(V=this.linkService.eventBus)==null||V.dispatch("dispatcheventinsandbox",{source:this,detail:{id:this.data.id,name:b,value:E(C),shift:C.shiftKey,modifier:this._getKeyModifier(C)}})}):t.addEventListener(s,C=>{var V;(V=this.linkService.eventBus)==null||V.dispatch("dispatcheventinsandbox",{source:this,detail:{id:this.data.id,name:b,value:E(C)}})})}_setEventListeners(t,s,b){var E;for(const[C,V]of s)(V==="Action"||(E=this.data.actions)!=null&&E[V])&&this._setEventListener(t,C,V,b)}_setBackgroundColor(t){const s=this.data.backgroundColor||null;t.style.backgroundColor=s===null?"transparent":h.Util.makeHexColor(s[0],s[1],s[2])}_setTextStyle(t){const s=["left","center","right"],{fontColor:b}=this.data.defaultAppearanceData,E=this.data.defaultAppearanceData.fontSize||F,C=t.style;let V;const st=2,J=rt=>Math.round(10*rt)/10;if(this.data.multiLine){const rt=Math.abs(this.data.rect[3]-this.data.rect[1]-st),ot=Math.round(rt/(h.LINE_FACTOR*E))||1,nt=rt/ot;V=Math.min(E,J(nt/h.LINE_FACTOR))}else{const rt=Math.abs(this.data.rect[3]-this.data.rect[1]-st);V=Math.min(E,J(rt/h.LINE_FACTOR))}C.fontSize=`calc(${V}px * var(--scale-factor))`,C.color=h.Util.makeHexColor(b[0],b[1],b[2]),this.data.textAlignment!==null&&(C.textAlign=s[this.data.textAlignment])}_setRequired(t,s){s?t.setAttribute("required",!0):t.removeAttribute("required"),t.setAttribute("aria-required",s)}}class A extends l{constructor(t){const s=t.renderForms||!t.data.hasAppearance&&!!t.data.fieldValue;super(t,{isRenderable:s})}setPropertyOnSiblings(t,s,b,E){const C=this.annotationStorage;for(const V of this._getElementsByName(t.name,t.id))V.domElement&&(V.domElement[s]=b),C.setValue(V.id,{[E]:b})}render(){var E;const t=this.annotationStorage,s=this.data.id;this.container.classList.add("textWidgetAnnotation");let b=null;if(this.renderForms){const C=t.getValue(s,{value:this.data.fieldValue});let V=C.formattedValue||C.value||"";const st=t.getValue(s,{charLimit:this.data.maxLen}).charLimit;st&&V.length>st&&(V=V.slice(0,st));const J={userValue:V,formattedValue:null,lastCommittedValue:null,commitKey:1};this.data.multiLine?(b=document.createElement("textarea"),b.textContent=V,this.data.doNotScroll&&(b.style.overflowY="hidden")):(b=document.createElement("input"),b.type="text",b.setAttribute("value",V),this.data.doNotScroll&&(b.style.overflowX="hidden")),this.data.hasOwnCanvas&&(b.hidden=!0),v.add(b),b.setAttribute("data-element-id",s),b.disabled=this.data.readOnly,b.name=this.data.fieldName,b.tabIndex=L,this._setRequired(b,this.data.required),st&&(b.maxLength=st),b.addEventListener("input",ot=>{t.setValue(s,{value:ot.target.value}),this.setPropertyOnSiblings(b,"value",ot.target.value,"value")}),b.addEventListener("resetform",ot=>{const nt=this.data.defaultFieldValue??"";b.value=J.userValue=nt,J.formattedValue=null});let rt=ot=>{const{formattedValue:nt}=J;nt!=null&&(ot.target.value=nt),ot.target.scrollLeft=0};if(this.enableScripting&&this.hasJSActions){b.addEventListener("focus",nt=>{const{target:at}=nt;J.userValue&&(at.value=J.userValue),J.lastCommittedValue=at.value,J.commitKey=1}),b.addEventListener("updatefromsandbox",nt=>{this.showElementAndHideCanvas(nt.target);const at={value(ft){J.userValue=ft.detail.value??"",t.setValue(s,{value:J.userValue.toString()}),ft.target.value=J.userValue},formattedValue(ft){const{formattedValue:pt}=ft.detail;J.formattedValue=pt,pt!=null&&ft.target!==document.activeElement&&(ft.target.value=pt),t.setValue(s,{formattedValue:pt})},selRange(ft){ft.target.setSelectionRange(...ft.detail.selRange)},charLimit:ft=>{var Pt;const{charLimit:pt}=ft.detail,{target:Tt}=ft;if(pt===0){Tt.removeAttribute("maxLength");return}Tt.setAttribute("maxLength",pt);let vt=J.userValue;!vt||vt.length<=pt||(vt=vt.slice(0,pt),Tt.value=J.userValue=vt,t.setValue(s,{value:vt}),(Pt=this.linkService.eventBus)==null||Pt.dispatch("dispatcheventinsandbox",{source:this,detail:{id:s,name:"Keystroke",value:vt,willCommit:!0,commitKey:1,selStart:Tt.selectionStart,selEnd:Tt.selectionEnd}}))}};this._dispatchEventFromSandbox(at,nt)}),b.addEventListener("keydown",nt=>{var pt;J.commitKey=1;let at=-1;if(nt.key==="Escape"?at=0:nt.key==="Enter"&&!this.data.multiLine?at=2:nt.key==="Tab"&&(J.commitKey=3),at===-1)return;const{value:ft}=nt.target;J.lastCommittedValue!==ft&&(J.lastCommittedValue=ft,J.userValue=ft,(pt=this.linkService.eventBus)==null||pt.dispatch("dispatcheventinsandbox",{source:this,detail:{id:s,name:"Keystroke",value:ft,willCommit:!0,commitKey:at,selStart:nt.target.selectionStart,selEnd:nt.target.selectionEnd}}))});const ot=rt;rt=null,b.addEventListener("blur",nt=>{var ft;if(!nt.relatedTarget)return;const{value:at}=nt.target;J.userValue=at,J.lastCommittedValue!==at&&((ft=this.linkService.eventBus)==null||ft.dispatch("dispatcheventinsandbox",{source:this,detail:{id:s,name:"Keystroke",value:at,willCommit:!0,commitKey:J.commitKey,selStart:nt.target.selectionStart,selEnd:nt.target.selectionEnd}})),ot(nt)}),(E=this.data.actions)!=null&&E.Keystroke&&b.addEventListener("beforeinput",nt=>{var yt;J.lastCommittedValue=null;const{data:at,target:ft}=nt,{value:pt,selectionStart:Tt,selectionEnd:vt}=ft;let Pt=Tt,K=vt;switch(nt.inputType){case"deleteWordBackward":{const Et=pt.substring(0,Tt).match(/\w*[^\w]*$/);Et&&(Pt-=Et[0].length);break}case"deleteWordForward":{const Et=pt.substring(Tt).match(/^[^\w]*\w*/);Et&&(K+=Et[0].length);break}case"deleteContentBackward":Tt===vt&&(Pt-=1);break;case"deleteContentForward":Tt===vt&&(K+=1);break}nt.preventDefault(),(yt=this.linkService.eventBus)==null||yt.dispatch("dispatcheventinsandbox",{source:this,detail:{id:s,name:"Keystroke",value:pt,change:at||"",willCommit:!1,selStart:Pt,selEnd:K}})}),this._setEventListeners(b,[["focus","Focus"],["blur","Blur"],["mousedown","Mouse Down"],["mouseenter","Mouse Enter"],["mouseleave","Mouse Exit"],["mouseup","Mouse Up"]],nt=>nt.target.value)}if(rt&&b.addEventListener("blur",rt),this.data.comb){const nt=(this.data.rect[2]-this.data.rect[0])/st;b.classList.add("comb"),b.style.letterSpacing=`calc(${nt}px * var(--scale-factor) - 1ch)`}}else b=document.createElement("div"),b.textContent=this.data.fieldValue,b.style.verticalAlign="middle",b.style.display="table-cell";return this._setTextStyle(b),this._setBackgroundColor(b),this._setDefaultPropertiesFromJS(b),this.container.append(b),this.container}}class S extends l{constructor(t){super(t,{isRenderable:t.renderForms})}render(){const t=this.annotationStorage,s=this.data,b=s.id;let E=t.getValue(b,{value:s.exportValue===s.fieldValue}).value;typeof E=="string"&&(E=E!=="Off",t.setValue(b,{value:E})),this.container.classList.add("buttonWidgetAnnotation","checkBox");const C=document.createElement("input");return v.add(C),C.setAttribute("data-element-id",b),C.disabled=s.readOnly,this._setRequired(C,this.data.required),C.type="checkbox",C.name=s.fieldName,E&&C.setAttribute("checked",!0),C.setAttribute("exportValue",s.exportValue),C.tabIndex=L,C.addEventListener("change",V=>{const{name:st,checked:J}=V.target;for(const rt of this._getElementsByName(st,b)){const ot=J&&rt.exportValue===s.exportValue;rt.domElement&&(rt.domElement.checked=ot),t.setValue(rt.id,{value:ot})}t.setValue(b,{value:J})}),C.addEventListener("resetform",V=>{const st=s.defaultFieldValue||"Off";V.target.checked=st===s.exportValue}),this.enableScripting&&this.hasJSActions&&(C.addEventListener("updatefromsandbox",V=>{const st={value(J){J.target.checked=J.detail.value!=="Off",t.setValue(b,{value:J.target.checked})}};this._dispatchEventFromSandbox(st,V)}),this._setEventListeners(C,[["change","Validate"],["change","Action"],["focus","Focus"],["blur","Blur"],["mousedown","Mouse Down"],["mouseenter","Mouse Enter"],["mouseleave","Mouse Exit"],["mouseup","Mouse Up"]],V=>V.target.checked)),this._setBackgroundColor(C),this._setDefaultPropertiesFromJS(C),this.container.append(C),this.container}}class w extends l{constructor(t){super(t,{isRenderable:t.renderForms})}render(){this.container.classList.add("buttonWidgetAnnotation","radioButton");const t=this.annotationStorage,s=this.data,b=s.id;let E=t.getValue(b,{value:s.fieldValue===s.buttonValue}).value;typeof E=="string"&&(E=E!==s.buttonValue,t.setValue(b,{value:E}));const C=document.createElement("input");if(v.add(C),C.setAttribute("data-element-id",b),C.disabled=s.readOnly,this._setRequired(C,this.data.required),C.type="radio",C.name=s.fieldName,E&&C.setAttribute("checked",!0),C.tabIndex=L,C.addEventListener("change",V=>{const{name:st,checked:J}=V.target;for(const rt of this._getElementsByName(st,b))t.setValue(rt.id,{value:!1});t.setValue(b,{value:J})}),C.addEventListener("resetform",V=>{const st=s.defaultFieldValue;V.target.checked=st!=null&&st===s.buttonValue}),this.enableScripting&&this.hasJSActions){const V=s.buttonValue;C.addEventListener("updatefromsandbox",st=>{const J={value:rt=>{const ot=V===rt.detail.value;for(const nt of this._getElementsByName(rt.target.name)){const at=ot&&nt.id===b;nt.domElement&&(nt.domElement.checked=at),t.setValue(nt.id,{value:at})}}};this._dispatchEventFromSandbox(J,st)}),this._setEventListeners(C,[["change","Validate"],["change","Action"],["focus","Focus"],["blur","Blur"],["mousedown","Mouse Down"],["mouseenter","Mouse Enter"],["mouseleave","Mouse Exit"],["mouseup","Mouse Up"]],st=>st.target.checked)}return this._setBackgroundColor(C),this._setDefaultPropertiesFromJS(C),this.container.append(C),this.container}}class m extends g{constructor(t){super(t,{ignoreBorder:t.data.hasAppearance})}render(){const t=super.render();t.classList.add("buttonWidgetAnnotation","pushButton"),this.data.alternativeText&&(t.title=this.data.alternativeText);const s=t.lastChild;return this.enableScripting&&this.hasJSActions&&s&&(this._setDefaultPropertiesFromJS(s),s.addEventListener("updatefromsandbox",b=>{this._dispatchEventFromSandbox({},b)})),t}}class e extends l{constructor(t){super(t,{isRenderable:t.renderForms})}render(){this.container.classList.add("choiceWidgetAnnotation");const t=this.annotationStorage,s=this.data.id,b=t.getValue(s,{value:this.data.fieldValue}),E=document.createElement("select");v.add(E),E.setAttribute("data-element-id",s),E.disabled=this.data.readOnly,this._setRequired(E,this.data.required),E.name=this.data.fieldName,E.tabIndex=L;let C=this.data.combo&&this.data.options.length>0;this.data.combo||(E.size=this.data.options.length,this.data.multiSelect&&(E.multiple=!0)),E.addEventListener("resetform",ot=>{const nt=this.data.defaultFieldValue;for(const at of E.options)at.selected=at.value===nt});for(const ot of this.data.options){const nt=document.createElement("option");nt.textContent=ot.displayValue,nt.value=ot.exportValue,b.value.includes(ot.exportValue)&&(nt.setAttribute("selected",!0),C=!1),E.append(nt)}let V=null;if(C){const ot=document.createElement("option");ot.value=" ",ot.setAttribute("hidden",!0),ot.setAttribute("selected",!0),E.prepend(ot),V=()=>{ot.remove(),E.removeEventListener("input",V),V=null},E.addEventListener("input",V)}const st=ot=>{const nt=ot?"value":"textContent",{options:at,multiple:ft}=E;return ft?Array.prototype.filter.call(at,pt=>pt.selected).map(pt=>pt[nt]):at.selectedIndex===-1?null:at[at.selectedIndex][nt]};let J=st(!1);const rt=ot=>{const nt=ot.target.options;return Array.prototype.map.call(nt,at=>({displayValue:at.textContent,exportValue:at.value}))};return this.enableScripting&&this.hasJSActions?(E.addEventListener("updatefromsandbox",ot=>{const nt={value(at){V==null||V();const ft=at.detail.value,pt=new Set(Array.isArray(ft)?ft:[ft]);for(const Tt of E.options)Tt.selected=pt.has(Tt.value);t.setValue(s,{value:st(!0)}),J=st(!1)},multipleSelection(at){E.multiple=!0},remove(at){const ft=E.options,pt=at.detail.remove;ft[pt].selected=!1,E.remove(pt),ft.length>0&&Array.prototype.findIndex.call(ft,vt=>vt.selected)===-1&&(ft[0].selected=!0),t.setValue(s,{value:st(!0),items:rt(at)}),J=st(!1)},clear(at){for(;E.length!==0;)E.remove(0);t.setValue(s,{value:null,items:[]}),J=st(!1)},insert(at){const{index:ft,displayValue:pt,exportValue:Tt}=at.detail.insert,vt=E.children[ft],Pt=document.createElement("option");Pt.textContent=pt,Pt.value=Tt,vt?vt.before(Pt):E.append(Pt),t.setValue(s,{value:st(!0),items:rt(at)}),J=st(!1)},items(at){const{items:ft}=at.detail;for(;E.length!==0;)E.remove(0);for(const pt of ft){const{displayValue:Tt,exportValue:vt}=pt,Pt=document.createElement("option");Pt.textContent=Tt,Pt.value=vt,E.append(Pt)}E.options.length>0&&(E.options[0].selected=!0),t.setValue(s,{value:st(!0),items:rt(at)}),J=st(!1)},indices(at){const ft=new Set(at.detail.indices);for(const pt of at.target.options)pt.selected=ft.has(pt.index);t.setValue(s,{value:st(!0)}),J=st(!1)},editable(at){at.target.disabled=!at.detail.editable}};this._dispatchEventFromSandbox(nt,ot)}),E.addEventListener("input",ot=>{var at;const nt=st(!0);t.setValue(s,{value:nt}),ot.preventDefault(),(at=this.linkService.eventBus)==null||at.dispatch("dispatcheventinsandbox",{source:this,detail:{id:s,name:"Keystroke",value:J,changeEx:nt,willCommit:!1,commitKey:1,keyDown:!1}})}),this._setEventListeners(E,[["focus","Focus"],["blur","Blur"],["mousedown","Mouse Down"],["mouseenter","Mouse Enter"],["mouseleave","Mouse Exit"],["mouseup","Mouse Up"],["input","Action"],["input","Validate"]],ot=>ot.target.value)):E.addEventListener("input",function(ot){t.setValue(s,{value:st(!0)})}),this.data.combo&&this._setTextStyle(E),this._setBackgroundColor(E),this._setDefaultPropertiesFromJS(E),this.container.append(E),this.container}}const P=class extends x{constructor(t){var E,C,V;const{data:s}=t,b=!P.IGNORE_TYPES.has(s.parentType)&&!!((E=s.titleObj)!=null&&E.str||(C=s.contentsObj)!=null&&C.str||(V=s.richText)!=null&&V.str);super(t,{isRenderable:b})}render(){this.container.classList.add("popupAnnotation");const t=this.layer.querySelectorAll(`[data-annotation-id="${this.data.parentId}"]`);if(t.length===0)return this.container;const s=new c({container:this.container,trigger:Array.from(t),color:this.data.color,titleObj:this.data.titleObj,modificationDate:this.data.modificationDate,contentsObj:this.data.contentsObj,richText:this.data.richText}),b=this.page,E=h.Util.normalizeRect([this.data.parentRect[0],b.view[3]-this.data.parentRect[1]+b.view[1],this.data.parentRect[2],b.view[3]-this.data.parentRect[3]+b.view[1]]),C=E[0]+this.data.parentRect[2]-this.data.parentRect[0],V=E[1],{pageWidth:st,pageHeight:J,pageX:rt,pageY:ot}=this.viewport.rawDims;return this.container.style.left=`${100*(C-rt)/st}%`,this.container.style.top=`${100*(V-ot)/J}%`,this.container.append(s.render()),this.container}};let a=P;Lt(a,"IGNORE_TYPES",new Set(["Line","Square","Circle","PolyLine","Polygon","Ink"]));class c{constructor(t){this.container=t.container,this.trigger=t.trigger,this.color=t.color,this.titleObj=t.titleObj,this.modificationDate=t.modificationDate,this.contentsObj=t.contentsObj,this.richText=t.richText,this.hideWrapper=t.hideWrapper||!1,this.pinned=!1}render(){var st,J;const s=document.createElement("div");s.classList.add("popupWrapper"),this.hideElement=this.hideWrapper?s:this.container,this.hideElement.hidden=!0;const b=document.createElement("div");b.classList.add("popup");const E=this.color;if(E){const rt=.7*(255-E[0])+E[0],ot=.7*(255-E[1])+E[1],nt=.7*(255-E[2])+E[2];b.style.backgroundColor=h.Util.makeHexColor(rt|0,ot|0,nt|0)}const C=document.createElement("h1");C.dir=this.titleObj.dir,C.textContent=this.titleObj.str,b.append(C);const V=_.PDFDateString.toDateObject(this.modificationDate);if(V){const rt=document.createElement("span");rt.classList.add("popupDate"),rt.textContent="{{date}}, {{time}}",rt.dataset.l10nId="annotation_date_string",rt.dataset.l10nArgs=JSON.stringify({date:V.toLocaleDateString(),time:V.toLocaleTimeString()}),b.append(rt)}if((st=this.richText)!=null&&st.str&&(!((J=this.contentsObj)!=null&&J.str)||this.contentsObj.str===this.richText.str))Z.XfaLayer.render({xfaHtml:this.richText.html,intent:"richText",div:b}),b.lastChild.classList.add("richText","popupContent");else{const rt=this._formatContents(this.contentsObj);b.append(rt)}Array.isArray(this.trigger)||(this.trigger=[this.trigger]);for(const rt of this.trigger)rt.addEventListener("click",this._toggle.bind(this)),rt.addEventListener("mouseover",this._show.bind(this,!1)),rt.addEventListener("mouseout",this._hide.bind(this,!1));return b.addEventListener("click",this._hide.bind(this,!0)),s.append(b),s}_formatContents({str:t,dir:s}){const b=document.createElement("p");b.classList.add("popupContent"),b.dir=s;const E=t.split(/(?:\r\n?|\n)/);for(let C=0,V=E.length;C<V;++C){const st=E[C];b.append(document.createTextNode(st)),C<V-1&&b.append(document.createElement("br"))}return b}_toggle(){this.pinned?this._hide(!0):this._show(!0)}_show(t=!1){t&&(this.pinned=!0),this.hideElement.hidden&&(this.hideElement.hidden=!1,this.container.style.zIndex=parseInt(this.container.style.zIndex)+1e3)}_hide(t=!0){t&&(this.pinned=!1),!this.hideElement.hidden&&!this.pinned&&(this.hideElement.hidden=!0,this.container.style.zIndex=parseInt(this.container.style.zIndex)-1e3)}}class o extends x{constructor(t){var b,E,C;const s=!!(t.data.hasPopup||(b=t.data.titleObj)!=null&&b.str||(E=t.data.contentsObj)!=null&&E.str||(C=t.data.richText)!=null&&C.str);super(t,{isRenderable:s,ignoreBorder:!0}),this.textContent=t.data.textContent}render(){if(this.container.classList.add("freeTextAnnotation"),this.textContent){const t=document.createElement("div");t.classList.add("annotationTextContent"),t.setAttribute("role","comment");for(const s of this.textContent){const b=document.createElement("span");b.textContent=s,t.append(b)}this.container.append(t)}return this.data.hasPopup||this._createPopup(null,this.data),this.container}}class d extends x{constructor(t){var b,E,C;const s=!!(t.data.hasPopup||(b=t.data.titleObj)!=null&&b.str||(E=t.data.contentsObj)!=null&&E.str||(C=t.data.richText)!=null&&C.str);super(t,{isRenderable:s,ignoreBorder:!0})}render(){this.container.classList.add("lineAnnotation");const t=this.data,{width:s,height:b}=N(t.rect),E=this.svgFactory.create(s,b,!0),C=this.svgFactory.createElement("svg:line");return C.setAttribute("x1",t.rect[2]-t.lineCoordinates[0]),C.setAttribute("y1",t.rect[3]-t.lineCoordinates[1]),C.setAttribute("x2",t.rect[2]-t.lineCoordinates[2]),C.setAttribute("y2",t.rect[3]-t.lineCoordinates[3]),C.setAttribute("stroke-width",t.borderStyle.width||1),C.setAttribute("stroke","transparent"),C.setAttribute("fill","transparent"),E.append(C),this.container.append(E),this._createPopup(C,t),this.container}}class k extends x{constructor(t){var b,E,C;const s=!!(t.data.hasPopup||(b=t.data.titleObj)!=null&&b.str||(E=t.data.contentsObj)!=null&&E.str||(C=t.data.richText)!=null&&C.str);super(t,{isRenderable:s,ignoreBorder:!0})}render(){this.container.classList.add("squareAnnotation");const t=this.data,{width:s,height:b}=N(t.rect),E=this.svgFactory.create(s,b,!0),C=t.borderStyle.width,V=this.svgFactory.createElement("svg:rect");return V.setAttribute("x",C/2),V.setAttribute("y",C/2),V.setAttribute("width",s-C),V.setAttribute("height",b-C),V.setAttribute("stroke-width",C||1),V.setAttribute("stroke","transparent"),V.setAttribute("fill","transparent"),E.append(V),this.container.append(E),this._createPopup(V,t),this.container}}class n extends x{constructor(t){var b,E,C;const s=!!(t.data.hasPopup||(b=t.data.titleObj)!=null&&b.str||(E=t.data.contentsObj)!=null&&E.str||(C=t.data.richText)!=null&&C.str);super(t,{isRenderable:s,ignoreBorder:!0})}render(){this.container.classList.add("circleAnnotation");const t=this.data,{width:s,height:b}=N(t.rect),E=this.svgFactory.create(s,b,!0),C=t.borderStyle.width,V=this.svgFactory.createElement("svg:ellipse");return V.setAttribute("cx",s/2),V.setAttribute("cy",b/2),V.setAttribute("rx",s/2-C/2),V.setAttribute("ry",b/2-C/2),V.setAttribute("stroke-width",C||1),V.setAttribute("stroke","transparent"),V.setAttribute("fill","transparent"),E.append(V),this.container.append(E),this._createPopup(V,t),this.container}}class j extends x{constructor(t){var b,E,C;const s=!!(t.data.hasPopup||(b=t.data.titleObj)!=null&&b.str||(E=t.data.contentsObj)!=null&&E.str||(C=t.data.richText)!=null&&C.str);super(t,{isRenderable:s,ignoreBorder:!0}),this.containerClassName="polylineAnnotation",this.svgElementName="svg:polyline"}render(){this.container.classList.add(this.containerClassName);const t=this.data,{width:s,height:b}=N(t.rect),E=this.svgFactory.create(s,b,!0);let C=[];for(const st of t.vertices){const J=st.x-t.rect[0],rt=t.rect[3]-st.y;C.push(J+","+rt)}C=C.join(" ");const V=this.svgFactory.createElement(this.svgElementName);return V.setAttribute("points",C),V.setAttribute("stroke-width",t.borderStyle.width||1),V.setAttribute("stroke","transparent"),V.setAttribute("fill","transparent"),E.append(V),this.container.append(E),this._createPopup(V,t),this.container}}class $ extends j{constructor(t){super(t),this.containerClassName="polygonAnnotation",this.svgElementName="svg:polygon"}}class Y extends x{constructor(t){var b,E,C;const s=!!(t.data.hasPopup||(b=t.data.titleObj)!=null&&b.str||(E=t.data.contentsObj)!=null&&E.str||(C=t.data.richText)!=null&&C.str);super(t,{isRenderable:s,ignoreBorder:!0})}render(){return this.container.classList.add("caretAnnotation"),this.data.hasPopup||this._createPopup(null,this.data),this.container}}class Q extends x{constructor(t){var b,E,C;const s=!!(t.data.hasPopup||(b=t.data.titleObj)!=null&&b.str||(E=t.data.contentsObj)!=null&&E.str||(C=t.data.richText)!=null&&C.str);super(t,{isRenderable:s,ignoreBorder:!0}),this.containerClassName="inkAnnotation",this.svgElementName="svg:polyline"}render(){this.container.classList.add(this.containerClassName);const t=this.data,{width:s,height:b}=N(t.rect),E=this.svgFactory.create(s,b,!0);for(const C of t.inkLists){let V=[];for(const J of C){const rt=J.x-t.rect[0],ot=t.rect[3]-J.y;V.push(`${rt},${ot}`)}V=V.join(" ");const st=this.svgFactory.createElement(this.svgElementName);st.setAttribute("points",V),st.setAttribute("stroke-width",t.borderStyle.width||1),st.setAttribute("stroke","transparent"),st.setAttribute("fill","transparent"),this._createPopup(st,t),E.append(st)}return this.container.append(E),this.container}}class et extends x{constructor(t){var b,E,C;const s=!!(t.data.hasPopup||(b=t.data.titleObj)!=null&&b.str||(E=t.data.contentsObj)!=null&&E.str||(C=t.data.richText)!=null&&C.str);super(t,{isRenderable:s,ignoreBorder:!0,createQuadrilaterals:!0})}render(){return this.data.hasPopup||this._createPopup(null,this.data),this.quadrilaterals?this._renderQuadrilaterals("highlightAnnotation"):(this.container.classList.add("highlightAnnotation"),this.container)}}class ut extends x{constructor(t){var b,E,C;const s=!!(t.data.hasPopup||(b=t.data.titleObj)!=null&&b.str||(E=t.data.contentsObj)!=null&&E.str||(C=t.data.richText)!=null&&C.str);super(t,{isRenderable:s,ignoreBorder:!0,createQuadrilaterals:!0})}render(){return this.data.hasPopup||this._createPopup(null,this.data),this.quadrilaterals?this._renderQuadrilaterals("underlineAnnotation"):(this.container.classList.add("underlineAnnotation"),this.container)}}class lt extends x{constructor(t){var b,E,C;const s=!!(t.data.hasPopup||(b=t.data.titleObj)!=null&&b.str||(E=t.data.contentsObj)!=null&&E.str||(C=t.data.richText)!=null&&C.str);super(t,{isRenderable:s,ignoreBorder:!0,createQuadrilaterals:!0})}render(){return this.data.hasPopup||this._createPopup(null,this.data),this.quadrilaterals?this._renderQuadrilaterals("squigglyAnnotation"):(this.container.classList.add("squigglyAnnotation"),this.container)}}class ht extends x{constructor(t){var b,E,C;const s=!!(t.data.hasPopup||(b=t.data.titleObj)!=null&&b.str||(E=t.data.contentsObj)!=null&&E.str||(C=t.data.richText)!=null&&C.str);super(t,{isRenderable:s,ignoreBorder:!0,createQuadrilaterals:!0})}render(){return this.data.hasPopup||this._createPopup(null,this.data),this.quadrilaterals?this._renderQuadrilaterals("strikeoutAnnotation"):(this.container.classList.add("strikeoutAnnotation"),this.container)}}class mt extends x{constructor(t){var b,E,C;const s=!!(t.data.hasPopup||(b=t.data.titleObj)!=null&&b.str||(E=t.data.contentsObj)!=null&&E.str||(C=t.data.richText)!=null&&C.str);super(t,{isRenderable:s,ignoreBorder:!0})}render(){return this.container.classList.add("stampAnnotation"),this.data.hasPopup||this._createPopup(null,this.data),this.container}}class _t extends x{constructor(t){var E;super(t,{isRenderable:!0});const{filename:s,content:b}=this.data.file;this.filename=(0,_.getFilenameFromUrl)(s,!0),this.content=b,(E=this.linkService.eventBus)==null||E.dispatch("fileattachmentannotation",{source:this,filename:s,content:b})}render(){var s,b;this.container.classList.add("fileAttachmentAnnotation");let t;return this.data.hasAppearance?t=document.createElement("div"):(t=document.createElement("img"),t.src=`${this.imageResourcesPath}annotation-${/paperclip/i.test(this.data.name)?"paperclip":"pushpin"}.svg`),t.classList.add("popupTriggerArea"),t.addEventListener("dblclick",this._download.bind(this)),!this.data.hasPopup&&((s=this.data.titleObj)!=null&&s.str||(b=this.data.contentsObj)!=null&&b.str||this.data.richText)&&this._createPopup(t,this.data),this.container.append(t),this.container}_download(){var t;(t=this.downloadManager)==null||t.openOrDownloadData(this.container,this.content,this.filename)}}const M=class{static render(t){var J,rt;const{annotations:s,div:b,viewport:E,accessibilityManager:C}=t;(0,_.setLayerDimensions)(b,E);const V={data:null,layer:b,page:t.page,viewport:E,linkService:t.linkService,downloadManager:t.downloadManager,imageResourcesPath:t.imageResourcesPath||"",renderForms:t.renderForms!==!1,svgFactory:new _.DOMSVGFactory,annotationStorage:t.annotationStorage||new W.AnnotationStorage,enableScripting:t.enableScripting===!0,hasJSActions:t.hasJSActions,fieldObjects:t.fieldObjects};let st=0;for(const ot of s){if(ot.noHTML)continue;if(ot.annotationType!==h.AnnotationType.POPUP){const{width:ft,height:pt}=N(ot.rect);if(ft<=0||pt<=0)continue}V.data=ot;const nt=T.create(V);if(!nt.isRenderable)continue;const at=nt.render();if(ot.hidden&&(at.style.visibility="hidden"),Array.isArray(at))for(const ft of at)ft.style.zIndex=st++,it(J=M,H,Fe).call(J,ft,ot.id,b,C);else at.style.zIndex=st++,nt instanceof a?b.prepend(at):it(rt=M,H,Fe).call(rt,at,ot.id,b,C)}it(this,z,Me).call(this,b,t.annotationCanvasMap)}static update(t){const{annotationCanvasMap:s,div:b,viewport:E}=t;(0,_.setLayerDimensions)(b,{rotation:E.rotation}),it(this,z,Me).call(this,b,s),b.hidden=!1}};let St=M;H=new WeakSet,Fe=function(t,s,b,E){const C=t.firstChild||t;C.id=`${_.AnnotationPrefix}${s}`,b.append(t),E==null||E.moveElementInDOM(b,t,C,!1)},z=new WeakSet,Me=function(t,s){if(s){for(const[b,E]of s){const C=t.querySelector(`[data-annotation-id="${b}"]`);if(!C)continue;const{firstChild:V}=C;V?V.nodeName==="CANVAS"?V.replaceWith(E):V.before(E):C.append(E)}s.clear()}},tt(St,H),tt(St,z),i.AnnotationLayer=St},(B,i)=>{Object.defineProperty(i,"__esModule",{value:!0}),i.ColorConverters=void 0;function U(_){return Math.floor(Math.max(0,Math.min(1,_))*255).toString(16).padStart(2,"0")}class h{static CMYK_G([W,q,Z,L]){return["G",1-Math.min(1,.3*W+.59*Z+.11*q+L)]}static G_CMYK([W]){return["CMYK",0,0,0,1-W]}static G_RGB([W]){return["RGB",W,W,W]}static G_HTML([W]){const q=U(W);return`#${q}${q}${q}`}static RGB_G([W,q,Z]){return["G",.3*W+.59*q+.11*Z]}static RGB_HTML([W,q,Z]){const L=U(W),F=U(q),v=U(Z);return`#${L}${F}${v}`}static T_HTML(){return"#00000000"}static CMYK_RGB([W,q,Z,L]){return["RGB",1-Math.min(1,W+L),1-Math.min(1,Z+L),1-Math.min(1,q+L)]}static CMYK_HTML(W){const q=this.CMYK_RGB(W).slice(1);return this.RGB_HTML(q)}static RGB_CMYK([W,q,Z]){const L=1-W,F=1-q,v=1-Z,N=Math.min(L,F,v);return["CMYK",L,F,v,N]}}i.ColorConverters=h},(B,i,U)=>{Object.defineProperty(i,"__esModule",{value:!0}),i.XfaLayer=void 0;var h=U(19);class _{static setupStorage(q,Z,L,F,v){const N=F.getValue(Z,{value:null});switch(L.name){case"textarea":if(N.value!==null&&(q.textContent=N.value),v==="print")break;q.addEventListener("input",T=>{F.setValue(Z,{value:T.target.value})});break;case"input":if(L.attributes.type==="radio"||L.attributes.type==="checkbox"){if(N.value===L.attributes.xfaOn?q.setAttribute("checked",!0):N.value===L.attributes.xfaOff&&q.removeAttribute("checked"),v==="print")break;q.addEventListener("change",T=>{F.setValue(Z,{value:T.target.checked?T.target.getAttribute("xfaOn"):T.target.getAttribute("xfaOff")})})}else{if(N.value!==null&&q.setAttribute("value",N.value),v==="print")break;q.addEventListener("input",T=>{F.setValue(Z,{value:T.target.value})})}break;case"select":if(N.value!==null)for(const T of L.children)T.attributes.value===N.value&&(T.attributes.selected=!0);q.addEventListener("input",T=>{const x=T.target.options,g=x.selectedIndex===-1?"":x[x.selectedIndex].value;F.setValue(Z,{value:g})});break}}static setAttributes({html:q,element:Z,storage:L=null,intent:F,linkService:v}){const{attributes:N}=Z,T=q instanceof HTMLAnchorElement;N.type==="radio"&&(N.name=`${N.name}-${F}`);for(const[x,g]of Object.entries(N))if(g!=null)switch(x){case"class":g.length&&q.setAttribute(x,g.join(" "));break;case"dataId":break;case"id":q.setAttribute("data-element-id",g);break;case"style":Object.assign(q.style,g);break;case"textContent":q.textContent=g;break;default:(!T||x!=="href"&&x!=="newWindow")&&q.setAttribute(x,g)}T&&v.addLinkAttributes(q,N.href,N.newWindow),L&&N.dataId&&this.setupStorage(q,N.dataId,Z,L)}static render(q){var f;const Z=q.annotationStorage,L=q.linkService,F=q.xfaHtml,v=q.intent||"display",N=document.createElement(F.name);F.attributes&&this.setAttributes({html:N,element:F,intent:v,linkService:L});const T=[[F,-1,N]],x=q.div;if(x.append(N),q.viewport){const l=`matrix(${q.viewport.transform.join(",")})`;x.style.transform=l}v!=="richText"&&x.setAttribute("class","xfaLayer xfaFont");const g=[];for(;T.length>0;){const[l,A,S]=T.at(-1);if(A+1===l.children.length){T.pop();continue}const w=l.children[++T.at(-1)[1]];if(w===null)continue;const{name:m}=w;if(m==="#text"){const a=document.createTextNode(w.value);g.push(a),S.append(a);continue}let e;if((f=w==null?void 0:w.attributes)!=null&&f.xmlns?e=document.createElementNS(w.attributes.xmlns,m):e=document.createElement(m),S.append(e),w.attributes&&this.setAttributes({html:e,element:w,storage:Z,intent:v,linkService:L}),w.children&&w.children.length>0)T.push([w,-1,e]);else if(w.value){const a=document.createTextNode(w.value);h.XfaText.shouldBuildText(m)&&g.push(a),e.append(a)}}for(const l of x.querySelectorAll(".xfaNonInteractive input, .xfaNonInteractive textarea"))l.setAttribute("readOnly",!0);return{textDivs:g}}static update(q){const Z=`matrix(${q.viewport.transform.join(",")})`;q.div.style.transform=Z,q.div.hidden=!1}}i.XfaLayer=_},(B,i,U)=>{Object.defineProperty(i,"__esModule",{value:!0}),i.SVGGraphics=void 0;var h=U(6),_=U(1),W=U(10);let q=class{constructor(){(0,_.unreachable)("Not implemented: SVGGraphics")}};i.SVGGraphics=q;{let f=function(e){let a=[];const c=[];for(const o of e){if(o.fn==="save"){a.push({fnId:92,fn:"group",items:[]}),c.push(a),a=a.at(-1).items;continue}o.fn==="restore"?a=c.pop():a.push(o)}return a},l=function(e){if(Number.isInteger(e))return e.toString();const a=e.toFixed(10);let c=a.length-1;if(a[c]!=="0")return a;do c--;while(a[c]==="0");return a.substring(0,a[c]==="."?c:c+1)},A=function(e){if(e[4]===0&&e[5]===0){if(e[1]===0&&e[2]===0)return e[0]===1&&e[3]===1?"":`scale(${l(e[0])} ${l(e[3])})`;if(e[0]===e[3]&&e[1]===-e[2]){const a=Math.acos(e[0])*180/Math.PI;return`rotate(${l(a)})`}}else if(e[0]===1&&e[1]===0&&e[2]===0&&e[3]===1)return`translate(${l(e[4])} ${l(e[5])})`;return`matrix(${l(e[0])} ${l(e[1])} ${l(e[2])} ${l(e[3])} ${l(e[4])} ${l(e[5])})`};const Z={fontStyle:"normal",fontWeight:"normal",fillColor:"#000000"},L="http://www.w3.org/XML/1998/namespace",F="http://www.w3.org/1999/xlink",v=["butt","round","square"],N=["miter","round","bevel"],T=function(e,a="",c=!1){if(URL.createObjectURL&&typeof Blob<"u"&&!c)return URL.createObjectURL(new Blob([e],{type:a}));const o="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/=";let d=`data:${a};base64,`;for(let k=0,n=e.length;k<n;k+=3){const j=e[k]&255,$=e[k+1]&255,Y=e[k+2]&255,Q=j>>2,et=(j&3)<<4|$>>4,ut=k+1<n?($&15)<<2|Y>>6:64,lt=k+2<n?Y&63:64;d+=o[Q]+o[et]+o[ut]+o[lt]}return d},x=function(){const e=new Uint8Array([137,80,78,71,13,10,26,10]),a=12,c=new Int32Array(256);for(let Y=0;Y<256;Y++){let Q=Y;for(let et=0;et<8;et++)Q&1?Q=3988292384^Q>>1&2147483647:Q=Q>>1&2147483647;c[Y]=Q}function o(Y,Q,et){let ut=-1;for(let lt=Q;lt<et;lt++){const ht=(ut^Y[lt])&255,mt=c[ht];ut=ut>>>8^mt}return ut^-1}function d(Y,Q,et,ut){let lt=ut;const ht=Q.length;et[lt]=ht>>24&255,et[lt+1]=ht>>16&255,et[lt+2]=ht>>8&255,et[lt+3]=ht&255,lt+=4,et[lt]=Y.charCodeAt(0)&255,et[lt+1]=Y.charCodeAt(1)&255,et[lt+2]=Y.charCodeAt(2)&255,et[lt+3]=Y.charCodeAt(3)&255,lt+=4,et.set(Q,lt),lt+=Q.length;const mt=o(et,ut+4,lt);et[lt]=mt>>24&255,et[lt+1]=mt>>16&255,et[lt+2]=mt>>8&255,et[lt+3]=mt&255}function k(Y,Q,et){let ut=1,lt=0;for(let ht=Q;ht<et;++ht)ut=(ut+(Y[ht]&255))%65521,lt=(lt+ut)%65521;return lt<<16|ut}function n(Y){if(!W.isNodeJS)return j(Y);try{let Q;parseInt(process.versions.node)>=8?Q=Y:Q=Buffer.from(Y);const et=require$$5.deflateSync(Q,{level:9});return et instanceof Uint8Array?et:new Uint8Array(et)}catch(Q){(0,_.warn)("Not compressing PNG because zlib.deflateSync is unavailable: "+Q)}return j(Y)}function j(Y){let Q=Y.length;const et=65535,ut=Math.ceil(Q/et),lt=new Uint8Array(2+Q+ut*5+4);let ht=0;lt[ht++]=120,lt[ht++]=156;let mt=0;for(;Q>et;)lt[ht++]=0,lt[ht++]=255,lt[ht++]=255,lt[ht++]=0,lt[ht++]=0,lt.set(Y.subarray(mt,mt+et),ht),ht+=et,mt+=et,Q-=et;lt[ht++]=1,lt[ht++]=Q&255,lt[ht++]=Q>>8&255,lt[ht++]=~Q&65535&255,lt[ht++]=(~Q&65535)>>8&255,lt.set(Y.subarray(mt),ht),ht+=Y.length-mt;const _t=k(Y,0,Y.length);return lt[ht++]=_t>>24&255,lt[ht++]=_t>>16&255,lt[ht++]=_t>>8&255,lt[ht++]=_t&255,lt}function $(Y,Q,et,ut){const lt=Y.width,ht=Y.height;let mt,_t,St;const At=Y.data;switch(Q){case _.ImageKind.GRAYSCALE_1BPP:_t=0,mt=1,St=lt+7>>3;break;case _.ImageKind.RGB_24BPP:_t=2,mt=8,St=lt*3;break;case _.ImageKind.RGBA_32BPP:_t=6,mt=8,St=lt*4;break;default:throw new Error("invalid format")}const X=new Uint8Array((1+St)*ht);let u=0,p=0;for(let M=0;M<ht;++M)X[u++]=0,X.set(At.subarray(p,p+St),u),p+=St,u+=St;if(Q===_.ImageKind.GRAYSCALE_1BPP&&ut){u=0;for(let M=0;M<ht;M++){u++;for(let D=0;D<St;D++)X[u++]^=255}}const P=new Uint8Array([lt>>24&255,lt>>16&255,lt>>8&255,lt&255,ht>>24&255,ht>>16&255,ht>>8&255,ht&255,mt,_t,0,0,0]),H=n(X),O=e.length+a*3+P.length+H.length,z=new Uint8Array(O);let G=0;return z.set(e,G),G+=e.length,d("IHDR",P,z,G),G+=a+P.length,d("IDATA",H,z,G),G+=a+H.length,d("IEND",new Uint8Array(0),z,G),T(z,"image/png",et)}return function(Q,et,ut){const lt=Q.kind===void 0?_.ImageKind.GRAYSCALE_1BPP:Q.kind;return $(Q,lt,et,ut)}}();class g{constructor(){this.fontSizeScale=1,this.fontWeight=Z.fontWeight,this.fontSize=0,this.textMatrix=_.IDENTITY_MATRIX,this.fontMatrix=_.FONT_IDENTITY_MATRIX,this.leading=0,this.textRenderingMode=_.TextRenderingMode.FILL,this.textMatrixScale=1,this.x=0,this.y=0,this.lineX=0,this.lineY=0,this.charSpacing=0,this.wordSpacing=0,this.textHScale=1,this.textRise=0,this.fillColor=Z.fillColor,this.strokeColor="#000000",this.fillAlpha=1,this.strokeAlpha=1,this.lineWidth=1,this.lineJoin="",this.lineCap="",this.miterLimit=0,this.dashArray=[],this.dashPhase=0,this.dependencies=[],this.activeClipUrl=null,this.clipGroup=null,this.maskId=""}clone(){return Object.create(this)}setCurrentPoint(a,c){this.x=a,this.y=c}}let S=0,w=0,m=0;i.SVGGraphics=q=class{constructor(e,a,c=!1){(0,h.deprecated)("The SVG back-end is no longer maintained and *may* be removed in the future."),this.svgFactory=new h.DOMSVGFactory,this.current=new g,this.transformMatrix=_.IDENTITY_MATRIX,this.transformStack=[],this.extraStack=[],this.commonObjs=e,this.objs=a,this.pendingClip=null,this.pendingEOFill=!1,this.embedFonts=!1,this.embeddedFonts=Object.create(null),this.cssStyle=null,this.forceDataSchema=!!c,this._operatorIdMapping=[];for(const o in _.OPS)this._operatorIdMapping[_.OPS[o]]=o}getObject(e,a=null){return typeof e=="string"?e.startsWith("g_")?this.commonObjs.get(e):this.objs.get(e):a}save(){this.transformStack.push(this.transformMatrix);const e=this.current;this.extraStack.push(e),this.current=e.clone()}restore(){this.transformMatrix=this.transformStack.pop(),this.current=this.extraStack.pop(),this.pendingClip=null,this.tgrp=null}group(e){this.save(),this.executeOpTree(e),this.restore()}loadDependencies(e){const a=e.fnArray,c=e.argsArray;for(let o=0,d=a.length;o<d;o++)if(a[o]===_.OPS.dependency)for(const k of c[o]){const n=k.startsWith("g_")?this.commonObjs:this.objs,j=new Promise($=>{n.get(k,$)});this.current.dependencies.push(j)}return Promise.all(this.current.dependencies)}transform(e,a,c,o,d,k){const n=[e,a,c,o,d,k];this.transformMatrix=_.Util.transform(this.transformMatrix,n),this.tgrp=null}getSVG(e,a){this.viewport=a;const c=this._initialize(a);return this.loadDependencies(e).then(()=>(this.transformMatrix=_.IDENTITY_MATRIX,this.executeOpTree(this.convertOpList(e)),c))}convertOpList(e){const a=this._operatorIdMapping,c=e.argsArray,o=e.fnArray,d=[];for(let k=0,n=o.length;k<n;k++){const j=o[k];d.push({fnId:j,fn:a[j],args:c[k]})}return f(d)}executeOpTree(e){for(const a of e){const c=a.fn,o=a.fnId,d=a.args;switch(o|0){case _.OPS.beginText:this.beginText();break;case _.OPS.dependency:break;case _.OPS.setLeading:this.setLeading(d);break;case _.OPS.setLeadingMoveText:this.setLeadingMoveText(d[0],d[1]);break;case _.OPS.setFont:this.setFont(d);break;case _.OPS.showText:this.showText(d[0]);break;case _.OPS.showSpacedText:this.showText(d[0]);break;case _.OPS.endText:this.endText();break;case _.OPS.moveText:this.moveText(d[0],d[1]);break;case _.OPS.setCharSpacing:this.setCharSpacing(d[0]);break;case _.OPS.setWordSpacing:this.setWordSpacing(d[0]);break;case _.OPS.setHScale:this.setHScale(d[0]);break;case _.OPS.setTextMatrix:this.setTextMatrix(d[0],d[1],d[2],d[3],d[4],d[5]);break;case _.OPS.setTextRise:this.setTextRise(d[0]);break;case _.OPS.setTextRenderingMode:this.setTextRenderingMode(d[0]);break;case _.OPS.setLineWidth:this.setLineWidth(d[0]);break;case _.OPS.setLineJoin:this.setLineJoin(d[0]);break;case _.OPS.setLineCap:this.setLineCap(d[0]);break;case _.OPS.setMiterLimit:this.setMiterLimit(d[0]);break;case _.OPS.setFillRGBColor:this.setFillRGBColor(d[0],d[1],d[2]);break;case _.OPS.setStrokeRGBColor:this.setStrokeRGBColor(d[0],d[1],d[2]);break;case _.OPS.setStrokeColorN:this.setStrokeColorN(d);break;case _.OPS.setFillColorN:this.setFillColorN(d);break;case _.OPS.shadingFill:this.shadingFill(d[0]);break;case _.OPS.setDash:this.setDash(d[0],d[1]);break;case _.OPS.setRenderingIntent:this.setRenderingIntent(d[0]);break;case _.OPS.setFlatness:this.setFlatness(d[0]);break;case _.OPS.setGState:this.setGState(d[0]);break;case _.OPS.fill:this.fill();break;case _.OPS.eoFill:this.eoFill();break;case _.OPS.stroke:this.stroke();break;case _.OPS.fillStroke:this.fillStroke();break;case _.OPS.eoFillStroke:this.eoFillStroke();break;case _.OPS.clip:this.clip("nonzero");break;case _.OPS.eoClip:this.clip("evenodd");break;case _.OPS.paintSolidColorImageMask:this.paintSolidColorImageMask();break;case _.OPS.paintImageXObject:this.paintImageXObject(d[0]);break;case _.OPS.paintInlineImageXObject:this.paintInlineImageXObject(d[0]);break;case _.OPS.paintImageMaskXObject:this.paintImageMaskXObject(d[0]);break;case _.OPS.paintFormXObjectBegin:this.paintFormXObjectBegin(d[0],d[1]);break;case _.OPS.paintFormXObjectEnd:this.paintFormXObjectEnd();break;case _.OPS.closePath:this.closePath();break;case _.OPS.closeStroke:this.closeStroke();break;case _.OPS.closeFillStroke:this.closeFillStroke();break;case _.OPS.closeEOFillStroke:this.closeEOFillStroke();break;case _.OPS.nextLine:this.nextLine();break;case _.OPS.transform:this.transform(d[0],d[1],d[2],d[3],d[4],d[5]);break;case _.OPS.constructPath:this.constructPath(d[0],d[1]);break;case _.OPS.endPath:this.endPath();break;case 92:this.group(a.items);break;default:(0,_.warn)(`Unimplemented operator ${c}`);break}}}setWordSpacing(e){this.current.wordSpacing=e}setCharSpacing(e){this.current.charSpacing=e}nextLine(){this.moveText(0,this.current.leading)}setTextMatrix(e,a,c,o,d,k){const n=this.current;n.textMatrix=n.lineMatrix=[e,a,c,o,d,k],n.textMatrixScale=Math.hypot(e,a),n.x=n.lineX=0,n.y=n.lineY=0,n.xcoords=[],n.ycoords=[],n.tspan=this.svgFactory.createElement("svg:tspan"),n.tspan.setAttributeNS(null,"font-family",n.fontFamily),n.tspan.setAttributeNS(null,"font-size",`${l(n.fontSize)}px`),n.tspan.setAttributeNS(null,"y",l(-n.y)),n.txtElement=this.svgFactory.createElement("svg:text"),n.txtElement.append(n.tspan)}beginText(){const e=this.current;e.x=e.lineX=0,e.y=e.lineY=0,e.textMatrix=_.IDENTITY_MATRIX,e.lineMatrix=_.IDENTITY_MATRIX,e.textMatrixScale=1,e.tspan=this.svgFactory.createElement("svg:tspan"),e.txtElement=this.svgFactory.createElement("svg:text"),e.txtgrp=this.svgFactory.createElement("svg:g"),e.xcoords=[],e.ycoords=[]}moveText(e,a){const c=this.current;c.x=c.lineX+=e,c.y=c.lineY+=a,c.xcoords=[],c.ycoords=[],c.tspan=this.svgFactory.createElement("svg:tspan"),c.tspan.setAttributeNS(null,"font-family",c.fontFamily),c.tspan.setAttributeNS(null,"font-size",`${l(c.fontSize)}px`),c.tspan.setAttributeNS(null,"y",l(-c.y))}showText(e){const a=this.current,c=a.font,o=a.fontSize;if(o===0)return;const d=a.fontSizeScale,k=a.charSpacing,n=a.wordSpacing,j=a.fontDirection,$=a.textHScale*j,Y=c.vertical,Q=Y?1:-1,et=c.defaultVMetrics,ut=o*a.fontMatrix[0];let lt=0;for(const _t of e){if(_t===null){lt+=j*n;continue}else if(typeof _t=="number"){lt+=Q*_t*o/1e3;continue}const St=(_t.isSpace?n:0)+k,At=_t.fontChar;let X,u,p=_t.width;if(Y){let H;const O=_t.vmetric||et;H=_t.vmetric?O[1]:p*.5,H=-H*ut;const z=O[2]*ut;p=O?-O[0]:p,X=H/d,u=(lt+z)/d}else X=lt/d,u=0;(_t.isInFont||c.missingFile)&&(a.xcoords.push(a.x+X),Y&&a.ycoords.push(-a.y+u),a.tspan.textContent+=At);let P;Y?P=p*ut-St*j:P=p*ut+St*j,lt+=P}a.tspan.setAttributeNS(null,"x",a.xcoords.map(l).join(" ")),Y?a.tspan.setAttributeNS(null,"y",a.ycoords.map(l).join(" ")):a.tspan.setAttributeNS(null,"y",l(-a.y)),Y?a.y-=lt:a.x+=lt*$,a.tspan.setAttributeNS(null,"font-family",a.fontFamily),a.tspan.setAttributeNS(null,"font-size",`${l(a.fontSize)}px`),a.fontStyle!==Z.fontStyle&&a.tspan.setAttributeNS(null,"font-style",a.fontStyle),a.fontWeight!==Z.fontWeight&&a.tspan.setAttributeNS(null,"font-weight",a.fontWeight);const ht=a.textRenderingMode&_.TextRenderingMode.FILL_STROKE_MASK;if(ht===_.TextRenderingMode.FILL||ht===_.TextRenderingMode.FILL_STROKE?(a.fillColor!==Z.fillColor&&a.tspan.setAttributeNS(null,"fill",a.fillColor),a.fillAlpha<1&&a.tspan.setAttributeNS(null,"fill-opacity",a.fillAlpha)):a.textRenderingMode===_.TextRenderingMode.ADD_TO_PATH?a.tspan.setAttributeNS(null,"fill","transparent"):a.tspan.setAttributeNS(null,"fill","none"),ht===_.TextRenderingMode.STROKE||ht===_.TextRenderingMode.FILL_STROKE){const _t=1/(a.textMatrixScale||1);this._setStrokeAttributes(a.tspan,_t)}let mt=a.textMatrix;a.textRise!==0&&(mt=mt.slice(),mt[5]+=a.textRise),a.txtElement.setAttributeNS(null,"transform",`${A(mt)} scale(${l($)}, -1)`),a.txtElement.setAttributeNS(L,"xml:space","preserve"),a.txtElement.append(a.tspan),a.txtgrp.append(a.txtElement),this._ensureTransformGroup().append(a.txtElement)}setLeadingMoveText(e,a){this.setLeading(-a),this.moveText(e,a)}addFontStyle(e){if(!e.data)throw new Error('addFontStyle: No font data available, ensure that the "fontExtraProperties" API parameter is set.');this.cssStyle||(this.cssStyle=this.svgFactory.createElement("svg:style"),this.cssStyle.setAttributeNS(null,"type","text/css"),this.defs.append(this.cssStyle));const a=T(e.data,e.mimetype,this.forceDataSchema);this.cssStyle.textContent+=`@font-face { font-family: "${e.loadedName}"; src: url(${a}); }
`}setFont(e){const a=this.current,c=this.commonObjs.get(e[0]);let o=e[1];a.font=c,this.embedFonts&&!c.missingFile&&!this.embeddedFonts[c.loadedName]&&(this.addFontStyle(c),this.embeddedFonts[c.loadedName]=c),a.fontMatrix=c.fontMatrix||_.FONT_IDENTITY_MATRIX;let d="normal";c.black?d="900":c.bold&&(d="bold");const k=c.italic?"italic":"normal";o<0?(o=-o,a.fontDirection=-1):a.fontDirection=1,a.fontSize=o,a.fontFamily=c.loadedName,a.fontWeight=d,a.fontStyle=k,a.tspan=this.svgFactory.createElement("svg:tspan"),a.tspan.setAttributeNS(null,"y",l(-a.y)),a.xcoords=[],a.ycoords=[]}endText(){var a;const e=this.current;e.textRenderingMode&_.TextRenderingMode.ADD_TO_PATH_FLAG&&((a=e.txtElement)!=null&&a.hasChildNodes())&&(e.element=e.txtElement,this.clip("nonzero"),this.endPath())}setLineWidth(e){e>0&&(this.current.lineWidth=e)}setLineCap(e){this.current.lineCap=v[e]}setLineJoin(e){this.current.lineJoin=N[e]}setMiterLimit(e){this.current.miterLimit=e}setStrokeAlpha(e){this.current.strokeAlpha=e}setStrokeRGBColor(e,a,c){this.current.strokeColor=_.Util.makeHexColor(e,a,c)}setFillAlpha(e){this.current.fillAlpha=e}setFillRGBColor(e,a,c){this.current.fillColor=_.Util.makeHexColor(e,a,c),this.current.tspan=this.svgFactory.createElement("svg:tspan"),this.current.xcoords=[],this.current.ycoords=[]}setStrokeColorN(e){this.current.strokeColor=this._makeColorN_Pattern(e)}setFillColorN(e){this.current.fillColor=this._makeColorN_Pattern(e)}shadingFill(e){const a=this.viewport.width,c=this.viewport.height,o=_.Util.inverseTransform(this.transformMatrix),d=_.Util.applyTransform([0,0],o),k=_.Util.applyTransform([0,c],o),n=_.Util.applyTransform([a,0],o),j=_.Util.applyTransform([a,c],o),$=Math.min(d[0],k[0],n[0],j[0]),Y=Math.min(d[1],k[1],n[1],j[1]),Q=Math.max(d[0],k[0],n[0],j[0]),et=Math.max(d[1],k[1],n[1],j[1]),ut=this.svgFactory.createElement("svg:rect");ut.setAttributeNS(null,"x",$),ut.setAttributeNS(null,"y",Y),ut.setAttributeNS(null,"width",Q-$),ut.setAttributeNS(null,"height",et-Y),ut.setAttributeNS(null,"fill",this._makeShadingPattern(e)),this.current.fillAlpha<1&&ut.setAttributeNS(null,"fill-opacity",this.current.fillAlpha),this._ensureTransformGroup().append(ut)}_makeColorN_Pattern(e){return e[0]==="TilingPattern"?this._makeTilingPattern(e):this._makeShadingPattern(e)}_makeTilingPattern(e){const a=e[1],c=e[2],o=e[3]||_.IDENTITY_MATRIX,[d,k,n,j]=e[4],$=e[5],Y=e[6],Q=e[7],et=`shading${m++}`,[ut,lt,ht,mt]=_.Util.normalizeRect([..._.Util.applyTransform([d,k],o),..._.Util.applyTransform([n,j],o)]),[_t,St]=_.Util.singularValueDecompose2dScale(o),At=$*_t,X=Y*St,u=this.svgFactory.createElement("svg:pattern");u.setAttributeNS(null,"id",et),u.setAttributeNS(null,"patternUnits","userSpaceOnUse"),u.setAttributeNS(null,"width",At),u.setAttributeNS(null,"height",X),u.setAttributeNS(null,"x",`${ut}`),u.setAttributeNS(null,"y",`${lt}`);const p=this.svg,P=this.transformMatrix,H=this.current.fillColor,O=this.current.strokeColor,z=this.svgFactory.create(ht-ut,mt-lt);if(this.svg=z,this.transformMatrix=o,Q===2){const G=_.Util.makeHexColor(...a);this.current.fillColor=G,this.current.strokeColor=G}return this.executeOpTree(this.convertOpList(c)),this.svg=p,this.transformMatrix=P,this.current.fillColor=H,this.current.strokeColor=O,u.append(z.childNodes[0]),this.defs.append(u),`url(#${et})`}_makeShadingPattern(e){switch(typeof e=="string"&&(e=this.objs.get(e)),e[0]){case"RadialAxial":const a=`shading${m++}`,c=e[3];let o;switch(e[1]){case"axial":const d=e[4],k=e[5];o=this.svgFactory.createElement("svg:linearGradient"),o.setAttributeNS(null,"id",a),o.setAttributeNS(null,"gradientUnits","userSpaceOnUse"),o.setAttributeNS(null,"x1",d[0]),o.setAttributeNS(null,"y1",d[1]),o.setAttributeNS(null,"x2",k[0]),o.setAttributeNS(null,"y2",k[1]);break;case"radial":const n=e[4],j=e[5],$=e[6],Y=e[7];o=this.svgFactory.createElement("svg:radialGradient"),o.setAttributeNS(null,"id",a),o.setAttributeNS(null,"gradientUnits","userSpaceOnUse"),o.setAttributeNS(null,"cx",j[0]),o.setAttributeNS(null,"cy",j[1]),o.setAttributeNS(null,"r",Y),o.setAttributeNS(null,"fx",n[0]),o.setAttributeNS(null,"fy",n[1]),o.setAttributeNS(null,"fr",$);break;default:throw new Error(`Unknown RadialAxial type: ${e[1]}`)}for(const d of c){const k=this.svgFactory.createElement("svg:stop");k.setAttributeNS(null,"offset",d[0]),k.setAttributeNS(null,"stop-color",d[1]),o.append(k)}return this.defs.append(o),`url(#${a})`;case"Mesh":return(0,_.warn)("Unimplemented pattern Mesh"),null;case"Dummy":return"hotpink";default:throw new Error(`Unknown IR type: ${e[0]}`)}}setDash(e,a){this.current.dashArray=e,this.current.dashPhase=a}constructPath(e,a){const c=this.current;let o=c.x,d=c.y,k=[],n=0;for(const j of e)switch(j|0){case _.OPS.rectangle:o=a[n++],d=a[n++];const $=a[n++],Y=a[n++],Q=o+$,et=d+Y;k.push("M",l(o),l(d),"L",l(Q),l(d),"L",l(Q),l(et),"L",l(o),l(et),"Z");break;case _.OPS.moveTo:o=a[n++],d=a[n++],k.push("M",l(o),l(d));break;case _.OPS.lineTo:o=a[n++],d=a[n++],k.push("L",l(o),l(d));break;case _.OPS.curveTo:o=a[n+4],d=a[n+5],k.push("C",l(a[n]),l(a[n+1]),l(a[n+2]),l(a[n+3]),l(o),l(d)),n+=6;break;case _.OPS.curveTo2:k.push("C",l(o),l(d),l(a[n]),l(a[n+1]),l(a[n+2]),l(a[n+3])),o=a[n+2],d=a[n+3],n+=4;break;case _.OPS.curveTo3:o=a[n+2],d=a[n+3],k.push("C",l(a[n]),l(a[n+1]),l(o),l(d),l(o),l(d)),n+=4;break;case _.OPS.closePath:k.push("Z");break}k=k.join(" "),c.path&&e.length>0&&e[0]!==_.OPS.rectangle&&e[0]!==_.OPS.moveTo?k=c.path.getAttributeNS(null,"d")+k:(c.path=this.svgFactory.createElement("svg:path"),this._ensureTransformGroup().append(c.path)),c.path.setAttributeNS(null,"d",k),c.path.setAttributeNS(null,"fill","none"),c.element=c.path,c.setCurrentPoint(o,d)}endPath(){const e=this.current;if(e.path=null,!this.pendingClip)return;if(!e.element){this.pendingClip=null;return}const a=`clippath${S++}`,c=this.svgFactory.createElement("svg:clipPath");c.setAttributeNS(null,"id",a),c.setAttributeNS(null,"transform",A(this.transformMatrix));const o=e.element.cloneNode(!0);if(this.pendingClip==="evenodd"?o.setAttributeNS(null,"clip-rule","evenodd"):o.setAttributeNS(null,"clip-rule","nonzero"),this.pendingClip=null,c.append(o),this.defs.append(c),e.activeClipUrl){e.clipGroup=null;for(const d of this.extraStack)d.clipGroup=null;c.setAttributeNS(null,"clip-path",e.activeClipUrl)}e.activeClipUrl=`url(#${a})`,this.tgrp=null}clip(e){this.pendingClip=e}closePath(){const e=this.current;if(e.path){const a=`${e.path.getAttributeNS(null,"d")}Z`;e.path.setAttributeNS(null,"d",a)}}setLeading(e){this.current.leading=-e}setTextRise(e){this.current.textRise=e}setTextRenderingMode(e){this.current.textRenderingMode=e}setHScale(e){this.current.textHScale=e/100}setRenderingIntent(e){}setFlatness(e){}setGState(e){for(const[a,c]of e)switch(a){case"LW":this.setLineWidth(c);break;case"LC":this.setLineCap(c);break;case"LJ":this.setLineJoin(c);break;case"ML":this.setMiterLimit(c);break;case"D":this.setDash(c[0],c[1]);break;case"RI":this.setRenderingIntent(c);break;case"FL":this.setFlatness(c);break;case"Font":this.setFont(c);break;case"CA":this.setStrokeAlpha(c);break;case"ca":this.setFillAlpha(c);break;default:(0,_.warn)(`Unimplemented graphic state operator ${a}`);break}}fill(){const e=this.current;e.element&&(e.element.setAttributeNS(null,"fill",e.fillColor),e.element.setAttributeNS(null,"fill-opacity",e.fillAlpha),this.endPath())}stroke(){const e=this.current;e.element&&(this._setStrokeAttributes(e.element),e.element.setAttributeNS(null,"fill","none"),this.endPath())}_setStrokeAttributes(e,a=1){const c=this.current;let o=c.dashArray;a!==1&&o.length>0&&(o=o.map(function(d){return a*d})),e.setAttributeNS(null,"stroke",c.strokeColor),e.setAttributeNS(null,"stroke-opacity",c.strokeAlpha),e.setAttributeNS(null,"stroke-miterlimit",l(c.miterLimit)),e.setAttributeNS(null,"stroke-linecap",c.lineCap),e.setAttributeNS(null,"stroke-linejoin",c.lineJoin),e.setAttributeNS(null,"stroke-width",l(a*c.lineWidth)+"px"),e.setAttributeNS(null,"stroke-dasharray",o.map(l).join(" ")),e.setAttributeNS(null,"stroke-dashoffset",l(a*c.dashPhase)+"px")}eoFill(){var e;(e=this.current.element)==null||e.setAttributeNS(null,"fill-rule","evenodd"),this.fill()}fillStroke(){this.stroke(),this.fill()}eoFillStroke(){var e;(e=this.current.element)==null||e.setAttributeNS(null,"fill-rule","evenodd"),this.fillStroke()}closeStroke(){this.closePath(),this.stroke()}closeFillStroke(){this.closePath(),this.fillStroke()}closeEOFillStroke(){this.closePath(),this.eoFillStroke()}paintSolidColorImageMask(){const e=this.svgFactory.createElement("svg:rect");e.setAttributeNS(null,"x","0"),e.setAttributeNS(null,"y","0"),e.setAttributeNS(null,"width","1px"),e.setAttributeNS(null,"height","1px"),e.setAttributeNS(null,"fill",this.current.fillColor),this._ensureTransformGroup().append(e)}paintImageXObject(e){const a=this.getObject(e);if(!a){(0,_.warn)(`Dependent image with object ID ${e} is not ready yet`);return}this.paintInlineImageXObject(a)}paintInlineImageXObject(e,a){const c=e.width,o=e.height,d=x(e,this.forceDataSchema,!!a),k=this.svgFactory.createElement("svg:rect");k.setAttributeNS(null,"x","0"),k.setAttributeNS(null,"y","0"),k.setAttributeNS(null,"width",l(c)),k.setAttributeNS(null,"height",l(o)),this.current.element=k,this.clip("nonzero");const n=this.svgFactory.createElement("svg:image");n.setAttributeNS(F,"xlink:href",d),n.setAttributeNS(null,"x","0"),n.setAttributeNS(null,"y",l(-o)),n.setAttributeNS(null,"width",l(c)+"px"),n.setAttributeNS(null,"height",l(o)+"px"),n.setAttributeNS(null,"transform",`scale(${l(1/c)} ${l(-1/o)})`),a?a.append(n):this._ensureTransformGroup().append(n)}paintImageMaskXObject(e){const a=this.getObject(e.data,e);if(a.bitmap){(0,_.warn)("paintImageMaskXObject: ImageBitmap support is not implemented, ensure that the `isOffscreenCanvasSupported` API parameter is disabled.");return}const c=this.current,o=a.width,d=a.height,k=c.fillColor;c.maskId=`mask${w++}`;const n=this.svgFactory.createElement("svg:mask");n.setAttributeNS(null,"id",c.maskId);const j=this.svgFactory.createElement("svg:rect");j.setAttributeNS(null,"x","0"),j.setAttributeNS(null,"y","0"),j.setAttributeNS(null,"width",l(o)),j.setAttributeNS(null,"height",l(d)),j.setAttributeNS(null,"fill",k),j.setAttributeNS(null,"mask",`url(#${c.maskId})`),this.defs.append(n),this._ensureTransformGroup().append(j),this.paintInlineImageXObject(a,n)}paintFormXObjectBegin(e,a){if(Array.isArray(e)&&e.length===6&&this.transform(e[0],e[1],e[2],e[3],e[4],e[5]),a){const c=a[2]-a[0],o=a[3]-a[1],d=this.svgFactory.createElement("svg:rect");d.setAttributeNS(null,"x",a[0]),d.setAttributeNS(null,"y",a[1]),d.setAttributeNS(null,"width",l(c)),d.setAttributeNS(null,"height",l(o)),this.current.element=d,this.clip("nonzero"),this.endPath()}}paintFormXObjectEnd(){}_initialize(e){const a=this.svgFactory.create(e.width,e.height),c=this.svgFactory.createElement("svg:defs");a.append(c),this.defs=c;const o=this.svgFactory.createElement("svg:g");return o.setAttributeNS(null,"transform",A(e.transform)),a.append(o),this.svg=o,a}_ensureClipGroup(){if(!this.current.clipGroup){const e=this.svgFactory.createElement("svg:g");e.setAttributeNS(null,"clip-path",this.current.activeClipUrl),this.svg.append(e),this.current.clipGroup=e}return this.current.clipGroup}_ensureTransformGroup(){return this.tgrp||(this.tgrp=this.svgFactory.createElement("svg:g"),this.tgrp.setAttributeNS(null,"transform",A(this.transformMatrix)),this.current.activeClipUrl?this._ensureClipGroup().append(this.tgrp):this.svg.append(this.tgrp)),this.tgrp}}}}],__webpack_module_cache__={};function __w_pdfjs_require__(B){var i=__webpack_module_cache__[B];if(i!==void 0)return i.exports;var U=__webpack_module_cache__[B]={exports:{}};return __webpack_modules__[B](U,U.exports,__w_pdfjs_require__),U.exports}var __webpack_exports__={};return(()=>{var B=__webpack_exports__;Object.defineProperty(B,"__esModule",{value:!0}),Object.defineProperty(B,"AbortException",{enumerable:!0,get:function(){return i.AbortException}}),Object.defineProperty(B,"AnnotationEditorLayer",{enumerable:!0,get:function(){return W.AnnotationEditorLayer}}),Object.defineProperty(B,"AnnotationEditorParamsType",{enumerable:!0,get:function(){return i.AnnotationEditorParamsType}}),Object.defineProperty(B,"AnnotationEditorType",{enumerable:!0,get:function(){return i.AnnotationEditorType}}),Object.defineProperty(B,"AnnotationEditorUIManager",{enumerable:!0,get:function(){return q.AnnotationEditorUIManager}}),Object.defineProperty(B,"AnnotationLayer",{enumerable:!0,get:function(){return Z.AnnotationLayer}}),Object.defineProperty(B,"AnnotationMode",{enumerable:!0,get:function(){return i.AnnotationMode}}),Object.defineProperty(B,"CMapCompressionType",{enumerable:!0,get:function(){return i.CMapCompressionType}}),Object.defineProperty(B,"FeatureTest",{enumerable:!0,get:function(){return i.FeatureTest}}),Object.defineProperty(B,"GlobalWorkerOptions",{enumerable:!0,get:function(){return L.GlobalWorkerOptions}}),Object.defineProperty(B,"InvalidPDFException",{enumerable:!0,get:function(){return i.InvalidPDFException}}),Object.defineProperty(B,"MissingPDFException",{enumerable:!0,get:function(){return i.MissingPDFException}}),Object.defineProperty(B,"OPS",{enumerable:!0,get:function(){return i.OPS}}),Object.defineProperty(B,"PDFDataRangeTransport",{enumerable:!0,get:function(){return U.PDFDataRangeTransport}}),Object.defineProperty(B,"PDFDateString",{enumerable:!0,get:function(){return h.PDFDateString}}),Object.defineProperty(B,"PDFWorker",{enumerable:!0,get:function(){return U.PDFWorker}}),Object.defineProperty(B,"PasswordResponses",{enumerable:!0,get:function(){return i.PasswordResponses}}),Object.defineProperty(B,"PermissionFlag",{enumerable:!0,get:function(){return i.PermissionFlag}}),Object.defineProperty(B,"PixelsPerInch",{enumerable:!0,get:function(){return h.PixelsPerInch}}),Object.defineProperty(B,"PromiseCapability",{enumerable:!0,get:function(){return i.PromiseCapability}}),Object.defineProperty(B,"RenderingCancelledException",{enumerable:!0,get:function(){return h.RenderingCancelledException}}),Object.defineProperty(B,"SVGGraphics",{enumerable:!0,get:function(){return F.SVGGraphics}}),Object.defineProperty(B,"UnexpectedResponseException",{enumerable:!0,get:function(){return i.UnexpectedResponseException}}),Object.defineProperty(B,"Util",{enumerable:!0,get:function(){return i.Util}}),Object.defineProperty(B,"VerbosityLevel",{enumerable:!0,get:function(){return i.VerbosityLevel}}),Object.defineProperty(B,"XfaLayer",{enumerable:!0,get:function(){return v.XfaLayer}}),Object.defineProperty(B,"build",{enumerable:!0,get:function(){return U.build}}),Object.defineProperty(B,"createValidAbsoluteUrl",{enumerable:!0,get:function(){return i.createValidAbsoluteUrl}}),Object.defineProperty(B,"getDocument",{enumerable:!0,get:function(){return U.getDocument}}),Object.defineProperty(B,"getFilenameFromUrl",{enumerable:!0,get:function(){return h.getFilenameFromUrl}}),Object.defineProperty(B,"getPdfFilenameFromUrl",{enumerable:!0,get:function(){return h.getPdfFilenameFromUrl}}),Object.defineProperty(B,"getXfaPageViewport",{enumerable:!0,get:function(){return h.getXfaPageViewport}}),Object.defineProperty(B,"isDataScheme",{enumerable:!0,get:function(){return h.isDataScheme}}),Object.defineProperty(B,"isPdfFile",{enumerable:!0,get:function(){return h.isPdfFile}}),Object.defineProperty(B,"loadScript",{enumerable:!0,get:function(){return h.loadScript}}),Object.defineProperty(B,"normalizeUnicode",{enumerable:!0,get:function(){return i.normalizeUnicode}}),Object.defineProperty(B,"renderTextLayer",{enumerable:!0,get:function(){return _.renderTextLayer}}),Object.defineProperty(B,"setLayerDimensions",{enumerable:!0,get:function(){return h.setLayerDimensions}}),Object.defineProperty(B,"shadow",{enumerable:!0,get:function(){return i.shadow}}),Object.defineProperty(B,"updateTextLayer",{enumerable:!0,get:function(){return _.updateTextLayer}}),Object.defineProperty(B,"version",{enumerable:!0,get:function(){return U.version}});var i=__w_pdfjs_require__(1),U=__w_pdfjs_require__(2),h=__w_pdfjs_require__(6),_=__w_pdfjs_require__(26),W=__w_pdfjs_require__(27),q=__w_pdfjs_require__(5),Z=__w_pdfjs_require__(32),L=__w_pdfjs_require__(14),F=__w_pdfjs_require__(35),v=__w_pdfjs_require__(34)})(),__webpack_exports__})())})(pdf$1);var pdfExports=pdf$1.exports;const pdf=getDefaultExportFromCjs(pdfExports),pdfjs=_mergeNamespaces({__proto__:null,default:pdf},[pdfExports]);var __spreadArray=globalThis&&globalThis.__spreadArray||function(B,i,U){if(U||arguments.length===2)for(var h=0,_=i.length,W;h<_;h++)(W||!(h in i))&&(W||(W=Array.prototype.slice.call(i,0,h)),W[h]=i[h]);return B.concat(W||Array.prototype.slice.call(i))},clipboardEvents=["onCopy","onCut","onPaste"],compositionEvents=["onCompositionEnd","onCompositionStart","onCompositionUpdate"],focusEvents=["onFocus","onBlur"],formEvents=["onInput","onInvalid","onReset","onSubmit"],imageEvents=["onLoad","onError"],keyboardEvents=["onKeyDown","onKeyPress","onKeyUp"],mediaEvents=["onAbort","onCanPlay","onCanPlayThrough","onDurationChange","onEmptied","onEncrypted","onEnded","onError","onLoadedData","onLoadedMetadata","onLoadStart","onPause","onPlay","onPlaying","onProgress","onRateChange","onSeeked","onSeeking","onStalled","onSuspend","onTimeUpdate","onVolumeChange","onWaiting"],mouseEvents=["onClick","onContextMenu","onDoubleClick","onMouseDown","onMouseEnter","onMouseLeave","onMouseMove","onMouseOut","onMouseOver","onMouseUp"],dragEvents=["onDrag","onDragEnd","onDragEnter","onDragExit","onDragLeave","onDragOver","onDragStart","onDrop"],selectionEvents=["onSelect"],touchEvents=["onTouchCancel","onTouchEnd","onTouchMove","onTouchStart"],pointerEvents=["onPointerDown","onPointerMove","onPointerUp","onPointerCancel","onGotPointerCapture","onLostPointerCapture","onPointerEnter","onPointerLeave","onPointerOver","onPointerOut"],uiEvents=["onScroll"],wheelEvents=["onWheel"],animationEvents=["onAnimationStart","onAnimationEnd","onAnimationIteration"],transitionEvents=["onTransitionEnd"],otherEvents=["onToggle"],changeEvents=["onChange"],allEvents=__spreadArray(__spreadArray(__spreadArray(__spreadArray(__spreadArray(__spreadArray(__spreadArray(__spreadArray(__spreadArray(__spreadArray(__spreadArray(__spreadArray(__spreadArray(__spreadArray(__spreadArray(__spreadArray(__spreadArray(__spreadArray([],clipboardEvents,!0),compositionEvents,!0),focusEvents,!0),formEvents,!0),imageEvents,!0),keyboardEvents,!0),mediaEvents,!0),mouseEvents,!0),dragEvents,!0),selectionEvents,!0),touchEvents,!0),pointerEvents,!0),uiEvents,!0),wheelEvents,!0),animationEvents,!0),transitionEvents,!0),changeEvents,!0),otherEvents,!0);function makeEventProps(B,i){var U={};return allEvents.forEach(function(h){var _=B[h];_&&(i?U[h]=function(W){return _(W,i(h))}:U[h]=_)}),U}function makeCancellablePromise(B){var i=!1,U=new Promise(function(h,_){B.then(function(W){return!i&&h(W)}).catch(function(W){return!i&&_(W)})});return{promise:U,cancel:function(){i=!0}}}function r(B){var i,U,h="";if(typeof B=="string"||typeof B=="number")h+=B;else if(typeof B=="object")if(Array.isArray(B))for(i=0;i<B.length;i++)B[i]&&(U=r(B[i]))&&(h&&(h+=" "),h+=U);else for(i in B)B[i]&&(h&&(h+=" "),h+=i);return h}function clsx(){for(var B,i,U=0,h="";U<arguments.length;)(B=arguments[U++])&&(i=r(B))&&(h&&(h+=" "),h+=i);return h}var isProduction$1=!0,prefix="Invariant failed";function invariant(B,i){if(!B){if(isProduction$1)throw new Error(prefix);var U=typeof i=="function"?i():i,h=U?"".concat(prefix,": ").concat(U):prefix;throw new Error(h)}}var isProduction=!0;function warning(B,i){if(!isProduction){if(B)return;var U="Warning: "+i;typeof console<"u"&&console.warn(U);try{throw Error(U)}catch{}}}const DocumentContext=reactExports.createContext(null);function Message({children:B,type:i}){return React.createElement("div",{className:`react-pdf__message react-pdf__message--${i}`},B)}Message.propTypes={children:PropTypes.node,type:PropTypes.oneOf(["error","loading","no-data"]).isRequired};const DEFAULT_LINK_REL="noopener noreferrer nofollow";class LinkService{constructor(){this.externalLinkEnabled=!0,this.externalLinkRel=void 0,this.externalLinkTarget=void 0,this.isInPresentationMode=!1,this.pdfDocument=void 0,this.pdfViewer=void 0}setDocument(i){this.pdfDocument=i}setViewer(i){this.pdfViewer=i}setExternalLinkRel(i){this.externalLinkRel=i}setExternalLinkTarget(i){this.externalLinkTarget=i}setHistory(){}get pagesCount(){return this.pdfDocument?this.pdfDocument.numPages:0}get page(){return invariant(this.pdfViewer,"PDF viewer is not initialized."),this.pdfViewer.currentPageNumber||0}set page(i){invariant(this.pdfViewer,"PDF viewer is not initialized."),this.pdfViewer.currentPageNumber=i}get rotation(){return 0}set rotation(i){}goToDestination(i){return new Promise(U=>{invariant(this.pdfDocument,"PDF document not loaded."),invariant(i,"Destination is not specified."),typeof i=="string"?this.pdfDocument.getDestination(i).then(U):Array.isArray(i)?U(i):i.then(U)}).then(U=>{invariant(Array.isArray(U),`"${U}" is not a valid destination array.`);const h=U[0];new Promise(_=>{invariant(this.pdfDocument,"PDF document not loaded."),h instanceof Object?this.pdfDocument.getPageIndex(h).then(W=>{_(W)}).catch(()=>{invariant(!1,`"${h}" is not a valid page reference.`)}):typeof h=="number"?_(h):invariant(!1,`"${h}" is not a valid destination reference.`)}).then(_=>{const W=_+1;invariant(this.pdfViewer,"PDF viewer is not initialized."),invariant(W>=1&&W<=this.pagesCount,`"${W}" is not a valid page number.`),this.pdfViewer.scrollPageIntoView({dest:U,pageIndex:_,pageNumber:W})})})}navigateTo(i){this.goToDestination(i)}goToPage(i){const U=i-1;invariant(this.pdfViewer,"PDF viewer is not initialized."),invariant(i>=1&&i<=this.pagesCount,`"${i}" is not a valid page number.`),this.pdfViewer.scrollPageIntoView({pageIndex:U,pageNumber:i})}addLinkAttributes(i,U,h){i.href=U,i.rel=this.externalLinkRel||DEFAULT_LINK_REL,i.target=h?"_blank":this.externalLinkTarget||""}getDestinationHash(){return"#"}getAnchorUrl(){return"#"}setHash(){}executeNamedAction(){}cachePageRef(){}isPageVisible(){return!0}isPageCached(){return!0}executeSetOCGState(){}}const PasswordResponses={NEED_PASSWORD:1,INCORRECT_PASSWORD:2},PasswordResponses$1=PasswordResponses,isBrowser=typeof document<"u",isLocalFileSystem=isBrowser&&window.location.protocol==="file:";function isDefined(B){return typeof B<"u"}function isProvided(B){return isDefined(B)&&B!==null}function isString(B){return typeof B=="string"}function isArrayBuffer(B){return B instanceof ArrayBuffer}function isBlob(B){return invariant(isBrowser,"isBlob can only be used in a browser environment"),B instanceof Blob}function isDataURI(B){return isString(B)&&/^data:/.test(B)}function dataURItoByteString(B){invariant(isDataURI(B),"Invalid data URI.");const[i="",U=""]=B.split(",");return i.split(";").indexOf("base64")!==-1?atob(U):unescape(U)}function getDevicePixelRatio(){return isBrowser&&window.devicePixelRatio||1}const allowFileAccessFromFilesTip="On Chromium based browsers, you can use --allow-file-access-from-files flag for debugging purposes.";function displayCORSWarning(){warning(!isLocalFileSystem,`Loading PDF as base64 strings/URLs may not work on protocols other than HTTP/HTTPS. ${allowFileAccessFromFilesTip}`)}function displayWorkerWarning(){warning(!isLocalFileSystem,`Loading PDF.js worker may not work on protocols other than HTTP/HTTPS. ${allowFileAccessFromFilesTip}`)}function cancelRunningTask(B){B&&B.cancel&&B.cancel()}function makePageCallback(B,i){return Object.defineProperty(B,"width",{get(){return this.view[2]*i},configurable:!0}),Object.defineProperty(B,"height",{get(){return this.view[3]*i},configurable:!0}),Object.defineProperty(B,"originalWidth",{get(){return this.view[2]},configurable:!0}),Object.defineProperty(B,"originalHeight",{get(){return this.view[3]},configurable:!0}),B}function isCancelException(B){return B.name==="RenderingCancelledException"}function loadFromFile(B){return new Promise((i,U)=>{const h=new FileReader;h.onload=()=>{if(!h.result)return U(new Error("Error while reading a file."));i(h.result)},h.onerror=_=>{if(!_.target)return U(new Error("Error while reading a file."));const{error:W}=_.target;if(!W)return U(new Error("Error while reading a file."));switch(W.code){case W.NOT_FOUND_ERR:return U(new Error("Error while reading a file: File not found."));case W.SECURITY_ERR:return U(new Error("Error while reading a file: Security error."));case W.ABORT_ERR:return U(new Error("Error while reading a file: Aborted."));default:return U(new Error("Error while reading a file."))}},h.readAsArrayBuffer(B)})}function reducer(B,i){switch(i.type){case"RESOLVE":return{value:i.value,error:void 0};case"REJECT":return{value:!1,error:i.error};case"RESET":return{value:void 0,error:void 0};default:return B}}function useResolver(){return reactExports.useReducer(reducer,{value:void 0,error:void 0})}const eventProps=(()=>{const B={};return allEvents.forEach(i=>{B[i]=PropTypes.func}),B})(),isTypedArray=PropTypes.oneOfType([PropTypes.instanceOf(Int8Array),PropTypes.instanceOf(Uint8Array),PropTypes.instanceOf(Uint8ClampedArray),PropTypes.instanceOf(Int16Array),PropTypes.instanceOf(Uint16Array),PropTypes.instanceOf(Int32Array),PropTypes.instanceOf(Uint32Array),PropTypes.instanceOf(Float32Array),PropTypes.instanceOf(Float64Array)]),fileTypes=[PropTypes.string,PropTypes.instanceOf(ArrayBuffer),PropTypes.shape({data:PropTypes.oneOfType([PropTypes.string,PropTypes.instanceOf(ArrayBuffer),PropTypes.arrayOf(PropTypes.number.isRequired),isTypedArray]).isRequired}),PropTypes.shape({range:PropTypes.instanceOf(pdfExports.PDFDataRangeTransport).isRequired}),PropTypes.shape({url:PropTypes.string.isRequired})];typeof Blob<"u"&&fileTypes.push(PropTypes.instanceOf(Blob));const isClassName=PropTypes.oneOfType([PropTypes.string,PropTypes.arrayOf(PropTypes.string)]),isFile=PropTypes.oneOfType(fileTypes);PropTypes.instanceOf(LinkService);PropTypes.oneOf(["_self","_blank","_parent","_top"]);PropTypes.shape({commonObjs:PropTypes.shape({}).isRequired,getAnnotations:PropTypes.func.isRequired,getTextContent:PropTypes.func.isRequired,getViewport:PropTypes.func.isRequired,render:PropTypes.func.isRequired});const isPageIndex=function B(i,U,h){const{[U]:_,pageNumber:W,pdf:q}=i;if(!isDefined(q))return null;if(isDefined(_)){if(typeof _!="number")return new Error(`\`${U}\` of type \`${typeof _}\` supplied to \`${h}\`, expected \`number\`.`);if(_<0)return new Error(`Expected \`${U}\` to be greater or equal to 0.`);const{numPages:Z}=q;if(_+1>Z)return new Error(`Expected \`${U}\` to be less or equal to ${Z-1}.`)}else if(!isDefined(W))return new Error(`\`${U}\` not supplied. Either pageIndex or pageNumber must be supplied to \`${h}\`.`);return null},isPageNumber=function B(i,U,h){const{[U]:_,pageIndex:W,pdf:q}=i;if(!isDefined(q))return null;if(isDefined(_)){if(typeof _!="number")return new Error(`\`${U}\` of type \`${typeof _}\` supplied to \`${h}\`, expected \`number\`.`);if(_<1)return new Error(`Expected \`${U}\` to be greater or equal to 1.`);const{numPages:Z}=q;if(_>Z)return new Error(`Expected \`${U}\` to be less or equal to ${Z}.`)}else if(!isDefined(W))return new Error(`\`${U}\` not supplied. Either pageIndex or pageNumber must be supplied to \`${h}\`.`);return null},isPdf=PropTypes.oneOfType([PropTypes.shape({getDestination:PropTypes.func.isRequired,getOutline:PropTypes.func.isRequired,getPage:PropTypes.func.isRequired,numPages:PropTypes.number.isRequired}),PropTypes.bool]),isRef=PropTypes.oneOfType([PropTypes.func,PropTypes.exact({current:PropTypes.any})]),isRenderMode=PropTypes.oneOf(["canvas","none","svg"]),isRotate=PropTypes.oneOf([0,90,180,270]);var __awaiter=globalThis&&globalThis.__awaiter||function(B,i,U,h){function _(W){return W instanceof U?W:new U(function(q){q(W)})}return new(U||(U=Promise))(function(W,q){function Z(v){try{F(h.next(v))}catch(N){q(N)}}function L(v){try{F(h.throw(v))}catch(N){q(N)}}function F(v){v.done?W(v.value):_(v.value).then(Z,L)}F((h=h.apply(B,i||[])).next())})},__rest$1=globalThis&&globalThis.__rest||function(B,i){var U={};for(var h in B)Object.prototype.hasOwnProperty.call(B,h)&&i.indexOf(h)<0&&(U[h]=B[h]);if(B!=null&&typeof Object.getOwnPropertySymbols=="function")for(var _=0,h=Object.getOwnPropertySymbols(B);_<h.length;_++)i.indexOf(h[_])<0&&Object.prototype.propertyIsEnumerable.call(B,h[_])&&(U[h[_]]=B[h[_]]);return U};const{PDFDataRangeTransport}=pdfjs,defaultOnPassword=(B,i)=>{switch(i){case PasswordResponses$1.NEED_PASSWORD:{const U=prompt("Enter the password to open this PDF file.");B(U);break}case PasswordResponses$1.INCORRECT_PASSWORD:{const U=prompt("Invalid password. Please try again.");B(U);break}}},Document=reactExports.forwardRef(function B(i,U){var{children:h,className:_,error:W="Failed to load PDF file.",externalLinkRel:q,externalLinkTarget:Z,file:L,inputRef:F,imageResourcesPath:v,loading:N="Loading PDF…",noData:T="No PDF file specified.",onItemClick:x,onLoadError:g,onLoadProgress:f,onLoadSuccess:l,onPassword:A=defaultOnPassword,onSourceError:S,onSourceSuccess:w,options:m,renderMode:e,rotate:a}=i,c=__rest$1(i,["children","className","error","externalLinkRel","externalLinkTarget","file","inputRef","imageResourcesPath","loading","noData","onItemClick","onLoadError","onLoadProgress","onLoadSuccess","onPassword","onSourceError","onSourceSuccess","options","renderMode","rotate"]);const[o,d]=useResolver(),{value:k,error:n}=o,[j,$]=useResolver(),{value:Y,error:Q}=j,et=reactExports.useRef(new LinkService),ut=reactExports.useRef([]),lt=reactExports.useRef({scrollPageIntoView:t=>{const{dest:s,pageNumber:b,pageIndex:E=b-1}=t;if(x){x({dest:s,pageIndex:E,pageNumber:b});return}const C=ut.current[E];if(C){C.scrollIntoView();return}warning(!1,`An internal link leading to page ${b} was clicked, but neither <Document> was provided with onItemClick nor it was able to find the page within itself. Either provide onItemClick to <Document> and handle navigating by yourself or ensure that all pages are rendered within <Document>.`)}});reactExports.useImperativeHandle(U,()=>({linkService:et,pages:ut,viewer:lt}),[]);function ht(){w&&w()}function mt(){n&&(warning(!1,n.toString()),S&&S(n))}function _t(){d({type:"RESET"})}reactExports.useEffect(_t,[L,d]);const St=reactExports.useCallback(()=>__awaiter(this,void 0,void 0,function*(){if(!L)return null;if(typeof L=="string")return isDataURI(L)?{data:dataURItoByteString(L)}:(displayCORSWarning(),{url:L});if(L instanceof PDFDataRangeTransport)return{range:L};if(isArrayBuffer(L))return{data:L};if(isBrowser&&isBlob(L))return{data:yield loadFromFile(L)};if(invariant(typeof L=="object","Invalid parameter in file, need either Uint8Array, string or a parameter object"),invariant("data"in L||"range"in L||"url"in L,"Invalid parameter object: need either .data, .range or .url"),"url"in L&&typeof L.url=="string"){if(isDataURI(L.url)){const{url:t}=L,s=__rest$1(L,["url"]),b=dataURItoByteString(t);return Object.assign({data:b},s)}displayCORSWarning()}return L}),[L]);reactExports.useEffect(()=>{const t=makeCancellablePromise(St());return t.promise.then(s=>{d({type:"RESOLVE",value:s})}).catch(s=>{d({type:"REJECT",error:s})}),()=>{cancelRunningTask(t)}},[St,d]),reactExports.useEffect(()=>{if(!(typeof k>"u")){if(k===!1){mt();return}ht()}},[k]);function At(){Y&&(l&&l(Y),ut.current=new Array(Y.numPages),et.current.setDocument(Y))}function X(){Q&&(warning(!1,Q.toString()),g&&g(Q))}function u(){$({type:"RESET"})}reactExports.useEffect(u,[$,k]);function p(){if(!k)return;const t=m?Object.assign(Object.assign({},k),m):k,s=pdfExports.getDocument(t);f&&(s.onProgress=f),A&&(s.onPassword=A);const b=s;return b.promise.then(E=>{$({type:"RESOLVE",value:E})}).catch(E=>{b.destroyed||$({type:"REJECT",error:E})}),()=>{b.destroy()}}reactExports.useEffect(p,[m,$,k]),reactExports.useEffect(()=>{if(!(typeof Y>"u")){if(Y===!1){X();return}At()}},[Y]);function P(){et.current.setViewer(lt.current),et.current.setExternalLinkRel(q),et.current.setExternalLinkTarget(Z)}reactExports.useEffect(P,[q,Z]);function H(t,s){ut.current[t]=s}function O(t){delete ut.current[t]}const z=reactExports.useMemo(()=>({imageResourcesPath:v,linkService:et.current,onItemClick:x,pdf:Y,registerPage:H,renderMode:e,rotate:a,unregisterPage:O}),[v,x,Y,e,a]),G=reactExports.useMemo(()=>makeEventProps(c,()=>Y),[c,Y]);function M(){return React.createElement(DocumentContext.Provider,{value:z},h)}function D(){return L?Y==null?React.createElement(Message,{type:"loading"},typeof N=="function"?N():N):Y===!1?React.createElement(Message,{type:"error"},typeof W=="function"?W():W):M():React.createElement(Message,{type:"no-data"},typeof T=="function"?T():T)}return React.createElement("div",Object.assign({className:clsx("react-pdf__Document",_),ref:F,style:{["--scale-factor"]:"1"}},G),D())}),isFunctionOrNode$1=PropTypes.oneOfType([PropTypes.func,PropTypes.node]);Document.propTypes=Object.assign(Object.assign({},eventProps),{children:PropTypes.node,className:isClassName,error:isFunctionOrNode$1,externalLinkRel:PropTypes.string,externalLinkTarget:PropTypes.oneOf(["_self","_blank","_parent","_top"]),file:isFile,imageResourcesPath:PropTypes.string,inputRef:isRef,loading:isFunctionOrNode$1,noData:isFunctionOrNode$1,onItemClick:PropTypes.func,onLoadError:PropTypes.func,onLoadProgress:PropTypes.func,onLoadSuccess:PropTypes.func,onPassword:PropTypes.func,onSourceError:PropTypes.func,onSourceSuccess:PropTypes.func,options:PropTypes.shape({canvasFactory:PropTypes.any,canvasMaxAreaInBytes:PropTypes.number,cMapPacked:PropTypes.bool,CMapReaderFactory:PropTypes.any,cMapUrl:PropTypes.string,disableAutoFetch:PropTypes.bool,disableFontFace:PropTypes.bool,disableRange:PropTypes.bool,disableStream:PropTypes.bool,docBaseUrl:PropTypes.string,enableXfa:PropTypes.bool,filterFactory:PropTypes.any,fontExtraProperties:PropTypes.bool,httpHeaders:PropTypes.object,isEvalSupported:PropTypes.bool,isOffscreenCanvasSupported:PropTypes.bool,length:PropTypes.number,maxImageSize:PropTypes.number,ownerDocument:PropTypes.any,password:PropTypes.string,pdfBug:PropTypes.bool,rangeChunkSize:PropTypes.number,StandardFontDataFactory:PropTypes.any,standardFontDataUrl:PropTypes.string,stopAtErrors:PropTypes.bool,useSystemFonts:PropTypes.bool,useWorkerFetch:PropTypes.bool,verbosity:PropTypes.number,withCredentials:PropTypes.bool,worker:PropTypes.any}),rotate:PropTypes.number});const Document$1=Document;function useDocumentContext(){return reactExports.useContext(DocumentContext)}function mergeRefs(){for(var B=[],i=0;i<arguments.length;i++)B[i]=arguments[i];var U=B.filter(Boolean);if(U.length<=1){var h=U[0];return h||null}return function(W){U.forEach(function(q){typeof q=="function"?q(W):q&&(q.current=W)})}}const PageContext=reactExports.createContext(null),PDF_ROLE_TO_HTML_ROLE={Document:null,DocumentFragment:null,Part:"group",Sect:"group",Div:"group",Aside:"note",NonStruct:"none",P:null,H:"heading",Title:null,FENote:"note",Sub:"group",Lbl:null,Span:null,Em:null,Strong:null,Link:"link",Annot:"note",Form:"form",Ruby:null,RB:null,RT:null,RP:null,Warichu:null,WT:null,WP:null,L:"list",LI:"listitem",LBody:null,Table:"table",TR:"row",TH:"columnheader",TD:"cell",THead:"columnheader",TBody:null,TFoot:null,Caption:null,Figure:"figure",Formula:null,Artifact:null},HEADING_PATTERN=/^H(\d+)$/;function isPdfRole(B){return B in PDF_ROLE_TO_HTML_ROLE}function isStructTreeNode(B){return"children"in B}function isStructTreeNodeWithOnlyContentChild(B){return isStructTreeNode(B)?B.children.length===1&&0 in B.children&&"id"in B.children[0]:!1}function getRoleAttributes(B){const i={};if(isStructTreeNode(B)){const{role:U}=B,h=U.match(HEADING_PATTERN);if(h)i.role="heading",i["aria-level"]=Number(h[1]);else if(isPdfRole(U)){const _=PDF_ROLE_TO_HTML_ROLE[U];_&&(i.role=_)}}return i}function getBaseAttributes(B){const i={};if(isStructTreeNode(B)){if(B.alt!==void 0&&(i["aria-label"]=B.alt),B.lang!==void 0&&(i.lang=B.lang),isStructTreeNodeWithOnlyContentChild(B)){const[U]=B.children;if(U){const h=getBaseAttributes(U);return Object.assign(Object.assign({},i),h)}}}else"id"in B&&(i["aria-owns"]=B.id);return i}function getAttributes(B){return B?Object.assign(Object.assign({},getRoleAttributes(B)),getBaseAttributes(B)):null}function StructTreeItem({className:B,node:i}){const U=reactExports.useMemo(()=>getAttributes(i),[i]),h=reactExports.useMemo(()=>!isStructTreeNode(i)||isStructTreeNodeWithOnlyContentChild(i)?null:i.children.map((_,W)=>React.createElement(StructTreeItem,{key:W,node:_})),[i]);return React.createElement("span",Object.assign({className:B},U),h)}StructTreeItem.propTypes={node:PropTypes.oneOfType([PropTypes.shape({children:PropTypes.object,role:PropTypes.string}),PropTypes.shape({id:PropTypes.string,type:PropTypes.string})]).isRequired};function usePageContext(){return reactExports.useContext(PageContext)}function StructTree(){const B=usePageContext();invariant(B,"Unable to find Page context.");const{onGetStructTreeError:i,onGetStructTreeSuccess:U}=B,[h,_]=useResolver(),{value:W,error:q}=h,{customTextRenderer:Z,page:L}=B;function F(){W&&U&&U(W)}function v(){q&&(warning(!1,q.toString()),i&&i(q))}function N(){_({type:"RESET"})}reactExports.useEffect(N,[_,L]);function T(){if(Z||!L)return;const x=makeCancellablePromise(L.getStructTree()),g=x;return x.promise.then(f=>{_({type:"RESOLVE",value:f})}).catch(f=>{_({type:"REJECT",error:f})}),()=>cancelRunningTask(g)}return reactExports.useEffect(T,[Z,L,_]),reactExports.useEffect(()=>{if(W!==void 0){if(W===!1){v();return}F()}},[W]),W?React.createElement(StructTreeItem,{className:"react-pdf__Page__structTree structTree",node:W}):null}const ANNOTATION_MODE=pdfExports.AnnotationMode;function PageCanvas(B){const i=usePageContext();invariant(i,"Unable to find Page context.");const U=Object.assign(Object.assign({},i),B),{_className:h,canvasBackground:_,devicePixelRatio:W,onRenderError:q,onRenderSuccess:Z,page:L,renderForms:F,renderTextLayer:v,rotate:N,scale:T}=U,{canvasRef:x}=B,g=reactExports.useRef(null);invariant(L,"Attempted to render page canvas, but no page was specified.");const f=W||getDevicePixelRatio();function l(){L&&Z&&Z(makePageCallback(L,T))}function A(a){isCancelException(a)||(warning(!1,a.toString()),q&&q(a))}const S=reactExports.useMemo(()=>L.getViewport({scale:T*f,rotation:N}),[f,L,N,T]),w=reactExports.useMemo(()=>L.getViewport({scale:T,rotation:N}),[L,N,T]);function m(){if(!L)return;L.cleanup();const{current:a}=g;if(!a)return;a.width=S.width,a.height=S.height,a.style.width=`${Math.floor(w.width)}px`,a.style.height=`${Math.floor(w.height)}px`,a.style.visibility="hidden";const c={annotationMode:F?ANNOTATION_MODE.ENABLE_FORMS:ANNOTATION_MODE.ENABLE,canvasContext:a.getContext("2d",{alpha:!1}),viewport:S};_&&(c.background=_);const o=L.render(c),d=o;return o.promise.then(()=>{a.style.visibility="",l()}).catch(A),()=>cancelRunningTask(d)}reactExports.useEffect(m,[_,g,f,L,F,S,w]);const e=reactExports.useCallback(()=>{const{current:a}=g;a&&(a.width=0,a.height=0)},[g]);return reactExports.useEffect(()=>e,[e]),React.createElement("canvas",{className:`${h}__canvas`,dir:"ltr",ref:mergeRefs(x,g),style:{display:"block",userSelect:"none"}},v?React.createElement(StructTree,null):null)}PageCanvas.propTypes={canvasRef:isRef};function PageSVG(){const B=usePageContext();invariant(B,"Unable to find Page context.");const{_className:i,onRenderSuccess:U,onRenderError:h,page:_,rotate:W,scale:q}=B,[Z,L]=useResolver(),{value:F,error:v}=Z;invariant(_,"Attempted to render page SVG, but no page was specified.");function N(){_&&U&&U(makePageCallback(_,q))}function T(){v&&(isCancelException(v)||(warning(!1,v.toString()),h&&h(v)))}const x=reactExports.useMemo(()=>_.getViewport({scale:q,rotation:W}),[_,W,q]);function g(){L({type:"RESET"})}reactExports.useEffect(g,[_,L,x]);function f(){if(!_)return;const w=makeCancellablePromise(_.getOperatorList());return w.promise.then(m=>{new pdfExports.SVGGraphics(_.commonObjs,_.objs).getSVG(m,x).then(a=>{L({type:"RESOLVE",value:a})}).catch(a=>{L({type:"REJECT",error:a})})}).catch(m=>{L({type:"REJECT",error:m})}),()=>cancelRunningTask(w)}reactExports.useEffect(f,[_,L,x]),reactExports.useEffect(()=>{if(F!==void 0){if(F===!1){T();return}N()}},[F]);function l(w){if(!w||!F)return;w.firstElementChild||w.appendChild(F);const{width:m,height:e}=x;F.setAttribute("width",`${m}`),F.setAttribute("height",`${e}`)}const{width:A,height:S}=x;return React.createElement("div",{className:`${i}__svg`,ref:w=>l(w),style:{display:"block",backgroundColor:"white",overflow:"hidden",width:A,height:S,userSelect:"none"}})}function isTextItem(B){return"str"in B}function TextLayer(){const B=usePageContext();invariant(B,"Unable to find Page context.");const{customTextRenderer:i,onGetTextError:U,onGetTextSuccess:h,onRenderTextLayerError:_,onRenderTextLayerSuccess:W,page:q,pageIndex:Z,pageNumber:L,rotate:F,scale:v}=B,[N,T]=useResolver(),{value:x,error:g}=N,f=reactExports.useRef(null),l=reactExports.useRef();invariant(q,"Attempted to load page text content, but no page was specified."),warning(parseInt(window.getComputedStyle(document.body).getPropertyValue("--react-pdf-text-layer"),10)===1,"TextLayer styles not found. Read more: https://github.com/wojtekmaj/react-pdf#support-for-text-layer");function A(){x&&h&&h(x)}function S(){g&&(warning(!1,g.toString()),U&&U(g))}function w(){T({type:"RESET"})}reactExports.useEffect(w,[q,T]);function m(){if(!q)return;const n=makeCancellablePromise(q.getTextContent()),j=n;return n.promise.then($=>{T({type:"RESOLVE",value:$})}).catch($=>{T({type:"REJECT",error:$})}),()=>cancelRunningTask(j)}reactExports.useEffect(m,[q,T]),reactExports.useEffect(()=>{if(x!==void 0){if(x===!1){S();return}A()}},[x]);const e=reactExports.useCallback(()=>{W&&W()},[W]),a=reactExports.useCallback(n=>{warning(!1,n.toString()),_&&_(n)},[_]);function c(){const n=l.current;n&&n.classList.add("active")}function o(){const n=l.current;n&&n.classList.remove("active")}const d=reactExports.useMemo(()=>q.getViewport({scale:v,rotation:F}),[q,F,v]);function k(){if(!q||!x)return;const{current:n}=f;if(!n)return;n.innerHTML="";const j=q.streamTextContent({includeMarkedContent:!0}),$={container:n,textContentSource:j,viewport:d},Y=pdfExports.renderTextLayer($),Q=Y;return Y.promise.then(()=>{const et=document.createElement("div");et.className="endOfContent",n.append(et),l.current=et;const lt=!!n.querySelector(".markedContent")?n.querySelectorAll(".markedContent > *:not(.markedContent"):n.children;if(i){let ht=0;x.items.forEach((mt,_t)=>{if(!isTextItem(mt))return;const St=lt[ht];if(!St)return;const At=i(Object.assign({pageIndex:Z,pageNumber:L,itemIndex:_t},mt));St.innerHTML=At,ht+=mt.str&&mt.hasEOL?2:1})}e()}).catch(a),()=>cancelRunningTask(Q)}return reactExports.useLayoutEffect(k,[i,a,e,q,Z,L,x,d]),React.createElement("div",{className:clsx("react-pdf__Page__textContent","textLayer"),onMouseUp:o,onMouseDown:c,ref:f})}function AnnotationLayer(){const B=useDocumentContext();invariant(B,"Unable to find Document context. Did you wrap <Page /> in <Document />?");const i=usePageContext();invariant(i,"Unable to find Page context.");const U=Object.assign(Object.assign({},B),i),{imageResourcesPath:h,linkService:_,onGetAnnotationsError:W,onGetAnnotationsSuccess:q,onRenderAnnotationLayerError:Z,onRenderAnnotationLayerSuccess:L,page:F,pdf:v,renderForms:N,rotate:T,scale:x=1}=U,[g,f]=useResolver(),{value:l,error:A}=g,S=reactExports.useRef(null);invariant(F,"Attempted to load page annotations, but no page was specified."),warning(parseInt(window.getComputedStyle(document.body).getPropertyValue("--react-pdf-annotation-layer"),10)===1,"AnnotationLayer styles not found. Read more: https://github.com/wojtekmaj/react-pdf#support-for-annotations");function w(){l&&q&&q(l)}function m(){A&&(warning(!1,A.toString()),W&&W(A))}function e(){f({type:"RESET"})}reactExports.useEffect(e,[f,F]);function a(){if(!F)return;const n=makeCancellablePromise(F.getAnnotations()),j=n;return n.promise.then($=>{f({type:"RESOLVE",value:$})}).catch($=>{f({type:"REJECT",error:$})}),()=>{cancelRunningTask(j)}}reactExports.useEffect(a,[f,F,N]),reactExports.useEffect(()=>{if(l!==void 0){if(l===!1){m();return}w()}},[l]);function c(){L&&L()}function o(n){warning(!1,`${n}`),Z&&Z(n)}const d=reactExports.useMemo(()=>F.getViewport({scale:x,rotation:T}),[F,T,x]);function k(){if(!v||!F||!l)return;const{current:n}=S;if(!n)return;const j=d.clone({dontFlip:!0}),$={annotations:l,annotationStorage:v.annotationStorage,div:n,downloadManager:null,imageResourcesPath:h,linkService:_,page:F,renderForms:N,viewport:j};n.innerHTML="";try{pdfExports.AnnotationLayer.render($),c()}catch(Y){o(Y)}return()=>{}}return reactExports.useEffect(k,[l,h,_,F,N,d]),React.createElement("div",{className:clsx("react-pdf__Page__annotations","annotationLayer"),ref:S})}var __rest=globalThis&&globalThis.__rest||function(B,i){var U={};for(var h in B)Object.prototype.hasOwnProperty.call(B,h)&&i.indexOf(h)<0&&(U[h]=B[h]);if(B!=null&&typeof Object.getOwnPropertySymbols=="function")for(var _=0,h=Object.getOwnPropertySymbols(B);_<h.length;_++)i.indexOf(h[_])<0&&Object.prototype.propertyIsEnumerable.call(B,h[_])&&(U[h[_]]=B[h[_]]);return U};const defaultScale=1;function Page(B){const i=useDocumentContext();invariant(i,"Unable to find Document context. Did you wrap <Page /> in <Document />?");const U=Object.assign(Object.assign({},i),B),{_className:h="react-pdf__Page",_enableRegisterUnregisterPage:_=!0,canvasBackground:W,canvasRef:q,children:Z,className:L,customTextRenderer:F,devicePixelRatio:v,error:N="Failed to load the page.",height:T,inputRef:x,loading:g="Loading page…",noData:f="No page specified.",onGetAnnotationsError:l,onGetAnnotationsSuccess:A,onGetStructTreeError:S,onGetStructTreeSuccess:w,onGetTextError:m,onGetTextSuccess:e,onLoadError:a,onLoadSuccess:c,onRenderAnnotationLayerError:o,onRenderAnnotationLayerSuccess:d,onRenderError:k,onRenderSuccess:n,onRenderTextLayerError:j,onRenderTextLayerSuccess:$,pageIndex:Y,pageNumber:Q,pdf:et,registerPage:ut,renderAnnotationLayer:lt=!0,renderForms:ht=!1,renderMode:mt="canvas",renderTextLayer:_t=!0,rotate:St,scale:At=defaultScale,unregisterPage:X,width:u}=U,p=__rest(U,["_className","_enableRegisterUnregisterPage","canvasBackground","canvasRef","children","className","customTextRenderer","devicePixelRatio","error","height","inputRef","loading","noData","onGetAnnotationsError","onGetAnnotationsSuccess","onGetStructTreeError","onGetStructTreeSuccess","onGetTextError","onGetTextSuccess","onLoadError","onLoadSuccess","onRenderAnnotationLayerError","onRenderAnnotationLayerSuccess","onRenderError","onRenderSuccess","onRenderTextLayerError","onRenderTextLayerSuccess","pageIndex","pageNumber","pdf","registerPage","renderAnnotationLayer","renderForms","renderMode","renderTextLayer","rotate","scale","unregisterPage","width"]),[P,H]=useResolver(),{value:O,error:z}=P,G=reactExports.useRef(null);invariant(et,"Attempted to load a page, but no document was specified.");const M=isProvided(Q)?Q-1:Y??null,D=Q??(isProvided(Y)?Y+1:null),t=St??(O?O.rotate:null),s=reactExports.useMemo(()=>{if(!O)return null;let Pt=1;const K=At??defaultScale;if(u||T){const yt=O.getViewport({scale:1,rotation:t});u?Pt=u/yt.width:T&&(Pt=T/yt.height)}return K*Pt},[T,O,t,At,u]);function b(){return()=>{isProvided(M)&&_&&X&&X(M)}}reactExports.useEffect(b,[_,et,M,X]);function E(){if(c){if(!O||!s)return;c(makePageCallback(O,s))}if(_&&ut){if(!isProvided(M)||!G.current)return;ut(M,G.current)}}function C(){z&&(warning(!1,z.toString()),a&&a(z))}function V(){H({type:"RESET"})}reactExports.useEffect(V,[H,et,M]);function st(){if(!et||!D)return;const Pt=makeCancellablePromise(et.getPage(D)),K=Pt;return Pt.promise.then(yt=>{H({type:"RESOLVE",value:yt})}).catch(yt=>{H({type:"REJECT",error:yt})}),()=>cancelRunningTask(K)}reactExports.useEffect(st,[H,et,M,D,ut]),reactExports.useEffect(()=>{if(O!==void 0){if(O===!1){C();return}E()}},[O,s]);const J=reactExports.useMemo(()=>O&&isProvided(M)&&D&&isProvided(t)&&isProvided(s)?{_className:h,canvasBackground:W,customTextRenderer:F,devicePixelRatio:v,onGetAnnotationsError:l,onGetAnnotationsSuccess:A,onGetStructTreeError:S,onGetStructTreeSuccess:w,onGetTextError:m,onGetTextSuccess:e,onRenderAnnotationLayerError:o,onRenderAnnotationLayerSuccess:d,onRenderError:k,onRenderSuccess:n,onRenderTextLayerError:j,onRenderTextLayerSuccess:$,page:O,pageIndex:M,pageNumber:D,renderForms:ht,renderTextLayer:_t,rotate:t,scale:s}:null,[h,W,F,v,l,A,S,w,m,e,o,d,k,n,j,$,O,M,D,ht,_t,t,s]),rt=reactExports.useMemo(()=>makeEventProps(p,()=>O&&(s?makePageCallback(O,s):void 0)),[p,O,s]),ot=`${M}@${s}/${t}`,nt=`${M}/${t}`;function at(){switch(mt){case"none":return null;case"svg":return React.createElement(PageSVG,{key:`${nt}_svg`});case"canvas":default:return React.createElement(PageCanvas,{key:`${ot}_canvas`,canvasRef:q})}}function ft(){return _t?React.createElement(TextLayer,{key:`${ot}_text`}):null}function pt(){return lt?React.createElement(AnnotationLayer,{key:`${ot}_annotations`}):null}function Tt(){return React.createElement(PageContext.Provider,{value:J},at(),ft(),pt(),Z)}function vt(){return D?et===null||O===void 0||O===null?React.createElement(Message,{type:"loading"},typeof g=="function"?g():g):et===!1||O===!1?React.createElement(Message,{type:"error"},typeof N=="function"?N():N):Tt():React.createElement(Message,{type:"no-data"},typeof f=="function"?f():f)}return React.createElement("div",Object.assign({className:clsx(h,L),"data-page-number":D,ref:mergeRefs(x,G),style:{["--scale-factor"]:`${s}`,backgroundColor:W||"white",position:"relative",minWidth:"min-content",minHeight:"min-content"}},rt),vt())}const isFunctionOrNode=PropTypes.oneOfType([PropTypes.func,PropTypes.node]);Page.propTypes=Object.assign(Object.assign({},eventProps),{canvasBackground:PropTypes.string,canvasRef:isRef,children:PropTypes.node,className:isClassName,customTextRenderer:PropTypes.func,devicePixelRatio:PropTypes.number,error:isFunctionOrNode,height:PropTypes.number,imageResourcesPath:PropTypes.string,inputRef:isRef,loading:isFunctionOrNode,noData:isFunctionOrNode,onGetTextError:PropTypes.func,onGetTextSuccess:PropTypes.func,onLoadError:PropTypes.func,onLoadSuccess:PropTypes.func,onRenderError:PropTypes.func,onRenderSuccess:PropTypes.func,onRenderTextLayerError:PropTypes.func,onRenderTextLayerSuccess:PropTypes.func,pageIndex:isPageIndex,pageNumber:isPageNumber,pdf:isPdf,renderAnnotationLayer:PropTypes.bool,renderForms:PropTypes.bool,renderMode:isRenderMode,renderTextLayer:PropTypes.bool,rotate:isRotate,scale:PropTypes.number,width:PropTypes.number});displayWorkerWarning();pdfExports.GlobalWorkerOptions.workerSrc="pdf.worker.js";pdfExports.GlobalWorkerOptions.workerSrc=`//unpkg.com/pdfjs-dist@${pdfExports.version}/legacy/build/pdf.worker.min.js`;const PdfPreview=({pdfUrls:B})=>{var N;const[i,U]=reactExports.useState(null),[h,_]=reactExports.useState(1),[W,q]=reactExports.useState(0),Z=({numPages:T})=>{U(T)},L=()=>_(T=>T-1<=1?1:T-1),F=()=>_(T=>T+1>=i?i:T+1);function v(T){q(T)}return!B||B.length===0?jsx("div",{className:"flex justify-center items-center h-[40rem]",children:"No PDFs to display"}):jsxs("div",{children:[jsx("nav",{className:"flex gap-x-2 py-2 ",children:(B==null?void 0:B.length)>0?B.map((T,x)=>jsxs("button",{className:"px-2 py-1 border rounded-lg bg-gray-700 rounded text-smooth",onClick:()=>{_(1),v(x)},children:["File ",x+1]},x)):null}),jsx("div",{className:"overflow-y-scroll containerscroll h-[40rem]",children:jsx(Document$1,{onLoadError:console.error,file:`Invoices/${(N=B[W])==null?void 0:N.DocName}`,onLoadSuccess:Z,children:jsx(Page,{pageNumber:h,renderTextLayer:!1})})}),jsxs("nav",{className:"flex gap-x-2 py-2 justify-center items-center text-sm",children:[jsxs("button",{onClick:L,className:"px-3 py-1 border flex bg-gray-800 rounded-lg text-smooth",children:[jsx(ChevronLeftIcon,{className:"mr-1 h-5"}),jsx("span",{children:"Prev"})]}),jsxs("p",{children:["Page ",h," of ",i]}),jsxs("button",{onClick:F,className:"px-3 py-1 flex border bg-gray-800 rounded-lg text-smooth",children:[jsx("span",{children:" Next"}),jsx(ChevronRightIcon,{className:"ml-1 h-5"})]})]})]})},PdfPreview$1=PdfPreview;export{PdfPreview$1 as default};
