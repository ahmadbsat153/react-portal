import{r,j as a,a as e}from"./app-e057de79.js";import{E as le}from"./exceljs.min-9c74167d.js";import{n as se}from"./NotFound-19253a0b.js";import{F as re}from"./FileSaver.min-104598b7.js";import{h as S}from"./moment-fbc5633a.js";import{R as ne}from"./react-paginate-61d0e15f.js";import{l as oe}from"./index-18cf91c4.js";import{C as ce}from"./index-2fd36de9.js";import{L as k}from"./popover-807b57b5.js";import{t as de}from"./transition-d8cb4eb2.js";import"./_commonjs-dynamic-modules-302442b1.js";import"./render-5eaee1c9.js";import"./keyboard-7b642a18.js";import"./bugs-55244794.js";import"./use-is-mounted-31350877.js";import"./use-resolve-button-type-ff7c32c3.js";import"./use-event-listener-2051adf1.js";function ie(...y){return y.filter(Boolean).join(" ")}function Pe({setActiveIndexGTRS:y,setactiveCon:T,consData:C,setLastIndex:A,accData:f,IDfilter:me,EDate:x,setEDate:L,SDate:p,setSDate:Z,oldestDate:H,latestDate:I}){const O=t=>{y(3),A(1),T(t)},[i,B]=r.useState(C),[N,K]=r.useState(""),W=t=>{const o=t.target.value;Z(o),b(o,x,N)},z=t=>{const o=t.target.value;L(o),b(p,o,N)},V=t=>{K(t),b(p,x,t)},b=(t,o,m)=>{const n=f==null?void 0:f.map(u=>{const l=parseInt(u);return isNaN(l)?0:l}),h=C.filter(u=>{const l=(n==null?void 0:n.length)===0||(n==null?void 0:n.includes(u.ChargeToID)),c=new Date(u.DespatchDate),d=new Date(t),g=new Date(o);d.setHours(0),g.setSeconds(59),g.setMinutes(59),g.setHours(23);const ae=m?u.ConsignmentNo.includes(m):!0;return c>=d&&c<=g&&ae&&l});E(0),B(h)};r.useEffect(()=>{b(p,x,N)},[f,p]);const D=r.useRef(),[v,R]=r.useState(!1),[M,Y]=r.useState(!1),[s,P]=r.useState([]);r.useLayoutEffect(()=>{const t=s.length>0&&s.length<i.length;R(s.length===i.length),Y(t),D.current.indeterminate=t},[s]);function G(){P(v||M?[]:i),R(v&&M),Y(!1)}const[_,E]=r.useState(0),w=15,F=_*w,q=t=>{E(t.selected)},J=Math.ceil(i.length/w),X=r.useRef(null),$=["Consignment No","Service","Account Name","Despatch Date","Status","Sender Name","Sender State","Sender Suburb","Sender Zone","Receiver Name","Receiver State","Receiver Suburb","Receiver Zone","POD"];oe.useDownloadExcel({currentTableRef:X.current,filename:"Consignments table",sheet:"Consignments"});function Q(){let t=Array.from(document.querySelectorAll('input[name="column"]:checked')).map(l=>l.value);t.length===0&&(t=$);const o=s.map(l=>t.reduce((c,d)=>(d.replace(/\s+/g,"")&&(d.replace(/\s+/g,"")==="DespatchDate"?c[d.replace(/\s+/g,"")]=S(l.DespatchDate.replace("T"," "),"YYYY-MM-DD HH:mm:ss").format("DD-MM-YYYY hh:mm A")=="Invalid date"?"":S(l.DespatchDate.replace("T"," "),"YYYY-MM-DD HH:mm:ss").format("DD-MM-YYYY h:mm A"):c[d.replace(/\s+/g,"")]=l[d.replace(/\s+/g,"")]),c),{})),m=new le.Workbook,n=m.addWorksheet("Sheet1"),h=n.addRow(t);h.font={bold:!0},h.fill={type:"pattern",pattern:"solid",fgColor:{argb:"FFE2B540"}},h.alignment={horizontal:"center"},o.forEach(l=>{n.addRow(Object.values(l))});const u=t.map(()=>15);n.columns=u.map((l,c)=>({width:l,key:t[c]})),m.xlsx.writeBuffer().then(l=>{const c=new Blob([l],{type:"application/vnd.openxmlformats-officedocument.spreadsheetml.sheet"});re.saveAs(c,"Consignments.xlsx")})}const[U,ee]=r.useState(""),[te,j]=r.useState(!1);return a("div",{className:"px-4 sm:px-6 lg:px-8 w-full bg-smooth pb-20",children:[e("div",{className:"sm:flex sm:items-center",children:e("div",{className:"sm:flex-auto mt-6",children:e("h1",{className:"text-2xl py-2 px-0 font-extrabold text-gray-600",children:"Consignments"})})}),e("div",{className:"mt-3",children:e("div",{className:"w-full relative",children:a("div",{className:" sm:border-gray-200 text-gray-400 flex flex-col justify-between md:flex-row gap-y-4 gap-x-2 md:items-center",children:[e("label",{htmlFor:"last-name",className:"inline-block text-sm font-medium leading-6  flex-item items-center",children:"Date From"}),e("div",{className:"sm:mt-0 md:px-4 ",children:e("input",{type:"date",name:"from-date",onKeyDown:t=>t.preventDefault(),value:p,min:H,max:x,onChange:W,id:"from-date",className:"flex-item block w-full max-w-lg h-[36px] rounded-md border-0 py-1.5 text-gray-700 shadow-sm ring-1 ring-inset ring-gray-300 placeholder:text-gray-400 focus:ring-2 focus:ring-inset focus:ring-indigo-600 sm:max-w-xs sm:text-sm sm:leading-6"})}),e("label",{htmlFor:"last-name",className:"inline-block text-sm font-medium leading-6 flex-item",children:"To"}),e("div",{className:"mt-2 flex-item  sm:mt-0 md:px-4",children:e("input",{type:"date",name:"to-date",onKeyDown:t=>t.preventDefault(),value:x,min:p,max:I,onChange:z,id:"to-date",className:"block w-full max-w-lg h-[36px]  rounded-md border-0 py-1.5 text-gray-700 shadow-sm ring-1 ring-inset ring-gray-300 placeholder:text-gray-400 focus:ring-2 focus:ring-inset focus:ring-indigo-600 sm:max-w-xs sm:text-sm sm:leading-6"})}),e("div",{className:"w-72 flex-item w-full sm:max-w-xs max-w-lg",children:a("div",{className:"relative border rounded",children:[e("svg",{xmlns:"http://www.w3.org/2000/svg",className:"absolute top-0 bottom-0 w-4 h-4 my-auto text-gray-400 left-3",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:e("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M21 21l-6-6m2-5a7 7 0 11-14 0 7 7 0 0114 0z"})}),e("input",{type:"text",placeholder:"Con. No.",onChange:t=>V(t.target.value),className:"w-full py-0.5 h-[36px] pl-12 pr-4 text-gray-500 border-none rounded-md outline-none "})]})}),a(k,{className:"relative object-right flex-item md:ml-auto",children:[e("button",{onMouseEnter:()=>{s.length===0&&(ee("Please select a row"),j(!0),setTimeout(()=>{j(!1)},2e3))},children:a(k.Button,{className:`inline-flex items-center w-[5.5rem] h-[36px] rounded-md border ${s.length===0?"bg-gray-300 cursor-not-allowed":"bg-gray-800"} px-4 py-2 text-xs font-medium leading-4 text-white shadow-sm hover:bg-gray-400 focus:outline-none focus:ring-2 focus:ring-indigo-500 focus:ring-offset-2`,disabled:s.length===0,children:["Export",e(ce,{className:"h-5 w-5","aria-hidden":"true"})]})}),te&&e("div",{className:"absolute top-7 -left-14 right-0 bg-red-200 text-dark text-xs py-2 px-4 rounded-md opacity-100 transition-opacity duration-300",children:U}),e(de,{as:r.Fragment,enter:"transition ease-out duration-200",enterFrom:"opacity-0 translate-y-1",enterTo:"opacity-100 translate-y-0",leave:"transition ease-in duration-150",leaveFrom:"opacity-100 translate-y-0",leaveTo:"opacity-0 translate-y-1",children:e(k.Panel,{className:"absolute left-20 lg:left-0 z-10 mt-5 flex w-screen max-w-max -translate-x-1/2 px-4",children:a("div",{className:" max-w-md flex-auto overflow-hidden rounded-lg bg-white text-sm leading-6 shadow-lg ring-1 ring-gray-900/5",children:[e("div",{className:"p-4",children:a("div",{className:"mt-2 flex flex-col",children:[a("label",{className:"",children:[e("input",{type:"checkbox",name:"column",value:"Consignment No",className:"text-dark rounded focus:ring-goldd"})," ","Consignment Number"]}),a("label",{className:"",children:[e("input",{type:"checkbox",name:"column",value:"AccountName",className:"text-dark rounded focus:ring-goldd"})," ","Account Name"]}),a("label",{children:[e("input",{type:"checkbox",name:"column",value:"Service",className:"text-dark rounded focus:ring-goldd"})," ","Service"]}),a("label",{children:[e("input",{type:"checkbox",name:"column",value:"DespatchDate",className:"text-dark rounded focus:ring-goldd"})," ","Despatch Date"]}),a("label",{children:[e("input",{type:"checkbox",name:"column",value:"Status",className:"text-dark rounded focus:ring-goldd"})," ","Status"]}),a("label",{children:[e("input",{type:"checkbox",name:"column",value:"Sender Name",className:"text-dark rounded focus:ring-goldd"})," ","Sender Name"]}),a("label",{children:[e("input",{type:"checkbox",name:"column",value:"Sender State",className:"text-dark rounded focus:ring-goldd"})," ","Sender State"]}),a("label",{children:[e("input",{type:"checkbox",name:"column",value:"Sender Suburb",className:"text-dark rounded focus:ring-goldd"})," ","Sender Suburb"]}),a("label",{children:[e("input",{type:"checkbox",name:"column",value:"Sender Zone",className:"text-dark rounded focus:ring-goldd"})," ","Sender Zone"]}),a("label",{children:[e("input",{type:"checkbox",name:"column",value:"Receiver Name",className:"text-dark rounded focus:ring-goldd"})," ","Receiver Name"]}),a("label",{children:[e("input",{type:"checkbox",name:"column",value:"Receiver State",className:"text-dark rounded focus:ring-goldd"})," ","Receiver State"]}),a("label",{children:[e("input",{type:"checkbox",name:"column",value:"Receiver Suburb",className:"text-dark rounded focus:ring-goldd"})," ","Receiver Suburb"]}),a("label",{children:[e("input",{type:"checkbox",name:"column",value:"Receiver Zone",className:"text-dark rounded focus:ring-goldd"})," ","Receiver Zone"]}),a("label",{children:[e("input",{type:"checkbox",name:"column",value:"POD",className:"text-dark rounded focus:ring-goldd"})," ","POD"]})]})}),e("div",{className:"grid grid-cols-1 divide-x divide-gray-900/5 bg-gray-50",children:e("button",{onClick:Q,className:"flex items-center justify-center gap-x-2.5 p-3 font-semibold text-gray-900 hover:bg-gray-100",children:"Export XLS"})})]})})})]})]})})}),a("div",{className:"mt-8 flow-root  bg-white ",children:[e("div",{className:"w-full border rounded-lg overflow-x-auto containerscroll",children:e("div",{className:"inline-block min-w-full  align-middle ",children:i?e("div",{className:"relative",children:a("table",{id:"details",className:"min-w-full table-fixed divide-y divide-gray-300 ",children:[e("thead",{className:"h-12",children:a("tr",{className:"py-2.5",children:[e("th",{scope:"col",className:"relative px-7 sm:w-12 sm:px-6",children:e("input",{type:"checkbox",className:"absolute left-4 top-1/2 -mt-2 h-4 w-4 rounded border-gray-300 text-dark focus:ring-goldd",ref:D,checked:v,onChange:G})}),e("th",{scope:"col",className:"min-w-[8rem] pr-3 text-left text-sm font-semibold text-gray-600",children:"Con No."}),e("th",{scope:"col",className:"min-w-[8rem] pr-3 text-left text-sm font-semibold text-gray-600",children:"Account Name"}),e("th",{scope:"col",className:"px-3  text-left text-sm font-semibold text-gray-600",children:"Service"}),e("th",{scope:"col",className:"px-3  text-left text-sm font-semibold text-gray-600",children:"Despatch Date"}),e("th",{scope:"col",className:"px-3  text-left text-sm font-semibold text-gray-600",children:"Status"}),e("th",{scope:"col",className:"px-3  text-left text-sm font-semibold text-gray-600",children:"Sender Name"}),e("th",{scope:"col",className:"px-3  text-left text-sm font-semibold text-gray-600",children:"Sender State"}),e("th",{s:!0,scope:"col",className:"px-3  text-left text-sm font-semibold text-gray-600",children:"Sender Suburb"}),e("th",{scope:"col",className:"px-3  text-left text-sm font-semibold text-gray-600",children:"Sender Zone"}),e("th",{scope:"col",className:"px-3 py-2.5 text-left text-sm font-semibold text-gray-600",children:"Receiver Name"}),e("th",{scope:"col",className:"px-3 py-2.5 text-left text-sm font-semibold text-gray-600",children:"Receiver State"}),e("th",{scope:"col",className:"px-3 py-2.5 text-left text-sm font-semibold text-gray-600",children:"Receiver Suburb"}),e("th",{scope:"col",className:"px-3 py-2.5 text-left text-sm font-semibold text-gray-600",children:"Receiver Zone"}),e("th",{scope:"col",className:"px-3 py-2.5 text-left text-sm font-semibold text-gray-600",children:"POD"})]})}),e("tbody",{className:"divide-y divide-gray-300  max-h-80 overflow-y-scroll",children:i.length>0?i.slice(F,F+w).map((t,o)=>a("tr",{className:[s.includes(t)?"bg-gray-50":"cursor-pointer",o%2===0?"bg-smooth":"bg-white"].join(" "),children:[a("td",{className:"relative px-7 sm:w-12 sm:px-6",children:[s.includes(t)&&e("div",{className:"absolute inset-y-0 left-0 w-0.5 bg-goldd"}),e("input",{type:"checkbox",className:"absolute left-4 top-1/2 -mt-2 h-4 w-4 rounded border-gray-300 text-dark focus:ring-goldd",value:t.Service,checked:s.includes(t),onChange:m=>P(m.target.checked?[...s,t]:s.filter(n=>n!==t))})]}),e("td",{onClick:()=>O(t.ConsignmentId),className:ie("whitespace-nowrap  pr-3 text-sm font-medium",s.includes(t)?"text-indigo-600":"text-blue-600 underline hover:cursor-pointer"),children:t.ConsignmentNo}),e("td",{className:"whitespace-nowrap px-3 py-2.5 text-sm text-gray-500",children:t.AccountName}),e("td",{className:"whitespace-nowrap px-3 py-2.5 text-sm text-gray-500",children:t.Service}),e("td",{className:"whitespace-nowrap px-3 py-2.5 text-sm text-gray-500",children:t.DespatchDate?S(t.DespatchDate.replace("T"," "),"YYYY-MM-DD HH:mm:ss").format("DD-MM-YYYY h:mm A"):null}),e("td",{className:"whitespace-nowrap px-3 py-2.5 text-sm text-gray-500",children:t.Status}),e("td",{className:"whitespace-nowrap px-3 py-2.5 text-sm text-gray-500",children:t.SenderName}),e("td",{className:"whitespace-nowrap px-3 py-2.5 text-sm text-gray-500",children:t.SenderState}),e("td",{className:"whitespace-nowrap px-3 py-2.5 text-sm text-gray-500",children:t.SenderSuburb}),e("td",{className:"whitespace-nowrap px-3 py-2.5 text-sm text-gray-500",children:t.SenderZone}),e("td",{className:"whitespace-nowrap px-3 py-2.5 text-sm text-gray-500",children:t.ReceiverName}),e("td",{className:"whitespace-nowrap px-3 py-2.5 text-sm text-gray-500",children:t.ReceiverState}),e("td",{className:"whitespace-nowrap px-3 py-2.5 text-sm text-gray-500",children:t.ReceiverSuburb}),e("td",{className:"whitespace-nowrap px-3 py-2.5 text-sm text-gray-500",children:t.ReceiverZone}),e("td",{className:"whitespace-nowrap px-3 py-2.5 text-sm text-gray-500",children:t.POD?e("span",{className:"inline-flex items-center rounded-full bg-green-100 px-3 py-0.5 text-sm font-medium text-green-800",children:"true"}):e("span",{className:"inline-flex items-center rounded-full bg-red-100 px-3 py-0.5 text-sm font-medium text-red-800",children:"false"})})]},t.ConsignmentNo)):e("tr",{children:e("td",{colSpan:"15",children:e("div",{class:" h-72 flex items-center justify-center mt-5",children:a("div",{class:"text-center flex justify-center flex-col",children:[e("img",{src:se,alt:"",className:"w-52 h-auto "}),e("h1",{class:"text-3xl font-bold text-gray-900",children:"No Data Found"})]})})})})})]})}):e("p",{children:"This is true"})})}),e("div",{className:"pt-4 pb-10 text-xs text-gray-400",children:e(ne,{previousLabel:"← Previous",nextLabel:"Next →",pageCount:J,onPageChange:q,containerClassName:"flex justify-center items-center mt-4",pageClassName:"mx-2 rounded-full hover:bg-gray-100",previousLinkClassName:"px-3 py-2 bg-gray-100 text-gray-700 rounded-l hover:bg-gray-200",nextLinkClassName:"px-3 py-2 bg-gray-100 text-gray-700 rounded-r hover:bg-gray-200",disabledClassName:"opacity-50 cursor-not-allowed",activeClassName:"text-blue-500 font-bold"})})]})]})}export{Pe as default};
