import{r as x,j as b,a}from"./app-e057de79.js";import{C as N,B as A,e as j,d as D,f as V,p as I,a as L}from"./chart-edd6f26f.js";import"./chartjs-adapter-moment.esm-ca28907c.js";import{t as s}from"./Utils-ddf74621.js";import"./moment-fbc5633a.js";N.register(A,j,D,V,I,L);function O({data:i,width:C,height:v}){const l=x.useRef(null),y=x.useRef(null);return x.useEffect(()=>{const c=(t,u)=>t+u,m=i.datasets.map(t=>t.data.reduce(c)),r=0,e=m==null?void 0:m.reduce(c,r),p=l.current,E=new N(p,{type:"bar",data:i,options:{indexAxis:"y",layout:{padding:{top:12,bottom:12,left:20,right:20}},scales:{x:{stacked:!0,display:!1,max:e},y:{stacked:!0,display:!1}},plugins:{legend:{display:!1},tooltip:{callbacks:{title:()=>!1,label:t=>t.parsed.x}}},interaction:{intersect:!1,mode:"nearest"},animation:{duration:500},maintainAspectRatio:!1,resizeDelay:200},plugins:[{id:"htmlLegend",afterUpdate(t,u,w){const d=y.current;if(!d)return;for(;d.firstChild;)d.firstChild.remove();t.options.plugins.legend.labels.generateLabels(t).forEach(h=>{const n=document.createElement("li");n.style.display="flex",n.style.justifyContent="space-between",n.style.alignItems="center",n.style.paddingTop=s().theme.padding[2.5],n.style.paddingBottom=s().theme.padding[2.5];const f=document.createElement("div");f.style.display="flex",f.style.alignItems="center";const o=document.createElement("div");o.style.width=s().theme.width[3],o.style.height=s().theme.width[3],o.style.borderRadius=s().theme.borderRadius.sm,o.style.marginRight=s().theme.margin[3],o.style.backgroundColor=h.fillStyle;const F=document.createElement("div"),g=document.createElement("div");g.style.fontWeight=s().theme.fontWeight.medium,g.style.marginLeft=s().theme.margin[3],g.style.color=h.text==="Other"?s().theme.colors.slate[400]:h.fillStyle;const B=t.data.datasets[h.datasetIndex].data.reduce((S,T)=>S+T,0),R=document.createTextNode(`${parseInt(B/e*100)}%`),k=document.createTextNode(h.text);g.appendChild(R),F.appendChild(k),d.appendChild(n),n.appendChild(f),n.appendChild(g),f.appendChild(o),f.appendChild(F)})}}]});return()=>E.destroy()},[i]),b("div",{className:"grow flex flex-col justify-center",children:[a("div",{children:a("canvas",{ref:l,width:C,height:v})}),b("div",{className:"px-5 pt-2 pb-2",children:[a("ul",{ref:y,className:"text-sm divide-y divide-slate-100"}),a("ul",{className:"text-sm divide-y divide-slate-100"})]})]})}function q(i){function C(r){let e=0;for(let p in r)r.hasOwnProperty(p)&&(e+=r[p]);return e}const v=i.chartTitle,l=i.singleBarValue,y=C(l);x.useEffect(()=>{l!==null&&c(l)},[l]);function c(r){const e=["#F5D657","#A3A6AF","#7F7F7F","#F3E9CE","#FFED93","#E2C047","#8E919B","#4F4F4F","#F1E6C4","#FFE680"];return Object.entries(r).map(([E,t],u)=>{const w=e.length>0?e[u%e.length]:"#000000",d=e.length>0?e[(u+5)%e.length]:"#000000";return{label:E,data:[t],backgroundColor:w,hoverBackgroundColor:d,barPercentage:1,categoryPercentage:1}})}const m={labels:["Reasons"],datasets:c(l)};return b("div",{className:"col-span-full xl:col-span-6 bg-white shadow-lg h-full rounded-sm border border-slate-200",children:[a("header",{className:"px-5 py-4 border-b border-slate-100",children:a("h2",{className:"font-semibold text-slate-800",children:v})}),a("div",{className:"px-5 py-3",children:a("div",{className:"flex items-start",children:b("div",{className:"text-3xl font-bold text-slate-800 mr-2",children:[y," Reports"]})})}),a("div",{className:"grow",children:a(O,{data:m,width:595,height:48})})]})}export{q as default};
