import{r as i,a as e,j as a,F as A,i as we}from"./app-e057de79.js";import{R as De}from"./react-paginate-61d0e15f.js";import{l as Ee}from"./index-18cf91c4.js";import{n as Me}from"./NotFound-19253a0b.js";import{E as Ye}from"./exceljs.min-9c74167d.js";import{F as Se}from"./FileSaver.min-104598b7.js";import{P as Ie}from"./index-92f9eb90.js";import{h as y}from"./moment-fbc5633a.js";import{a as le,b as ne,C as Re}from"./index-2fd36de9.js";import{R as Te}from"./index-2d4490b8.js";import"./TextInput-ea077d76.js";import{H as x}from"./listbox-f3941a9f.js";import{t as q}from"./transition-d8cb4eb2.js";import{L as ge}from"./popover-807b57b5.js";import"./_commonjs-dynamic-modules-302442b1.js";import"./use-is-mounted-31350877.js";import"./render-5eaee1c9.js";import"./keyboard-7b642a18.js";import"./bugs-55244794.js";import"./use-resolve-button-type-ff7c32c3.js";import"./use-event-listener-2051adf1.js";function ke({isOpen:F,handleClose:M,reason:u,url:se,setReason:ie,failedReasons:p,currentUser:L,updateLocalData:H}){const[g,re]=i.useState(),[T,$]=i.useState(),[J,X]=i.useState(),[oe,ce]=i.useState(),[fe,Z]=i.useState(),[j,U]=i.useState(!1),[m,G]=i.useState(),[h,K]=i.useState(),[V,de]=i.useState(),O=[{id:1,name:"Internal",unavailable:!1},{id:2,name:"External",unavailable:!1}],k=[{id:1,name:"Customer",unavailable:!1},{id:2,name:"Driver - Linehaul",unavailable:!1},{id:3,name:"Driver - Local",unavailable:!1},{id:4,name:"GTLS Customer Service",unavailable:!0},{id:5,name:"Linehaul Allocations ",unavailable:!1},{id:6,name:"Local Allocations",unavailable:!1},{id:7,name:"Operations Administration ",unavailable:!1},{id:8,name:"Transit Dock ",unavailable:!1}],C=[{id:1,name:"NSW",unavailable:!1},{id:2,name:"MLB",unavailable:!1},{id:3,name:"QLD",unavailable:!1},{id:4,name:"SA",unavailable:!1},{id:5,name:"WA",unavailable:!1},{id:6,name:"NA",unavailable:!1}];function P(o){const s=C.find(c=>c.name===o);return s?s.id-1:0}function ee(o){const s=k.find(c=>c.name===o);return s?s.id:0}const[b,z]=i.useState(C[0]),[v,W]=i.useState(O[0]),[d,Q]=i.useState(k[0]);i.useEffect(()=>{var o,s;if(K(),re(u),Z((o=p==null?void 0:p.find(c=>c.ReasonId===(u==null?void 0:u.FailedReason)))==null?void 0:o.ReasonName),u){const c=u.State,E=u.Department;let B=0;u.Reference==0?B=u.Reference:B=u.Reference-1,z(C[P(c)]),Q(k[ee(E)]),W(O[B]);const be=(s=p==null?void 0:p.find(f=>f.ReasonId===(u==null?void 0:u.FailedReason)))==null?void 0:s.ReasonName,t=p==null?void 0:p.findIndex(f=>be===f.ReasonName);p&&(p[t]?G(p[t]):G(p[0]))}ce(m==null?void 0:m.ReasonDesc),$(u==null?void 0:u.FailedNote),X(u==null?void 0:u.Resolution)},[u]);function w(...o){return o.filter(Boolean).join(" ")}const[Ne,te]=i.useState(null),[ae,_]=i.useState(!1),me=[{ConsId:g==null?void 0:g.CONSIGNMNENTID,ReasonId:m==null?void 0:m.ReasonId,Description:m==null?void 0:m.ReasonDesc,note:T,State:b==null?void 0:b.name,Department:d==null?void 0:d.name,Resolution:J,Reference:v==null?void 0:v.id,OccuredAt:V,AddedBy:L.name}],ue=async o=>{o.preventDefault();try{U(!0);const s=await we.post(`${se}api/Add/ConsFailedReason`,me,{headers:{RoleId:L.role_id}});_(!0),setTimeout(()=>{M(),_(!1),U(!1),H(u.CONSIGNMNENTID,m.ReasonId,T,m.ReasonDesc,d.name,J,v.id,b.name,V)},1e3)}catch{U(!1),te("Error occurred while saving the data. Please try again.")}},he=()=>{ie(null),M()};function xe(o){G(o),K(o)}function pe(o){const s=new Date(o.target.value);de(s.toLocaleString("sv-SE"))}return e(Te,{isOpen:F,className:"fixed inset-0 flex items-center justify-center ",overlayClassName:"fixed inset-0 bg-black bg-opacity-60",children:a("div",{className:"bg-white w-96 rounded-lg shadow-lg p-6  ",children:[e("div",{className:"flex justify-end ",children:e("button",{className:"text-gray-500 hover:text-gray-700",onClick:he,children:e("svg",{xmlns:"http://www.w3.org/2000/svg",className:"h-6 w-6",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:e("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M6 18L18 6M6 6l12 12"})})})}),e("h2",{className:"text-2xl font-bold mb-4",children:"Set Failed Reason"}),a("form",{onSubmit:ue,className:"overflow-y-auto h-[25rem] pr-2 containerscroll",children:[e(x,{value:m,onChange:xe,children:({open:o})=>a(A,{children:[e(x.Label,{className:"block text-sm font-medium leading-6 text-gray-900",children:"Reason"}),a("div",{className:"relative mt-2",children:[a(x.Button,{className:"relative w-full cursor-default rounded-md bg-white py-1.5 pl-3 pr-10 text-left text-gray-900 shadow-sm ring-1 ring-inset ring-gray-300 focus:outline-none focus:ring-2 focus:ring-indigo-600 sm:text-sm sm:leading-6",children:[e("span",{className:"block truncate",children:m!=null&&m.ReasonName?e("p",{children:m==null?void 0:m.ReasonName}):e("p",{children:"Select Reason"})}),e("span",{className:"pointer-events-none absolute inset-y-0 right-0 flex items-center pr-2",children:e(le,{className:"h-5 w-5 text-gray-400","aria-hidden":"true"})})]}),e(q,{show:o,as:i.Fragment,leave:"transition ease-in duration-100",leaveFrom:"opacity-100",leaveTo:"opacity-0",children:e(x.Options,{className:"absolute z-10 mt-1 max-h-60 w-full overflow-auto rounded-md bg-white py-1 text-base shadow-lg ring-1 ring-black ring-opacity-5 focus:outline-none sm:text-sm",children:p==null?void 0:p.filter(s=>s.ReasonStatus===!0).map(s=>e(x.Option,{className:({active:c})=>w(c?"bg-indigo-600 text-white":"text-gray-900","relative cursor-default select-none py-2 pl-3 pr-9"),value:s,children:({selected:c,active:E})=>a(A,{children:[e("span",{className:w(c?"font-semibold":"font-normal","block truncate"),children:s.ReasonName}),c?e("span",{className:w(E?"text-white":"text-indigo-600","absolute inset-y-0 right-0 flex items-center pr-4"),children:e(ne,{className:"h-5 w-5","aria-hidden":"true"})}):null]})},s.ReasonId))})})]})]})}),h&&m&&e("div",{children:e("div",{className:"text-sm p-2",children:h.ReasonDesc})}),e(x,{value:v,onChange:W,children:({open:o})=>a(A,{children:[e(x.Label,{className:"block text-sm font-medium leading-6 pt-2 text-gray-900",children:"Reference"}),a("div",{className:"relative mt-2",children:[a(x.Button,{className:"relative w-full cursor-default rounded-md bg-white py-1.5 pl-3 pr-10 text-left text-gray-900 shadow-sm ring-1 ring-inset ring-gray-300 focus:outline-none focus:ring-2 focus:ring-indigo-600 sm:text-sm sm:leading-6",children:[e("span",{className:"block truncate",children:v!=null&&v.name?e("p",{children:v==null?void 0:v.name}):e("p",{children:"Select Reference"})}),e("span",{className:"pointer-events-none absolute inset-y-0 right-0 flex items-center pr-2",children:e(le,{className:"h-5 w-5 text-gray-400","aria-hidden":"true"})})]}),e(q,{show:o,as:i.Fragment,leave:"transition ease-in duration-100",leaveFrom:"opacity-100",leaveTo:"opacity-0",children:e(x.Options,{className:"absolute z-10 mt-1 max-h-60 w-full overflow-auto rounded-md bg-white py-1 text-base shadow-lg ring-1 ring-black ring-opacity-5 focus:outline-none sm:text-sm",children:O==null?void 0:O.filter(s=>s.unavailable===!1).map(s=>e(x.Option,{className:({active:c})=>w(c?"bg-indigo-600 text-white":"text-gray-900","relative cursor-default select-none py-2 pl-3 pr-9"),value:s,children:({selected:c,active:E})=>a(A,{children:[e("span",{className:w(c?"font-semibold":"font-normal","block truncate"),children:s.name}),c?e("span",{className:w(E?"text-white":"text-indigo-600","absolute inset-y-0 right-0 flex items-center pr-4"),children:e(ne,{className:"h-5 w-5","aria-hidden":"true"})}):null]})},s.id))})})]})]})}),e(x,{value:b,onChange:z,children:({open:o})=>a(A,{children:[e(x.Label,{className:"block text-sm font-medium leading-6 pt-2 text-gray-900",children:"State"}),a("div",{className:"relative mt-2",children:[a(x.Button,{className:"relative w-full cursor-default rounded-md bg-white py-1.5 pl-3 pr-10 text-left text-gray-900 shadow-sm ring-1 ring-inset ring-gray-300 focus:outline-none focus:ring-2 focus:ring-indigo-600 sm:text-sm sm:leading-6",children:[e("span",{className:"block truncate",children:b!=null&&b.name?e("p",{children:b==null?void 0:b.name}):e("p",{children:"Select State"})}),e("span",{className:"pointer-events-none absolute inset-y-0 right-0 flex items-center pr-2",children:e(le,{className:"h-5 w-5 text-gray-400","aria-hidden":"true"})})]}),e(q,{show:o,as:i.Fragment,leave:"transition ease-in duration-100",leaveFrom:"opacity-100",leaveTo:"opacity-0",children:e(x.Options,{className:"absolute z-10 mt-1 max-h-60 w-full overflow-auto rounded-md bg-white py-1 text-base shadow-lg ring-1 ring-black ring-opacity-5 focus:outline-none sm:text-sm",children:C==null?void 0:C.filter(s=>s.unavailable===!1).map(s=>e(x.Option,{className:({active:c})=>w(c?"bg-indigo-600 text-white":"text-gray-900","relative cursor-default select-none py-2 pl-3 pr-9"),value:s,children:({selected:c,active:E})=>a(A,{children:[e("span",{className:w(c?"font-semibold":"font-normal","block truncate"),children:s.name}),c?e("span",{className:w(E?"text-white":"text-indigo-600","absolute inset-y-0 right-0 flex items-center pr-4"),children:e(ne,{className:"h-5 w-5","aria-hidden":"true"})}):null]})},s.id))})})]})]})}),e(x,{value:d,onChange:Q,children:({open:o})=>a(A,{children:[e(x.Label,{className:"block text-sm font-medium leading-6 pt-2 text-gray-900",children:"Departments"}),a("div",{className:"relative mt-2",children:[a(x.Button,{className:"relative w-full cursor-default rounded-md bg-white py-1.5 pl-3 pr-10 text-left text-gray-900 shadow-sm ring-1 ring-inset ring-gray-300 focus:outline-none focus:ring-2 focus:ring-indigo-600 sm:text-sm sm:leading-6",children:[e("span",{className:"block truncate",children:d!=null&&d.name?e("p",{children:d==null?void 0:d.name}):e("p",{children:"Select Department"})}),e("span",{className:"pointer-events-none absolute inset-y-0 right-0 flex items-center pr-2",children:e(le,{className:"h-5 w-5 text-gray-400","aria-hidden":"true"})})]}),e(q,{show:o,as:i.Fragment,leave:"transition ease-in duration-100",leaveFrom:"opacity-100",leaveTo:"opacity-0",children:e(x.Options,{className:"absolute z-10 mt-1 max-h-60 w-full overflow-auto rounded-md bg-white py-1 text-base shadow-lg ring-1 ring-black ring-opacity-5 focus:outline-none sm:text-sm",children:k==null?void 0:k.filter(s=>s.unavailable===!1).map(s=>e(x.Option,{className:({active:c})=>w(c?"bg-indigo-600 text-white":"text-gray-900","relative cursor-default select-none py-2 pl-3 pr-9"),value:s,children:({selected:c,active:E})=>a(A,{children:[e("span",{className:w(c?"font-semibold":"font-normal","block truncate"),children:s.name}),c?e("span",{className:w(E?"text-white":"text-indigo-600","absolute inset-y-0 right-0 flex items-center pr-4"),children:e(ne,{className:"h-5 w-5","aria-hidden":"true"})}):null]})},s.id))})})]})]})}),a("div",{className:"mt-2",children:[e("label",{htmlFor:"comment",className:"block text-sm font-medium leading-6 text-gray-900",children:"Resolution"}),e("div",{className:"mt-2",children:e("input",{type:"text",rows:4,name:"comment",id:"comment",className:"block w-full rounded-md border-0 py-1.5 text-gray-900 shadow-sm ring-1 ring-inset ring-gray-300 placeholder:text-gray-400 focus:ring-2 focus:ring-inset focus:ring-indigo-600 sm:text-sm sm:leading-6",defaultValue:g==null?void 0:g.Resolution,onChange:o=>{X(o.target.value)}})})]}),a("div",{className:"mt-2",children:[e("label",{htmlFor:"comment",className:"block text-sm font-medium leading-6 text-gray-900",children:"Explanation"}),e("div",{className:"mt-2",children:e("textarea",{rows:4,name:"comment",id:"comment",className:"block w-full rounded-md border-0 py-1.5 text-gray-900 shadow-sm ring-1 ring-inset ring-gray-300 placeholder:text-gray-400 focus:ring-2 focus:ring-inset focus:ring-indigo-600 sm:text-sm sm:leading-6",defaultValue:g==null?void 0:g.FailedNote,onChange:o=>{$(o.target.value)}})})]}),a("div",{className:"mt-2",children:[e("label",{htmlFor:"OccuredAt",className:"block mb-2",children:"Occured At:"}),e("input",{type:"datetime-local",id:"OccuredAt",name:"OccuredAt",defaultValue:g==null?void 0:g.OccuredAt,onChange:pe,className:"w-full border border-gray-300 rounded px-3 py-2"})]}),e("div",{className:"mt-6 flex items-center justify-end gap-x-6",children:e("button",{type:"submit",disabled:j,className:"rounded-md bg-dark w-20 px-3 py-2 text-sm font-semibold text-white shadow-sm hover:bg-goldd focus-visible:outline focus-visible:outline-2 focus-visible:outline-offset-2 focus-visible:outline-indigo-600",children:j?e("div",{className:" inset-0 flex justify-center items-center bg-opacity-50",children:e("div",{className:"animate-spin rounded-full h-6 w-6 border-t-2 border-b-2 border-smooth"})}):"Save"})})]})]})})}const ye=["1","3","4","5"];function Ce(...F){return F.filter(Boolean).join(" ")}function et({PerfData:F,failedReasons:M,url:u,setActiveIndexGTRS:se,setLastIndex:ie,setactiveCon:p,currentUser:L,accData:H,EDate:g,setEDate:re,SDate:T,setSDate:$,oldestDate:J,latestDate:X}){const[oe,ce]=i.useState(!1),[fe,Z]=i.useState(),j=t=>{Z(t),ce(!oe)},U=t=>{se(3),ie(5),p(t)},[m,G]=i.useState(F==null?void 0:F.filter(t=>t.STATUS==="FAIL")),[h,K]=i.useState(m),[V,de]=i.useState(""),O=t=>{const f=t.target.value;$(f),P(f,g,V)},k=t=>{const f=t.target.value;re(f),P(T,f,V)},C=t=>{de(t),P(T,g,t)},P=(t,f,Y)=>{const N=H==null?void 0:H.map(I=>{const n=parseInt(I);return isNaN(n)?0:n}),S=m==null?void 0:m.filter(I=>{const n=(N==null?void 0:N.length)===0||(N==null?void 0:N.includes(I.ChargeTo)),r=new Date(I.DESPATCHDATE),D=new Date(t),l=new Date(f);D.setHours(0),l.setSeconds(59),l.setMinutes(59),l.setHours(23);const R=Y?I.CONSIGNMENTNUMBER.includes(Y):!0;return r>=D&&r<=l&&R&&n});te(0),K(S)};i.useEffect(()=>{P(T,g,V)},[H]);const ee=i.useRef(),[b,z]=i.useState(!1),[v,W]=i.useState(!1),[d,Q]=i.useState([]);i.useLayoutEffect(()=>{const t=d.length>0&&d.length<(h==null?void 0:h.length);z(d.length===(h==null?void 0:h.length)),W(t),ee.current.indeterminate=t},[d]);function w(){Q(b||v?[]:h),z(!b&&!v),W(!1)}const[Ne,te]=i.useState(0),ae=15,_=Ne*ae,me=t=>{te(t.selected)},ue=Math.ceil((h==null?void 0:h.length)/ae),he=i.useRef(null),xe=["Consignemnt Number","Status","Sender Name","Sender State","Receiver Name","Receiver State","Service","KPI DateTime","RDD","Arrived Date Time","Delivered Datetime","POD","State","Reason","Main Cause","Reference","Department","Resolution","OccuredAt","Explanation"];Ee.useDownloadExcel({currentTableRef:he.current,filename:"Consignments table",sheet:"Consignments"});function pe(){let t=Array.from(document.querySelectorAll('input[name="column"]:checked')).map(n=>n.value);t.length===0&&(t=xe);const f=d.map(n=>t.reduce((r,D)=>{const l=D.replace(/\s+/g,"");if(l)if(n[l]===!0)r[l]="true";else if(n[l]===!1)r[l]="false";else if(D.toUpperCase()==="KPI DATETIME")r[l]=y(n["KPI DATETIME"].replace("T"," "),"YYYY-MM-DD HH:mm:ss").format("DD-MM-YYYY h:mm A")=="Invalid date"?"":y(n["KPI DATETIME"].replace("T"," "),"YYYY-MM-DD HH:mm:ss").format("DD-MM-YYYY h:mm A");else if(D.toUpperCase()==="ARRIVED DATE TIME")r[l]=y(n.ARRIVEDDATETIME.replace("T"," "),"YYYY-MM-DD HH:mm:ss").format("DD-MM-YYYY h:mm A")=="Invalid date"?"":y(n.ARRIVEDDATETIME.replace("T"," "),"YYYY-MM-DD HH:mm:ss").format("DD-MM-YYYY h:mm A");else if(D.toUpperCase()==="RDD")r[l]=y(n.DELIVERYREQUIREDDATETIME.replace("T"," "),"YYYY-MM-DD HH:mm:ss").format("DD-MM-YYYY h:mm A")=="Invalid date"?"":y(n.DELIVERYREQUIREDDATETIME.replace("T"," "),"YYYY-MM-DD HH:mm:ss").format("DD-MM-YYYY h:mm A");else if(D.toUpperCase()==="DELIVERED DATETIME")r[l]=y(n.DELIVEREDDATETIME.replace("T"," "),"YYYY-MM-DD HH:mm:ss").format("DD-MM-YYYY h:mm A")=="Invalid date"?"":y(n.DELIVEREDDATETIME.replace("T"," "),"YYYY-MM-DD HH:mm:ss").format("DD-MM-YYYY h:mm A");else if(D.toUpperCase()==="OCCUREDAT")r[l]=y(n.DELIVEREDDATETIME.replace("T"," "),"YYYY-MM-DD HH:mm:ss").format("DD-MM-YYYY h:mm A")=="Invalid date"?"":y(n.DELIVEREDDATETIME.replace("T"," "),"YYYY-MM-DD HH:mm:ss").format("DD-MM-YYYY h:mm A");else if(D==="Consignemnt Number")r[l]=n.CONSIGNMENTNUMBER;else if(l==="Reason"){const R=M==null?void 0:M.find(ve=>ve.ReasonId===n.FailedReason);r[l]=R==null?void 0:R.ReasonName}else l==="SenderState"?r[l]=n.SenderState:l==="MainCause"?r[l]=n.FailedReasonDesc:l==="Explanation"?r[l]=n.FailedNote:l==="Reference"?n.Reference==1?r[l]="Internal":n.Reference==2?r[l]="External":r[l]="":l==="Resolution"?r[l]=n.Resolution:l==="Department"?r[l]=n.Department:l==="State"?r[l]=n.State:r[l]=n[l.toUpperCase()];else r[l]=n[l.toUpperCase()];return r},{})),Y=new Ye.Workbook,N=Y.addWorksheet("Sheet1"),S=N.addRow(t);S.font={bold:!0},S.fill={type:"pattern",pattern:"solid",fgColor:{argb:"FFE2B540"}},S.alignment={horizontal:"center"},f.forEach(n=>{N.addRow(Object.values(n))});const I=t.map(()=>15);N.columns=I.map((n,r)=>({width:n,key:t[r]})),Y.xlsx.writeBuffer().then(n=>{const r=new Blob([n],{type:"application/vnd.openxmlformats-officedocument.spreadsheetml.sheet"});Se.saveAs(r,"Failed-Consignments.xlsx")})}const o=(t,f,Y,N,S,I,n,r,D)=>{const l=h==null?void 0:h.map(R=>R.CONSIGNMNENTID===t?{...R,FailedReason:f,FailedReasonDesc:N,FailedNote:Y,Department:S,Resolution:I,Reference:n,State:r,OccuredAt:D}:R);G(l),K(l)},[s,c]=i.useState(""),[E,B]=i.useState(!1);return a("div",{children:[a("div",{className:" w-full bg-smooth ",children:[e("div",{className:"mt-8",children:e("div",{className:"w-full relative",children:a("div",{className:" sm:border-gray-200 text-gray-400 flex flex-col justify-between md:flex-row gap-y-4 gap-x-2 md:items-center",children:[e("label",{htmlFor:"last-name",className:"inline-block text-sm font-medium leading-6  flex-item items-center",children:"Date From"}),e("div",{className:"sm:mt-0 md:px-4 ",children:e("input",{type:"date",name:"from-date",onKeyDown:t=>t.preventDefault(),value:T,min:J,max:g,onChange:O,id:"from-date",className:"flex-item block w-full max-w-lg h-[36px] rounded-md border-0 py-1.5 text-gray-700 shadow-sm ring-1 ring-inset ring-gray-300 placeholder:text-gray-400 focus:ring-2 focus:ring-inset focus:ring-indigo-600 sm:max-w-xs sm:text-sm sm:leading-6"})}),e("label",{htmlFor:"last-name",className:"inline-block text-sm font-medium leading-6 flex-item",children:"To"}),e("div",{className:"mt-2 flex-item  sm:mt-0 md:px-4",children:e("input",{type:"date",name:"to-date",onKeyDown:t=>t.preventDefault(),value:g,min:T,max:X,onChange:k,id:"to-date",className:"block w-full max-w-lg h-[36px]  rounded-md border-0 py-1.5 text-gray-700 shadow-sm ring-1 ring-inset ring-gray-300 placeholder:text-gray-400 focus:ring-2 focus:ring-inset focus:ring-indigo-600 sm:max-w-xs sm:text-sm sm:leading-6"})}),e("div",{className:"w-72 flex-item w-full sm:max-w-xs max-w-lg",children:a("div",{className:"relative border rounded",children:[e("svg",{xmlns:"http://www.w3.org/2000/svg",className:"absolute top-0 bottom-0 w-4 h-4 my-auto text-gray-400 left-3",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:e("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M21 21l-6-6m2-5a7 7 0 11-14 0 7 7 0 0114 0z"})}),e("input",{type:"text",placeholder:"Con. No.",onChange:t=>C(t.target.value),className:"w-full py-0.5 h-[36px] pl-12 pr-4 text-gray-500 border-none rounded-md outline-none "})]})}),a(ge,{className:"relative object-right flex-item md:ml-auto",children:[e("button",{onMouseEnter:()=>{d.length===0&&(c("Please select a row"),B(!0),setTimeout(()=>{B(!1)},2e3))},children:a(ge.Button,{className:`inline-flex items-center w-[5.5rem] h-[36px] rounded-md border ${d.length===0?"bg-gray-300 cursor-not-allowed":"bg-gray-800"} px-4 py-2 text-xs font-medium leading-4 text-white shadow-sm hover:bg-gray-400 focus:outline-none focus:ring-2 focus:ring-indigo-500 focus:ring-offset-2`,disabled:d.length===0,children:["Export",e(Re,{className:"h-5 w-5","aria-hidden":"true"})]})}),E&&e("div",{className:"absolute top-7 -left-14 right-0 bg-red-200 text-dark text-xs py-2 px-4 rounded-md opacity-100 transition-opacity duration-300",children:s}),e(q,{as:i.Fragment,enter:"transition ease-out duration-200",enterFrom:"opacity-0 translate-y-1",enterTo:"opacity-100 translate-y-0",leave:"transition ease-in duration-150",leaveFrom:"opacity-100 translate-y-0",leaveTo:"opacity-0 translate-y-1",children:e(ge.Panel,{className:"absolute left-20 lg:-left-5 z-10 mt-5 flex w-screen max-w-max -translate-x-1/2 px-4",children:a("div",{className:" max-w-md flex-auto overflow-hidden rounded-lg bg-white text-sm leading-6 shadow-lg ring-1 ring-gray-900/5",children:[e("div",{className:"p-4",children:a("div",{className:"mt-2 flex flex-col",children:[a("label",{className:"",children:[e("input",{type:"checkbox",name:"column",value:"CONSIGNMENTNUMBER",className:"text-dark focus:ring-goldd rounded "})," ","Consignment Number"]}),a("label",{children:[e("input",{type:"checkbox",name:"column",value:"STATUS",className:"text-dark rounded focus:ring-goldd"})," ","Status"]}),a("label",{children:[e("input",{type:"checkbox",name:"column",value:"SENDERNAME",className:"text-dark rounded focus:ring-goldd"})," ","Sender"]}),a("label",{children:[e("input",{type:"checkbox",name:"column",value:"SenderState",className:"text-dark rounded focus:ring-goldd"})," ","Sender State"]}),a("label",{children:[e("input",{type:"checkbox",name:"column",value:"RECEIVERNAME",className:"text-dark rounded focus:ring-goldd"})," ","Receiver"]}),a("label",{children:[e("input",{type:"checkbox",name:"column",value:"RECEIVERSTATE",className:"text-dark rounded focus:ring-goldd"})," ","Receiver State"]}),a("label",{children:[e("input",{type:"checkbox",name:"column",value:"SERVICE",className:"text-dark rounded focus:ring-goldd"})," ","Service"]}),a("label",{children:[e("input",{type:"checkbox",name:"column",value:"KPI DATETIME",className:"text-dark rounded focus:ring-goldd"})," ","KPI Time"]}),a("label",{children:[e("input",{type:"checkbox",name:"column",value:"DELIVERYREQUIREDDATETIME",className:"text-dark rounded focus:ring-goldd"})," ","Delivery Required DateTime"]}),a("label",{children:[e("input",{type:"checkbox",name:"column",value:"ARRIVEDDATETIME",className:"text-dark rounded focus:ring-goldd"})," ","Arrived Date Time"]}),a("label",{className:"",children:[e("input",{type:"checkbox",name:"column",value:"DELIVEREDDATETIME",className:"text-dark rounded focus:ring-goldd"})," ","Delivery Date"]}),a("label",{className:"",children:[e("input",{type:"checkbox",name:"column",value:"POD",className:"text-dark rounded focus:ring-goldd"})," ","POD"]}),a("label",{className:"",children:[e("input",{type:"checkbox",name:"column",value:"Reason",className:"text-dark rounded focus:ring-goldd"})," ","Reason"]}),a("label",{className:"",children:[e("input",{type:"checkbox",name:"column",value:"State",className:"text-dark rounded focus:ring-goldd"})," ","State"]}),a("label",{className:"",children:[e("input",{type:"checkbox",name:"column",value:"Reference",className:"text-dark rounded focus:ring-goldd"})," ","Reference"]}),a("label",{className:"",children:[e("input",{type:"checkbox",name:"column",value:"Department",className:"text-dark rounded focus:ring-goldd"})," ","Department"]}),a("label",{className:"",children:[e("input",{type:"checkbox",name:"column",value:"Resolution",className:"text-dark rounded focus:ring-goldd"})," ","Resolution"]}),a("label",{className:"",children:[e("input",{type:"checkbox",name:"column",value:"OccuredAt",className:"text-dark rounded focus:ring-goldd"})," ","Occured At"]}),a("label",{className:"",children:[e("input",{type:"checkbox",name:"column",value:"Main Cause",className:"text-dark rounded focus:ring-goldd"})," ","Main Cause"]}),a("label",{className:"",children:[e("input",{type:"checkbox",name:"column",value:"Explanation",className:"text-dark rounded focus:ring-goldd"})," ","Explanation"]})]})}),e("div",{className:"grid grid-cols-1 divide-x divide-gray-900/5 bg-gray-50",children:e("button",{onClick:pe,className:"flex items-center justify-center gap-x-2.5 p-3 font-semibold text-gray-900 hover:bg-gray-100",children:"Export XLS"})})]})})})]})]})})}),a("div",{className:"mt-8 flow-root  bg-white ",children:[e("div",{className:"w-full border rounded-lg overflow-x-auto containerscroll",children:e("div",{className:"inline-block min-w-full  align-middle ",children:a("div",{className:"relative",children:[d.length>0&&e("div",{className:"absolute left-14 top-0 flex h-12 items-center space-x-3 bg-white sm:left-12"}),a("table",{className:"min-w-full table-fixed divide-y divide-gray-300",children:[e("thead",{className:"h-12",children:a("tr",{className:"py-2.5",children:[e("th",{scope:"col",className:"relative px-7 sm:w-12 sm:px-6",children:e("input",{type:"checkbox",className:"absolute left-4 top-1/2 -mt-2 h-4 w-4 rounded border-gray-300 text-dark focus:ring-goldd",ref:ee,checked:b,onChange:w})}),e("th",{scope:"col",className:"min-w-[8rem] py-3.5 pr-3 text-left text-sm font-semibold text-gray-900",children:"Con No."}),e("th",{scope:"col",className:"px-3  text-left text-sm font-semibold text-gray-600",children:"Status"}),e("th",{scope:"col",className:"px-3  text-left text-sm font-semibold text-gray-600",children:"Sender"}),e("th",{scope:"col",className:"px-3  text-left text-sm font-semibold text-gray-600",children:"Sender State"}),e("th",{scope:"col",className:"px-3  text-left text-sm font-semibold text-gray-600",children:"Receiver"}),e("th",{scope:"col",className:"px-3  text-left text-sm font-semibold text-gray-600",children:"Receiver State"}),e("th",{scope:"col",className:"px-3  text-left text-sm font-semibold text-gray-600",children:"Service"}),e("th",{scope:"col",className:"px-3  text-left text-sm font-semibold text-gray-600",children:"KPI Time"}),e("th",{scope:"col",className:"px-3  text-left text-sm font-semibold text-gray-600",children:"RDD"}),e("th",{scope:"col",className:"px-3  text-left text-sm font-semibold text-gray-600",children:"Arrived time"}),e("th",{scope:"col",className:"px-3  text-left text-sm font-semibold text-gray-600",children:"Delivered time"}),e("th",{scope:"col",className:"px-3  text-left text-sm font-semibold text-gray-600",children:"POD"}),e("th",{scope:"col",className:"px-3  text-left text-sm font-semibold text-gray-600",children:"Reason"}),e("th",{scope:"col",className:"px-3  text-left text-sm font-semibold text-gray-600",children:"Main Cause"}),e("th",{scope:"col",className:"px-3  text-left text-sm font-semibold text-gray-600",children:"State"}),e("th",{scope:"col",className:"px-3  text-left text-sm font-semibold text-gray-600",children:"Reference"}),e("th",{scope:"col",className:"px-3  text-left text-sm font-semibold text-gray-600",children:"Department"}),e("th",{scope:"col",className:"px-3  text-left text-sm font-semibold text-gray-600",children:"Resolution"}),e("th",{scope:"col",className:"px-3  text-left text-sm font-semibold text-gray-600",children:"Occured At"}),e("th",{scope:"col",className:"px-3  text-left text-sm font-semibold text-gray-600",children:"Explanation"}),ye.includes(L.role_id)?e("th",{scope:"col",className:"px-3  text-left text-sm font-semibold text-gray-600",children:e("span",{className:"sr-only",children:"Edit"})}):e("div",{})]})}),e("tbody",{className:"divide-y divide-gray-300 ",children:(h==null?void 0:h.length)>0?h.slice(_,_+ae).map((t,f)=>{var Y;return a("tr",{className:[d.includes(t)?"bg-gray-50":"cursor-pointer",f%2===0?"bg-smooth":"bg-white"].join(" "),children:[a("td",{className:"relative px-7 sm:w-12 sm:px-6",children:[d.includes(t)&&e("div",{className:"absolute inset-y-0 left-0 w-0.5 bg-goldd"}),e("input",{v:!0,type:"checkbox",className:"absolute left-4 top-1/2 -mt-2 h-4 w-4 rounded border-gray-300 text-dark focus:ring-goldd",value:t.CONSIGNMNENTID,checked:d.includes(t),onChange:N=>Q(N.target.checked?[...d,t]:d.filter(S=>S!==t))})]}),e("td",{onClick:()=>U(t.CONSIGNMNENTID),className:Ce("whitespace-nowrap  pr-3 text-sm font-medium",d.includes(t)?"text-indigo-600":"text-blue-600 underline hover:cursor-pointer"),children:t.CONSIGNMENTNUMBER}),e("td",{className:"whitespace-nowrap px-3 py-2.5 text-sm text-gray-500",children:t.STATUS}),e("td",{className:"whitespace-nowrap px-3 py-2.5 text-sm text-gray-500",children:t.SENDERNAME}),e("td",{className:"whitespace-nowrap px-3 py-2.5 text-sm text-gray-500",children:t.SenderState}),e("td",{className:"whitespace-nowrap px-3 py-2.5 text-sm text-gray-500",children:t.RECEIVERNAME}),e("td",{className:"whitespace-nowrap px-3 py-2.5 text-sm text-gray-500",children:t.RECEIVERSTATE}),e("td",{className:"whitespace-nowrap px-3 py-2.5 text-sm text-gray-500",children:t.SERVICE}),e("td",{className:"whitespace-nowrap px-3 py-2.5 text-sm text-gray-500",children:t["KPI DATETIME"]?y(t["KPI DATETIME"].replace("T"," "),"YYYY-MM-DD HH:mm:ss").format("DD-MM-YYYY h:mm A"):null}),e("td",{className:"whitespace-nowrap px-3 py-2.5 text-sm text-gray-500",children:t.DELIVERYREQUIREDDATETIME?y(t.DELIVERYREQUIREDDATETIME.replace("T"," "),"YYYY-MM-DD HH:mm:ss").format("DD-MM-YYYY h:mm A"):null}),e("td",{className:"whitespace-nowrap px-3 py-2.5 text-sm text-gray-500",children:t.ARRIVEDDATETIME?y(t.ARRIVEDDATETIME.replace("T"," "),"YYYY-MM-DD HH:mm:ss").format("DD-MM-YYYY h:mm A"):null}),e("td",{className:"whitespace-nowrap px-3 py-2.5 text-sm text-gray-500",children:t.DELIVEREDDATETIME?y(t.DELIVEREDDATETIME.replace("T"," "),"YYYY-MM-DD HH:mm:ss").format("DD-MM-YYYY h:mm A"):null}),e("td",{className:"whitespace-nowrap px-3 py-2.5 text-sm text-gray-500",children:t.POD?e("span",{className:"inline-flex items-center rounded-full bg-green-100 px-3 py-0.5 text-sm font-medium text-green-800",children:"true"}):e("span",{className:"inline-flex items-center rounded-full bg-red-100 px-3 py-0.5 text-sm font-medium text-red-800",children:"false"})}),e("td",{className:"whitespace-nowrap px-3 py-4 text-sm text-gray-500",children:(Y=M==null?void 0:M.find(N=>N.ReasonId===t.FailedReason))==null?void 0:Y.ReasonName}),e("td",{className:"whitespace-nowrap px-3 py-4 text-sm text-gray-500",children:e("div",{className:"w-[10rem] truncate",children:t.FailedReasonDesc})}),e("td",{className:"whitespace-nowrap px-3 py-4 text-sm text-gray-500",children:t.State}),e("td",{className:"whitespace-nowrap px-3 py-2.5 text-sm text-gray-500",children:t.Reference===1?"Internal":t.Reference===2?"External":""}),e("td",{className:"whitespace-nowrap px-3 py-4 text-sm text-gray-500",children:t.Department}),e("td",{className:"whitespace-nowrap px-3 py-4 text-sm text-gray-500",children:t.Resolution}),e("td",{className:"whitespace-nowrap px-3 py-4 text-sm text-gray-500 truncate ",children:e("div",{className:"w-[10rem] truncate",children:t.OccuredAt?y(t.OccuredAt.replace("T"," "),"YYYY-MM-DD HH:mm:ss").format("DD-MM-YYYY h:mm A"):null})}),e("td",{className:"whitespace-nowrap px-3 py-4 text-sm text-gray-500 truncate ",children:e("div",{className:"w-[10rem] truncate",children:t.FailedNote})}),ye.includes(L.role_id)?e("td",{className:"relative whitespace-nowrap py-4 pl-3 sm:pr-4 pr-6 text-left text-sm font-medium",children:a("a",{href:"#",onClick:()=>j(t),className:" text-blue-500 hover:text-blue-900 flex",children:[e(Ie,{className:"w-5 h-5"}),e("span",{className:"ml-2",children:"Edit"}),e("span",{className:"sr-only",children:", reason"})]})}):e("div",{})]},t.CONSIGNMNENTID)}):e("tr",{children:e("td",{colSpan:"20",children:e("div",{class:" h-72 flex items-center justify-center mt-5",children:a("div",{class:"text-center flex justify-center flex-col",children:[e("img",{src:Me,alt:"",className:"w-52 h-auto "}),e("h1",{class:"text-3xl font-bold text-gray-900",children:"No Data Found"})]})})})})})]})]})})}),e("div",{className:"pt-4 pb-10 text-xs text-gray-400",children:e(De,{previousLabel:"← Previous",nextLabel:"Next →",pageCount:ue,onPageChange:me,containerClassName:"flex justify-center items-center mt-4",pageClassName:"mx-2 rounded-full hover:bg-gray-100",previousLinkClassName:"px-3 py-2 bg-gray-100 text-gray-700 rounded-l hover:bg-gray-200",nextLinkClassName:"px-3 py-2 bg-gray-100 text-gray-700 rounded-r hover:bg-gray-200",disabledClassName:"opacity-50 cursor-not-allowed",activeClassName:"text-blue-500 font-bold"})})]})]}),e(ke,{url:u,isOpen:oe,reason:fe,setReason:Z,handleClose:j,failedReasons:M,currentUser:L,updateLocalData:o})]})}export{et as default};
